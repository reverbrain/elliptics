elliptics (3.0.0.1) unstable; urgency=low
  * added missing files

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Nov 2019 15:54:33 UTC

elliptics (3.0.0.0) unstable; urgency=low
  * major update to the latest (to date) libraries and compilers
  * updated to the latest blackhole logger (master branch) https://github.com/3Hren/blackhole
  * long-awaited drop of the secondary indexes
  * dropped cocaine/srw support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Nov 2019 15:47:33 UTC

elliptics (2.26.11.1) unstable; urgency=low

  * man: converted to unix format, fixed comment macroses
  * python: use common python path
  * test: only include placeholders for newer boost
  * Updated elliptics to compile with gcc6 on fedora25 (updated boost and msgpack)
  * json: fixed isnan() invocation in c++ code
  * Add test for lookuping corrupted key
  * Validate record on lookup if its checksum is requested

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 13 Jan 2017 19:16:33 +0400

elliptics (2.26.11.0) unstable; urgency=low

  * trans: always set @wait_ts at allocation time to node's wait timeout
  * 	it will be overwritten if there is session's timeout
  * 	this fixes 'wait-ts: 0' strings in logs for transactions allocated without session like ROUTE_LIST
  * trans: minor clanup, remove transaction from all lists/trees under one lock
  * test: server_send() timeout test has to check iterator's result, not each key's status
  * backend: fix hanging backend intialization
  * session: set session timeout to copy iterator and server_send() control structure
  * server_send: extend control structures and add write timeout, set it for write sessions
  * node: fixed auto assignment
  * recovery: cast options.user_flags_set to int
  * pytests: added TestRecoveryUserFlags: checks recovery with specified user_flags_set
  * recovery: added --user_flags option: recover key if at least one replica has user_flags from specified user_flags_set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 13 May 2016 02:28:28 +0400

elliptics (2.26.10.3) unstable; urgency=low

  * io: do not handle lookup by cache if it does not have the key, propagate error to dnet_cmd_process_raw() and call backend callback
  * Move updating backend's weight to dnet_process_recv
  * logs: fix mistake in format string
  * logs: changed level of start/finish sent log messages
  * logs: added helpers to print dnet_io_attr and dnet_trans
  * Indent fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Mar 2016 18:06:09 +0400

elliptics (2.26.10.2) unstable; urgency=low

  * dc recovery: fix skipping keys when a whole server-send is failed
  * server-send: add client address to 'sending response' log
  * cmake: add option to disable long tests
  * iterator-copy: stop eblob iterator if write error has been occurred
  * server-send: move the check of write error occurence
  * Fix status in ack for request failed with -ENXIO
  * server_send: add tests for bad cases
  * Fix hanging of backend initialization
  * route: do not spam logs with debug route table content every time route table is requested
  * binding: added cflags_checksum & cflags_nocache to python binding
  * Fixed data size in write response:
  * python: added `set_delay` method
  * fixed trans number in a result in case of timeout
  * spec: fixed version string comparison

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2016 18:30:29 +0400

elliptics (2.26.10.1) unstable; urgency=low

  * trans: remove transaction from timer tree in network thread to allow IO thread to run long callbacks and this would not affect 'real' timing for transaction in question
  * set blackhole-dev' version to `0.2.4-1`
  * trans: update transaction's timestamp just after it has been received right in the network thread. This allows to account for long unavailability of the IO thread, but yet do not complete transaction with timeout error
  * dc_recovery: fixed extra 'recovered_keys' stats update on timeout
  * trans: fixed race between timeout scanning thread and completion callback invocation, the latter does not remove transaction from the timer tree and transaction may be grabbed and freed by timeout checking thread
  * dc_recovery: updated recovery/recovery.qdoc
  * dc_recovery: added option --no-server-send
  * build: Removed `EBLOB_LOG_SPAM`
  * dc_recovery: processing of uncommitted keys in server-send recovery
  * dc_recovery: retries of timeouted remove & server-send operations
  * dc_recovery: explicitly remove corrupted keys
  * dc_recovery: optimization: use server-send for small/medium keys

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Jan 2016 02:05:00 +0400

elliptics (2.26.9.4) unstable; urgency=low

  * session: added new server_send() method which works with vector of elliptics::key. This is the most generic method, others use it internally.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 10 Jan 2016 01:57:36 +0400

elliptics (2.26.9.3) unstable; urgency=low

  * package: depend on eblob 0.23.11+, which contains new iterator flag to verify checksum
  * session: extended error message when dnet_mix_states() fails, include ioflags, key and number of groups
  * recovery: Iterator class refactoring
  * recovery: added description of ServerSendRecovery class & its methods
  * merge recovery: optimization: use copy-iterator & server-send for small/medium keys
  * tests: recovery: check that merge recovery removes moved keys from the source backend
  * tests: added test which writes data into cache with small lifetime/sync timeout, previously cache overwrote user's timestamp with current time, this test checks that timestamp is still valid
  * local_session: do not overwrite valid user's timestamp with current time
  * binding: python: added server_send & start_copy_iterator session methods
  * server_send: print queue size when sending write request
  * server_send: set larger write timeout if node's wait timeout is less than 60 seconds
  * iterate_move: example application should use zero iterator flags to prevent confusion (when no-meta flag is set, all timestamps are zeroed)
  * server_send: implemented dynamic size of the queue of pending writes
  * iterate_move: added wait timeout option
  * server_send: broadcast write error to all blocked thread
  * tests: cmake's add_custom_target() is unreliable with setting envvars
  * tests: instruction on how to add new c++ test and additional cleanup
  * iterate: set EBLOB_ITERATE_FLAGS_VERIFY_CHECKSUM for start_copy_iterator() (requires 0.23.11+ eblob)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Dec 2015 17:40:10 +0400

elliptics (2.26.9.2) unstable; urgency=low

  * fixed crash caused by using freed memory
  * tests: server-send tests operate with 2 sessions
  * tests: server_send tests now check response status
  * server_send: set response status to reflect possible write/remove errors
  * ioclient: use dnet_print_time() to print modification time
  * server_send: filters and checkers should only work for aggregated result
  * basic_handler: added comment desribing set_total() method
  * trans: added error debug into common transaction allocation path when we've failed to find a state
  * ioclient: print group id when lookup succeeds
  * ioclient: fixed lookup info dump, allow to use raw ID specified via -I option

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 25 Nov 2015 21:28:37 +0400

elliptics (2.26.9.1) unstable; urgency=low

  * tests: set iterator flags to zero in read-one-range test
  * tests: added simple mix-states test which tests that reads and writes succeed, it doesn't check whether groups are actually mixed or not, this is done in weights test, where global node's mix states flags is tested
  * iterator: automatically set key-range flag if there is at least one range in the request
  * recovery: fixed hanging up when there is no key which should be recovered
  * config: added new options into example config
  * ioflags: added mix-states flag, which forces groups to be mixed according to state weights

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 13 Nov 2015 03:33:24 +0400

elliptics (2.26.9.0) unstable; urgency=low

  * io: added timestamp compare-and-swap flag, it allows to write data only when on-disk timestamp is less than to be written data timestamp, or when there is no data on disk.
  * backends: remove filesystem and module backends
  * srw: added ability to reply via response stream
  * package: put iterator examples into client package

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 24 Oct 2015 03:20:50 +0400

elliptics (2.26.8.0) unstable; urgency=low

  * cleanup: stop all node thread pools, then destroy monitor, then cleanup node thread pools
  * net: correctly set socket option to the proper socket
  * Indent fixes
  * session: implemented server-send method, which sends given keys from one server node to multiple remote groups
  * iterator: implemented server-send iterator, which sends all iterated keys to multiple remote groups
  * package: depend on eblob 0.23.5+, where chunk_dir option has been added
  * trans: fixed possible NULL pointer dereference
  * config: read_only option for backend
  * route: fixed ids update possible unintialized pointer free
  * small fix: use variable after checking that it isn't null
  * atomic: sub/add should return new value like inc/dec do
  * atomic: all atomics are actually long, not int
  * Updated debug logs, fixed minor bug with server socket prio setting. Fixed BE/LE issues when sending ID container
  * backend: fixed ponential NULL pointer dereference
  * tests: added small delay and big description for simultaneously started servers
  * route: fixed JOIN command with zero enabled backends
  * id: refactor and fix backend id container handling
  * state: extended a bit state reset debug
  * trans: fixed dnet_trans_iterate_move_transaction(), it must delete transaction from any list where it might live via trans_list_entry
  * route: fixed route list validation
  * packet: added comments about new commands and relation to dnet_cmd_needs_backend()
  * config: 'datasort_dir' option in backend section
  * session: read_data() comment update
  * Added more connection debug
  * iterator: added example iterator which runs over specified group and copies/moves data to requierd destination point
  * dnet: if there was any error - send ACK to notify client with error code and destroy transaction. Previously transaction would stuck and timeout if there is checksum error.
  * trans: if IO transaction can not be allocated, do not call completion twice
  * crypto: fixed invalid processing of data block larger than buffer in sha512_file()/sha512_file_ctx()
  * timeout: accurately check timeouted transactions using microseconds

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Oct 2015 16:03:00 +0400

elliptics (2.26.7.0) unstable; urgency=low

  * state: split backend weight into cache/disk pair and update them separately according to IO flags
  * eblob: fixed write commit log - have to write correct commit size
  * io: new blocking request queue instead of dnet_oplock()
  * tests: added test for checking that dnet_opunlock() unlocks key
  * tests: added dnet_locks_test: testing of oplocks in backend request queue
  * measure points: io.cmd.{}.lock_time erased; pool.{}.{}.search_trans_time added

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Aug 2015 18:38:04 +0400

elliptics (2.26.6.2) unstable; urgency=low

  * recovery: zero-sized keys are actually valid
  * eblob: write ext header when committing record (if it hasn't been written already for this IO request)
  * eblob: when doing prepare, perform plain write with ext header right after prepare
  * eblob: fixed integer overflow for uncommitted records during iteration
  * iterator: added --no-meta option to example cpp iterator code

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 27 Jul 2015 17:09:59 +0400

elliptics (2.26.6.1) unstable; urgency=low

  * recovery: monitor: fixed metrics: 'local_read_bytes', 'remote_written_bytes' etc
  * recovery: recover keys by window not by batch - closes
  * 	Previous logic - recovery gets batch of keys, recovers them in parallel,
  * 	wait until all recovers are finished and goes to next batch of keys
  * 	Current logic - recovery starts to recover batch of keys in parallel,
  * 	as soon as recovering of any key is finished, succeessfuly or not,
  * 	it starts to recover next key
  * recovery: removed 'filtered_keys' from logs and stats - it is always equal to iterated_keys
  * recovery: monitor: fixed set_counter for 0
  * recovery: removed unused code and fixed comments
  * test: cleanup logger after each recovery - fixed mixing logs from different recoveries
  * recovery: use '-L' option for all recovery logs
  * recovery: decreased level of stderr logs to WARNING
  * recovery: added '-T/--trace-id' option to dnet_recovery - allows to mark servers' logs connected with recovery
  * python: added `trace_bit` to elliptics.Session
  * build: fixed build on rhel
  * oplocks: use dnet_id instead of dnet_raw_id for taking into account group_id

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 15 Jul 2015 17:22:37 +0400

elliptics (2.26.6.0) unstable; urgency=low

  * iterator: fixed segfault on start_iterator without specified groups
  * eblob: updated eblob version
  * recovery: added using record_flags from read, lookup and iterator results for correct recovering of keys checksummed by chunks
  * eblob: added support of new eblob checksums

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 09 Jul 2015 02:00:46 +0400

elliptics (2.26.5.5) unstable; urgency=low

  * iterator: force reading header of uncommitted records

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 24 Jun 2015 19:08:55 +0400

elliptics (2.26.5.4) unstable; urgency=low

  * backend: added parsing backend_id by eblob_backend
  * compilation warning fix on precise (undefined UINT64_MAX)

 -- Kirill Smorodinnikov <shaitkir@gmail.com>  Mon, 15 Jun 2015 13:30:33 +0400

elliptics (2.26.5.3) unstable; urgency=low

  * logs: changed level of 'Failed to get VFS statistics' to NOTICE because it spams log and isn't caused by critical error.
  * network: sockets are lost from node's reconnect list after dropped connection to net state (after stall_count timeout)
  * tests: added description of backend weights test
  * recovery: allowed to use string value for '-L/--log-level'
  * recovery: moved gathering of route list into get_routes() at main process - made temporary node/session be freed after the route list is received.
  * tests: new backend weights test
  * more comments
  * logs: changed format of backend_id
  * renamed dnet_idc_insert -> dnet_idc_insert_nolock
  * fixed incorrect releasing of resources
  * logs, optimization: use dnet_log instead of dnet_log_error after error on pthread_* & some malloc+memset -> calloc
  * network: calculate & use connection weight by backend
  * backends: used const pointers for key/value arguments of dnet_config_entry callback - remove useless copying of value.
  * backend: eblob: made `eblob_backend_cleanup` to call `eblob_cleanup` only if eblob was initialized
  * monitor: fixed memory leaks of `dnet_config_backend` internals - added calling `cleanup()`.
  * fix: moved checking c->eblob into `dnet_blob_config_cleanup` - `eblob_backend_cleanup` should not be called if the backend wasn't proper initialized.
  * docs: added description to dnet_blob_config_cleanup().
  * updated missed module_backend functions.
  * eblob: when using prepare+plain_write+commit flags, commit number of written bytes, not number of allocated bytes on disk
  * session: added prepare/write/commit tuple description
  * tests: added simultaneous prepare/write/commit test

 -- Kirill Smorodinnikov <shaitkir@gmail.com>  Thu, 04 Jun 2015 15:50:46 +0400

elliptics (2.26.5.2) unstable; urgency=low

  * package: depend on 0.22.22+ eblob which brings defrag stop command
  * network: fixed bug with when total_count < failed_count in dnet_socket_connect_new_sockets()
  * dnet_client, ioclient: added stop_defrag command

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 06 May 2015 00:46:45 +0400

elliptics (2.26.5.1) unstable; urgency=low

  * network: fixed bug with negative route_list_count

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 28 Apr 2015 20:15:12 +0400

elliptics (2.26.5.0) unstable; urgency=low

  * network: don't use dnet_node_state_num() to estimate number of ready events in epol
  * pytests: added tests that checks new flag elliptics.record_flags.uncommitted:
  *      * serial of write_prepare, write_plain and write_commit with checking data accessibility
  *      * new tests of merge and dc recovery with mixing uncommitted keys into recovering keys.
  * core: added common for all backends flag DNET_RECORD_FLAGS_UNCOMMITTED which is set for record is uncommitted and can't be read
  * iterator: made iterator collects uncommitted records
  * recovery: added handling uncommitted records, added options prepare-timeout which specifies timeout for uncommitted records after which such records should be deleted
  * recovery: fixed hanging on pool.close() - there is a bug in multiprocessing
  * package: depend on 0.22.21+ eblob, it contains defrag adn prepare/commit changes needed by elliptics
  * ioclient: added more description of defrag modes
  * network: refactored dnet_addr_socket & dnet_connect_state related resource handling logic
  * logs: added error logs at places where iterator can fail
  * ioclient: added description of 'compact' defragmentation mode
  * core: used timedwait for waiting condition variable - fixed hanging on exit
  * iterator: added checking that the backend supports iterator before run iterator
  * python: allow to use all basestrings for elliptics.Id initialization not only str
  * network: dnet_addr_socket is class now, thus handling its resources. sockets container is std::map instead of c-style intrusive list (of sockets)
  * session, backend: added new defragmentation level & command 'compact' - datasort heavy-fragmented blobs only
  * network: use stall_count from node instead of hard-coded constant
  * network: fixed possible deadlock and double resource release in dnet_check_all_states()
  * network: send ping command to remote node if transactions stall count reaches its limit instead of resetting net_state
  * recovery: fixed typo and merged disabling checksums for all but the first chunk
  * recovery: use close to elliptics' log format in recovery logs
  * recovery: fixed  statistics calculation
  * build: fixed build on rhel 6 with boost v1.41.0-25

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 27 Apr 2015 19:01:10 +0400

elliptics (2.26.4.4) unstable; urgency=low

  * config: fixed bug when invalid remote (e.g. whose net address couldn't be resolved) from config leads to dnet_ioserv termination during initialization step
  * pool: fixed crash on working with invalid evs[i].data.ptr (dnet_net_state) after releasing of this net_state on EPOLLERR at previous iteration over evs[i]

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Mar 2015 20:08:47 +0400

elliptics (2.26.4.3) unstable; urgency=low

  * package: depend on 0.22.20+ eblob because of API changes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Mar 2015 19:31:37 +0400

elliptics (2.26.4.2) unstable; urgency=low

  * network io handler iterates only single event, where epoll_wait() may return more than one
  * added top events settings to monitoring/top provider
  * net stats in procfs provider: rx/tx bytes, packets, error count for net interfaces
  * removed unused sha384 functions and unification with eblob cryptolib
  * mmap elimination - mmap() replaced with pread(). Corrupted filesystem may return -EIO for some reads, while
  * 	trying to access that data via mmap ends up with SIGBUS signal, which kills whole eblob user.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Mar 2015 00:22:10 +0400

elliptics (2.26.4.1) unstable; urgency=low

  * json: fixed crash on generating statistics for disabled at startup backends
  * Used local node address for state in local_session: fixed invalid address at logs.
  * net: connection between servers with different number of addresses is not allowed.
  * 	If connected node has different number of addresses fail its socket processing.
  * core: use rbtree to store groups list
  * recovery: fixed error logging format in dc recovery
  * tests: refactored tests for event statistics
  * Added TOP statistics implementation - it returns set of keys which generate the most amount of traffic

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 23 Mar 2015 16:58:19 +0400

elliptics (2.26.3.37) unstable; urgency=low

  * Get rid of autogenerated typedefs file
  * recovery: dc: do not check checksum while reading on all but the first chunk
  * statistics: moved adding `group` to `backend::config` or `backend::config_template` into fill methods
  * statistics: provided `to_json` methods for eblob and filesystem config templates

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 12 Mar 2015 16:30:06 +0400

elliptics (2.26.3.36) unstable; urgency=low

  * package: depend on 0.22.15+ eblob
  * logs: fixed printing trace_id at logs while receiving/sending packets
  * iterator: made iterators with `no-meta` flag to return zero timestamp.
  * 	Now if iterator faces a record with corrupted exteded header it will return a key with empty extended header.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jan 2015 16:07:29 +0400

elliptics (2.26.3.35) unstable; urgency=low

  * logger: let file logger to watch to its sink file and allow file to be moved/rotated
  * Indent cleanup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 17 Jan 2015 00:31:41 +0400

elliptics (2.26.3.34) unstable; urgency=low

  * recovery: fixed recovering keys which have several alive copies at one backend
  * tests: updated description of test_session_iterator cases
  * python: limited types of object that can be used for elliptics.Id initialization
  * stat: do not fill in backend::config object for non-enabled backends, it contains strings only, but it must be parsed instead.
  * 	Use backend::config_template object for those backends.
  * recovery: used total_size instead of size for determining record size.
  * recovery: escaped dumping keys that allready consistent in all groups
  * recovery: added recovery_speed to merge stats
  * iteration: removed double checking of ranges - keys is already filtered in eblob
  * iteration: added new iteration flag: DNET_IFLAGS_NO_META which turns off reading extended header from blob and speedups,
  * 	but all keys that will be returned by such iteration will have empty metadata (timestamp and user_flags).
  * recovery: added '-M' option to dnet_recovery which speedups iteration phases of recovery but sacrifices checking metadata.
  * 	Recovery with this option will not check metadata, will not replace old records by new ones and
  * 	will only copy some available replica of keys to groups which do not have these keys.
  * pytests: added case to test_session_iterator that check iterating with no_meta flag
  * recovery: added 'recovery_speed' and 'iteration_speed' to statistics. Both values are mesuared in records per second.
  * python: made elliptics.Id to be initialized by any iterable object and group
  * recovery: replaced cPickle by msgpack for packing intermediate results
  * recovery: added 'total_keys' statistics that shows how much keys should be recovered/processed
  * python: fixed gil_guard
  * bindings: added start_time and end_time methods for async_result: both for C++ and Python bindings.
  * 	They return timestamps when async result was created and finished.
  * 	Fixed calculation tnsec of elapsed_time.
  * config: use uint32_t for parsing group from config - disallow setting negative group.
  * Pytests: added iterator tests.
  * Pytests: moved  fixture to global conftests. Disabled srw for test cluster in test_specific_cases. Cleaned up pytests code.
  * Made dumping key enabled by default, to disable it introduced new option -> -u
  * don't add option for key dumping in dc_recovery
  * Added option for dumping into text file all iterated keys
  * Fixed code indent
  * config: do not reparse config at each backend init - only if config was modified.
  * 	Removed useless copying of an array at config methods.
  * Disable only non-disabled backends at cleanup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 23 Dec 2014 10:13:11 +0400

elliptics (2.26.3.33) unstable; urgency=low

  * lookup: extended lookup address to return dnet_addr, not address string
  * pytests: fixed broken index tests - use common cluster for all test and isolated cluster for test_special_cases

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 10 Nov 2014 06:00:01 +0400

elliptics (2.26.3.32) unstable; urgency=low

  * tests: created config struct for create_nodes method and moved all argument to it
  * pytests: added test case for checking correct handling situation when 2 backends from different nodes has equal group and ids
  * pytests: made server node isolated - now server nodes do not know about each other
  * core: reset state if dnet_idc_update_backend has been failed.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 24 Oct 2014 23:00:00 +0400

elliptics (2.26.3.31) unstable; urgency=low

  * session: get rid of handmade address-to-string conversion, use dnet_addr_string() and friends helpers
  * addr: use getnameinfo() to properly determine family and automatically dereference sockaddr
  * addr: new thread-safe helpers to print address strings
  * Fixed remove_on_fail implementation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 23 Oct 2014 18:07:31 +0400

elliptics (2.26.3.30) unstable; urgency=low

  * recovery: removed odd increasing of iterations
  * recovery: fixed memory leak at merge recovery
  * python: removed wrapping address method at result entries that inherited from CallbackResultEntry
  * recovery: Moved code from dnet_recovery to recovery.py for using/testing it from pytests.
  *     Added 'portable' method to Ctx that returns lightweight copy of the context that can be used by multiprocessing.
  *     Removed monitor from context, left only stats - proxy object for sending updates to monitor from different processes/threads.
  *     Removed using global context, use portable context insead of.
  *     Moved process pool initialization and destruction into common recovery.py - removed duplicating code.
  * Recovery: Use cached route-list for speedup recovering
  * recovery: implemented one-node recovery for merge from dump
  * recovery: cleanups global reference to context
  * recovery: correctly close and join process pool
  * recovery: correctly stops monitor threads
  * test: decreased number of backends and nodes at pytests - decreased number of threads and processes used from tests
  * cmake: added blackhole headers lookup
  * recovery: used threading.Event for waiting complete
  * recovery: decreased log level of log that looking up key from dump fail failed
  * tests: reduce number of io/net threads
  * eblob: allow small leters in size modificators M,m are for megabyte and so on

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 21 Oct 2014 20:09:10 +0400

elliptics (2.26.3.29) unstable; urgency=low

  * package: depend on 0.22.9+ eblob where init errno code was introduced
  * route: do not request route list if node flags includes DNET_CFG_NO_ROUTE_LIST
  * recover: do not print error on lookup fail while recovering keys from dump - fail is an ok situation
  * recover: skips keys that are missed on all nodes
  * python: use dict if OrderedDict is not available
  * recover: fixed  and  recovery from dump. Added test case for recovering keys from dump.
  * python: added 'backend_id', 'trace_id' and 'trans' to callback_result_entry
  * python: removed duplicated calls - use bp::bases for inheritance between different result_entry and base callback_result_entry
  * backend: eblob_init sets errno on fail - use it for returning correct error code
  * backends: do not process commands aimed to uninitialized backend
  * python: added set_backend_ids method to elliptics.Session.
  * dnet_balancer: added option '-u/--update' that turns no remote update ids on backends after balancing.
  * dnet_balancer: added outputing final dht spread between nodes/backends.
  * recovery: added  output format for statistics.
  * recovery: skipping on iteration key with zero size of data.
  * Python: fixed missing _node at cloned session.
  * api: added resetting namespace by setting empty namespace.
  * logs: added log that net thread has been finished.
  * ioclient: backend status messages whitespace cleanup
  * addr: added dnet_create_addr_str() helper which parses string and fills dnet_addr structure
  * package: depend on 0.10.2+ handystats
  * backend: added possibility to delay execution of every backend command by X ms
  * init: fixed IO pool initialization

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 14 Oct 2014 21:16:06 +0400

elliptics (2.26.3.28) unstable; urgency=low

  * python: fixed TypeError on some python version
  * blackhole: enabled blackhole log rotation. Blackhole reopens log file if the original file has been moved or removed.
  * spec: handystats dependency updated to 0.10
  * auth: check client version at first and send self version only to client with right version.
  * dc_recovery: Fix variable name: it was undefined name
  * python: Fix some PEP8 warnings. Bad identation is fixed.
  * spec: fixed bogus dates
  * monitor: update to handystats 1.10
  * example: monitoring-stats.txt lists measured values
  * example: added sample config file for handystats
  * monitor: io input/output/commands stats fixed and improved
  * monitor: added support for formatted metrics names
  * monitor: complete replacement of react
  * monitor: using handystats library to gather runtime statistics
  * srw: removed dumping @info result to the log
  * rapidjson: correctly handle NaN values, small double values
  * srw: added log-output: true into application's profile top level to dump crashlog into log
  * test: monitor: open json dump file for writing
  * test: write_cas: do not use lambda, use plain function instead (checking RHEL6 issue)
  * run_servers: added 2 seconds sleep to wait for server/app initialization
  * file: do not chroot to root dir, since with multuple backends there are multuple roots in the same process context
  * state: dnet_state_create() reference counter fix/change
  * backend: moved object size calc (getting into account total size and io->size/io->offset) into common header from eblob.
  * find: set DNET_FLAGS_DIRECT_BACKEND flag which will force client code to set backend ID
  * session: when using send-to-all-backends set backend id via dnet_session_set_direct_backend() call.
  * fixed check for gcc version: support for noexcept on class constructor available only since gcc 4.6
  * monitor: use one lock_guard for both: checking backend state and dumping backend json.
  * monitor: Monitor uses almost all others, so it should be stopped at first.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 08 Oct 2014 14:23:26 +0400

elliptics (2.26.3.27) unstable; urgency=low

  * recovery: added another one (last) fix for compatibility with python2.6 which doesn't support multiple open with one with
  * recovery: fixed multiple open at one with (python2.6)
  * Pytests: if procfs statistics: vm, io or stat; contain nonzero error - do not asserts internal statistics
  * monitor: added 'error' and 'string_error' to procfs statistics: vm, io and proc
  * file: fixed file_info timestamp reading
  * trans: when destructing transaction, write not only state, but also backend
  * monitor: clear dnet_vm_stat at dnet_get_vm_stat
  * Recovery: fixed circular references in dc recovery. Fixed static analysis and memory profiler warnings.
  * Pytests: fixed vfs statistics test - zero value for some metrics is valid.
  * file: fixed metadata blob initialization
  * lookup: there are 2 lookup stages: cache and disk, do not send ack if we succeeded searching for the key
  * forward: cleanup forward path, put transaction allocation into forward function
  * file: fixed lookup command and lookup timestamp for missed metadata

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Sep 2014 19:04:27 +0400

elliptics (2.26.3.26) unstable; urgency=low

  * net: put state in dnet_connect_route_list_complete
  * connect: add_remote() must always return error when failed to connect to any remote node
  * fs: set default directory-bit-numnber to 16, otherwise backend doesn't work if appropriate config option is not specified
  * balancer: print correct message if remote hasn't been specified
  * pytest: more comments
  * Pytest: set tests timeout to 300 sec
  * Pytests: added test for recovering corrupted data
  * Recovery: removed duplicates from list of groups with outdated data. Fixed crash after failed iteration.
  * Recovery: changed default logging level for dnet_recovery
  * Backends: added new backend state: DNET_BACKEND_UNITIALIZED for backends that have not been specified in config file.
  * 	Do not include status of unitialized backends to monitor statistics and backends status of unitialized backends to monitor statistics and backends status response.
  * Core: do not recalculate state weight after commands without data

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 28 Sep 2014 02:52:06 +0400

elliptics (2.26.3.25) unstable; urgency=low

  * net: setup state epoll_fd before sending AUTH
  * Python: added comments to route.py
  * Python: speeded up elliptics.RouteList initialization

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Sep 2014 22:28:52 +0400

elliptics (2.26.3.24) unstable; urgency=low

  * route: fixed deadlock in routes.cpp
  * Block dependency from next major version of elliptics
  * stats: provide backend directly from cmd processing, do not try to find it using cmd->backend_id
  * session: roughly exit on 'impossible' condition
  * stat: do not dereference incorrect (negative or too large) backend_id
  * route: Reset state if JOIN fails by any reason	b0a8c47
  * library: Use copy addresses at state_move_to_dht
  * Build-Deps: blackhole-dev (>= 0.2.1-1)
  * find: Add backend_id to dnet_find output

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Sep 2014 02:01:13 +0400

elliptics (2.26.3.23) unstable; urgency=low

  * stats: implemented per-backend command counters
  * log: returned back extended io command log
  * stats: only print commands which have non-zero counters
  * ioclient: added options to change backend status (enable, disable, ro, writable)
  * cache: slru destruction debug
  * stats: get rid of histograms

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 16 Sep 2014 18:52:08 +0400

elliptics (2.26.3.22) unstable; urgency=low

  * net: Surround state->node_entry changes by state_lock

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Sep 2014 21:20:24 +0400

elliptics (2.26.3.21) unstable; urgency=low

  * net: Use list_splice_init correctly
  * monitor: compress returned data via both http and elliptics protocols

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Sep 2014 20:13:18 +0400

elliptics (2.26.3.20) unstable; urgency=low

  * monitor: compress every possible json reply from server to client including error jsons
  * monitor: static function in headers must be inlined
  * net: Fixed race condition of route-list counter
  * net: Fixed parsing of route list for dual stack
  * server: Set not-null address for accepting state
  * net: Fixed debug output for route lists
  * library: Added session::request_single_cmd
  * trans: Fixed trans_id at transactions' destruction

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Sep 2014 00:28:16 +0400

elliptics (2.26.3.19) unstable; urgency=low

  * Pytest: added checking requesting all categories.
  * monitor: add 'group' to 'backend->config' only if it was requested

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Sep 2014 21:54:48 +0400

elliptics (2.26.3.18) unstable; urgency=low

  * reconnect: always add address into reconnection queue until it is EEXIST, ENOMEM or EBADF error

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Sep 2014 20:16:57 +0400

elliptics (2.26.3.17) unstable; urgency=low

  * Python: fixed make_writable

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Sep 2014 19:55:17 +0400

elliptics (2.26.3.16) unstable; urgency=low

  * monitor: restored 'group' at 'backend->config'
  * python: added make_readonly and make_writable to elliptics.Session
  * monitor: removed commands history

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Sep 2014 19:51:36 +0400

elliptics (2.26.3.15) unstable; urgency=low

  * elliptics: Fixed handler::total at several places
  * monitor: forced deflate of the transmitted json
  * recovery: now if dc couldn't read the newer version of the key - it skips it and use next one by timestamp and so on
  * Monitor: moved config of disabled backend to 'backend->config'
  * Pytest: marked each test case by unique trace_id
  * Pytests: added monitor statistics to log
  * monitor: now monitor listen the same net family as the node does
  * merge recovery: added user-friendly log when group has only one node with one backend
  * tools: added '-n/--check_nodes' option to dnet_balancer for printing only nodes spread without route-list
  * Python: completely removed old interface elliptics.Session.get_routes and used new elliptics.Session.routes wherever needed
  * package: depend on blackhole 0.2.0-2 and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Aug 2014 19:40:34 +0400

elliptics (2.26.3.14) unstable; urgency=low

  * server: Fixed io queue limits
  * client: Throw -EPROTO if we connected to wrong addr
  * client: Fixed checkers at merge_indexes
  * client: Recover files on read also for -EILSEQ
  * client: Don't lose trace_id at timeout

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Aug 2014 22:08:29 +0400

elliptics (2.26.3.13) unstable; urgency=low

  * session: implemented bulk_remove() method
  * tests: since timeouts are now long, fix its overflow test
  * config: fixed misleading config error exception message
  * timeouts: all timeouts are long
  * config: only try to add new nodes if remotes() vector contains some addresses
  * trans: extended timeout transaction log
  * client: Explicitly link with boost-system
  * package: depend on blackhole 0.2.0-0rc10

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Aug 2014 21:30:46 +0400

elliptics (2.26.3.12) unstable; urgency=low

  * Logs: removed '\n' from the end of logs - blackhole adds '\n'
  * example: Added backend_id to example config
  * balancer: changed usage removed spread by percentages
  * server: Don't check for forward if direct request
  * backends: Write duration of backend's init
  * backends: set correct error if missed backend_id
  * Monitor: wrapped json generation by try/catch
  * backends: Make unique log for every backend
  * node: EEXIST for state is 'good' error

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 22 Aug 2014 15:31:54 +0400

elliptics (2.26.3.11) unstable; urgency=low

  * Logger: Write logs in local time

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 21 Aug 2014 20:15:23 +0400

elliptics (2.26.3.10) unstable; urgency=low

  * Python: removed using of dropped elliptics.log_level.data
  * Log: fixed typo and fixed spaces
  * backends: Added mandatory field backend_id

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 21 Aug 2014 16:59:02 +0400

elliptics (2.26.3.9) unstable; urgency=low

  * dnet_client: Fixed default log level
  * server: Add backend_id to every log at io pool

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Wed, 20 Aug 2014 20:12:08 +0400

elliptics (2.26.3.8) unstable; urgency=low

  * logger: Log io/c/indexes/cfg flags with names
  * node: Print cfg flags on start

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Wed, 20 Aug 2014 18:43:44 +0400

elliptics (2.26.3.7) unstable; urgency=low

  * client: Added ability to construct session from dnet_node
  * server: Make possible to send request yourself
  * cocaine: added read_latest to elliptics service
  * server: Added option.parallel option
  * dnet_client: Return non-zero code on fail
  * thread: Changed name pattern for threads

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Wed, 20 Aug 2014 17:42:07 +0400

elliptics (2.26.3.6) unstable; urgency=low

  * backend: Read config at backend's start
  * logger: Removed useless premature optimization

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Tue, 19 Aug 2014 21:16:56 +0400

elliptics (2.26.3.5) unstable; urgency=low

  * logger: do not even try to process logging if log level is small enough

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Aug 2014 01:40:44 +0400

elliptics (2.26.3.4) unstable; urgency=low

  * Get rid of foreign/blackhole include dir which can contain old/obscure version of the package

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Aug 2014 20:26:45 +0400

elliptics (2.26.3.3) unstable; urgency=low

  * Rebuild with the proper blackhole-dev package

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Aug 2014 17:49:24 +0400

elliptics (2.26.3.2) unstable; urgency=low

  * state: minor cleanups, optimizations and fixes
  * stack: print minimum stack size (1M) if current stack size is less than that

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 17 Aug 2014 03:48:06 +0400

elliptics (2.26.3.1) unstable; urgency=low

  * monitor: stat fixes
  * backends: added ability to make backends readonly
  * monitor: added config stats

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Aug 2014 08:10:56 +0400

elliptics (2.26.3.0) unstable; urgency=low

  * cache: Added ability to configure backend's cache
  * client: Added send_to_each_node
  * client: Drop direct_backend flag at set_direct_id
  * client: monitor_stat should accept address, not id
  * config: Make possible to set io thread num per backend
  * config: options.*_thread_num is required field
  * example: Removed out-to-dated ioserv.conf
  * logger: Don't print destruction packets
  * Monitor: Added 'procfs' stats that includes 'vm', 'io' and 'stat'
  * monitor&statistics: moved stat_log and stat_log_count statistics to monitoring statistics
  * Python: fixed lookup_address and doc strings
  * Python: removed session.get_routes()
  * Python: removed session.update_status by elliptics.Id
  * Python: replaced elliptics.Id by elliptics.Address at session.monitor_stat

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 14 Aug 2014 14:45:46 +0400

elliptics (2.26.2.0) unstable; urgency=low

  * API: Changed signature of "complete" methods
  * backends: Make possible to start several backends per time
  * cache: Don't send 2 packets as lookup reply
  * callback: Write to log about each processed packet
  * client: Added optimization for key's transformation
  * client: Added parallel_lookup
  * client: Added quorum_lookup
  * client: Moved read/write_file logic to c++ binding
  * client: Refactored implemenation of handling replies from server
  * client: Removed unused client's methods
  * client: Returned error from add_state with more sense
  * cpp: data_buffer should consider size of counter
  * dnet_balancer: fixed error exit when one of real route matches with 00..0 or ff..f
  * eblob: Fixed log levels between eblob & elliptics
  * Monitor: reorganized monitor statistics from different backends
  * protocol: Changed DNET_TRANS_REPLY to DNET_FLAGS_REPLY
  * Pytests: added prepare/plain/commit test when it rewrites key from closed blob by bigger data
  * Recovery: wrapped os.rename by try/except for catching os.rename exception
  * run_servers: added generating monitor section in ioserv config
  * run_servers: Write pid of dnet_ioserv's to log
  * tests: Added 3 more tests about lookup results
  * tests: Generate random trace_id for each test case
  * weights: increase temporal selection-only (not state) weights (multiply by 10 on each step) until they sum up into large enough number for random selection

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Mon, 11 Aug 2014 15:04:56 +0400

elliptics (2.26.1.1) unstable; urgency=low

  * logger: Use blackhole's level's formatter
  * server: Connect to remotes asynchronously
  * net: Fixed race at converting node to server one

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Mon, 04 Aug 2014 22:23:11 +0400

elliptics (2.26.1.0) unstable; urgency=low

  * Python: implemented elliptics.Node.add_remotes which has replaced old elliptics.Node.add_remote
  * Pytests: added waiting for appearance enabled backends in route list at test_recovery
  * Tools: fixed dnet_recovery
  * cocaine: Connect to all remotes simultaneously
  * indexes: Fixed shard id & count values in secondary indexes
  * backends: Added more logs about init/cleanup
  * net: Fixed connection to server with big ids files

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Mon, 04 Aug 2014 19:43:19 +0400

elliptics (2.26.0.4) unstable; urgency=low

  * library: Fixed race of creating dht states
  * 

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Sun, 03 Aug 2014 19:43:51 +0400

elliptics (2.26.0.3) unstable; urgency=low

  * route: Add states after join_request to dht_list
  * library: Added really asynchonous add_remote_state
  * library: Reimplemented reconnection thread
  * * Now it makes reconnection and route list requests simultaneously, which gradually decreasis time of this operations with low-latency network
  * net: Removed autodiscovery support
  * 

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Sun, 03 Aug 2014 03:50:01 +0400

elliptics (2.26.0.2) unstable; urgency=low

  * Fixed version

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 01 Aug 2014 20:01:51 +0400

elliptics (0.6.0.2) unstable; urgency=low

  * client: Added is_final field to result_entry
  * client: Added new filters for entry::is_final
  * client: Fixed bulk operations
  * client: Fixed time formatting in file_logger
  * dnet_client: Long live, dnet_client
  * indexes: Fixed set_indexes in multibackend systems
  * linking: Fixed linking errors at Fedora 20 and Ubuntu Lucid
  * logger: Updated for blackhole-0.2.0-0rc2
  * Monitor: made monitor section in config for dnet_ioserv and added new history_length and call_tree_timeout to the section.
  * pytests: Fixed test for existen filters
  * python: Fixed signature of Logger.log
  * server: Do not kill own state because of timeout

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 01 Aug 2014 19:06:59 +0400

elliptics (2.26.0.1) unstable; urgency=low

  * config: Moved to usage of dynamic_t
  * logger: Fixed segfault
  * srw: Really, don't send exec to every backend
  * protocol: Moved trace_id to dnet_cmd from dnet_id
  * * Added trace_bit as command flag instead of special trace_id's bit

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Wed, 30 Jul 2014 15:29:48 +0400

elliptics (2.26.0.0) unstable; urgency=low

  * backends: Ability not to enable backends at start
  * backends: Added ability to change backend's ids
  * backends: Added API for enable/disable/status backends
  * backends: Added defrag API, added fields to status
  * backends: Added DNET_CMD_CONTROL_BACKEND command to enable and disable backends
  * backends: Added field to know current defrag state, added fields to know about
  * backends: Generate ids from /dev/urandom
  * backends: Only return defrag_state if possible
  * backends: Set direct flag for control and status
  * backends: Store current backends' states
  * client: Added node::from_raw API
  * client: Changed ger_routes signature
  * client: Introduced address structure
  * Core: made update_status used address for addressing to node.
  * Eblob: removed iterate_thread_num specification at eblob_backend.
  * elliptics: Added multi-backend support in route lists
  * ioclient: Moved to new defrag API
  * logger: Moved to Blackhole as logging system
  * logger: changed trace_id output to hex.
  * monitor: added raw function for removing statistics provider by name. Removed duplicated code.
  * monitor: Link with elliptics_client
  * node: Fixed more conflicts
  * pool: Introduce thread-local queue
  * pool: Make io-thread init log more verbose
  * Pytest: Added tesing dnet_recovery with all modes.
  * Pytest: Added parameters for specifying number of nodes and number of backends that should be run in test cluster.
  * Python: Added new interface for supporting multibackends. Used elliptics.Address where it can be used and removed duplicating interfaces. Added new abilities to elliptics.RouteList for working with backend_id.
  * Python: Added support backend_id to route list.
  * Python: Fixed dnet_balancer and for working with new multibackends route list.
  * Python: Removed group_id from elliptics.
  * Recovery: made dnet_recovery works with new multibackends route list. Added ability to specifies backend_id (via '-i') when dnet_recovery runs for one node ('--one-node')
  * routelist: Added support for DNET_CMD_UPDATE_IDS
  * routelist: Don't send ack for route-list request
  * routelist: Send only addresses at route tables
  * run_servers: Added 'backends' option support
  * server: Removed node::id
  * server: Separated backend to external structure
  * statistics: Added ability to remove providers
  * tests: Added sleep in recovery test
  * tests: Added test for backend's control
  * tests: Apps should write logs to different files

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Tue, 29 Jul 2014 19:23:05 +0400

elliptics (2.25.6.4) unstable; urgency=low

  * reconnect: reconnect to addresses which were timed out during connection

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 31 Jul 2014 16:31:12 +0400

elliptics (2.25.6.3) unstable; urgency=low

  * recv: do not dereference data stored in state, since to that moment it can be overwritten by the next command from the same client(socket)
  * route: let regular route table update also get route table from nodes explicitly added via dnet_add_state() and helpers
  * state: print error if no state has been found for given ID
  * version: added check/read functions

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 31 Jul 2014 16:15:42 +0400

elliptics (2.25.6.2) unstable; urgency=low

  * weight: print full weight change, not only first 3 digits
  * Logs: changed trace_id output to hex

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Jul 2014 21:31:55 +0400

elliptics (2.25.6.1) unstable; urgency=low

  * state: when (re)creating state after recevied reverse lookup we must copy received address array into this new state
  * route: cleaned up debug messages
  * trans: cache transaction reply flags to make processing bulletproof against callback which can change cmd->flags

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Jul 2014 21:52:34 +0400

elliptics (2.25.6.0) unstable; urgency=low

  * package: depend on 0.22.0+ eblob which provides range iterators
  * iterate: output more useful info about iterated keys
  * iterate: added option to parse dnet_balance output file and select ranges which DO NOT belong to selected node and request those ranges from remote node
  * dnet_add_state: if we failed to add any remote addr because they already exist in the route table, return 0 to indicate success
  * iterator: switched to new iterator scheme where ranges and ctl structure are provided directly into backend. Eblob uses this data to skip ranges in indexes if they are sorted.Eblob: removed iterate_thread_num specification at eblob_backend.
  * cmake: install timer.hpp with other headers
  * tests: stop after the first test failure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Jul 2014 20:22:58 +0400

elliptics (2.25.5.1) unstable; urgency=low

  * Recovery: fixed merge index mismatch if some of merging shards have unfilled shard_id and shard_count
  * Pytests: turned on exit on first fail to make it easer to find the problem. Used separated log files for all node and client
  * IOClient: fixed checking dnet_add_state result

 -- Kirill Smorodinnikov <shaitkir@gmail.com>  Fri, 18 Jul 2014 15:40:41 +0400

elliptics (2.25.5.0) unstable; urgency=low

  * Let's use Travis-CI to check every commit
  * route: new batch request completion logic
  * Pytests: added group_id check in result entries
  * Added batch connect/listen mechanism
  * addr: switched C API to dnet_addr structure
  * There is no required() at boost::program_options on lucid

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 13 Jul 2014 05:08:45 +0400

elliptics (2.25.4.21) unstable; urgency=low

  * Python: fixed address group_id in result entries.
  * srw-test: fixed signed-unsigned warning
  * tests: cleaned up srw timeout test: removed misleading debug output when everything is ok, voided unused variable
  * config: removed comment about unused 'do-not-update-metadata' flag
  * srw: use full namespace name for ioremap::elliptics::lexical_cast() function
  * indexes: Handle failed parsed indexes metadata from msgpack …
  * index_perf: added index performance tool
  * utils: moved common functions to utils header
  * timer: added elapsed timer
  * srw-test: moved thread-watchdog class outside timeout test function for older compilers happiness

 -- Kirill Smorodinnikov <shaitkir@gmail.com>  Wed, 09 Jul 2014 19:28:40 +0400

elliptics (2.25.4.20) unstable; urgency=low

  * trans: ascending transaction number order instead of descending
  * trans: new timeout transaction completion logic

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Jun 2014 02:39:45 +0400

elliptics (2.25.4.19) unstable; urgency=low

  * Pytests: fixed test_session_indexes - wait set_indexes/remove_indexes results
  * submodule: removed react, started to use git:// instead of http://

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 24 Jun 2014 18:31:49 +0400

elliptics (2.25.4.18) unstable; urgency=low

  * Core: Added unmapping IPv4 from mapped IPv6 address
  * client: Added session::recovery_index method
  * client: Introduced merge_indexes method
  * tests: Docs for test_index_metadata added
  * index: More docs for get_index_metadata helper function
  * 

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 23 Jun 2014 18:09:46 +0400

elliptics (2.25.4.17) unstable; urgency=low

  * Pytests: added testing of index interface: set/update/remove
  * Recovery: Added dumping iterated keys to dump file(s) that could be used for resuming recovery after some issues
  * Recovery: Fixed splitting ranges in small pieces for merging them in different processes.
  *     Replaced pickle with CPickle
  *     fixed 'zero length field name in format' bug on Python2.6
  *     Added traceback print to exception log
  * Python: used one argument for id and context at exec_, made src_key last argument
  * Core: fixed hanging up iteration on cond_wait.
  *     There was race condition: after successful dnet_send_reply another thread removes the state and before original thread stucks on waiting condition variable.
  *     After that no one thread will wake up original thread via broadcasting conditional variable
  * Documentation: added docs how merge works with -f/--dump-file
  * Recovery: fixed stats group name in merge. Show all key at read/write/merge/remove failures. Fixed exit code in dc.
  * Recovery: Added merge recovering the list of keys from dump file
  * Monitor: clear m_cmd_info_current after swap
  * Recovery: Enabled -r reusable (so you can specify several remotes). -o should be followed by adress of node that should be processed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 Jun 2014 19:32:58 +0400

elliptics (2.25.4.16) unstable; urgency=low

  * spec: do not require boost libraries, they will be populated from devel package version
  * debian: do not install libelliptics_cocaine.so.*, it is being built statically now
  * Don't link with json
  * spec: added libtool-ltdl-devel dependency for cocaine
  * spec: added libev dependency for cocaine

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 Jun 2014 19:29:21 +0400

elliptics (2.25.4.15) unstable; urgency=low

  * srw: Added commentary about event's naming
  * library: made dnet_request_cmd() non-blocking
  * rpm: Enable build with Cocaine
  * srw: Removed app@ part from Cocaine event
  * tests: Check status code for every entry in bulk_write
  * tests: Don't use ports from ip_local_port_range

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Jun 2014 22:02:34 +0400

elliptics (2.25.4.14) unstable; urgency=low

  * build: depend on 0.21.40+ eblob to force double eblob size reservation
  * io: do not proceed IO command to backend if cache-only IO flag has been set
  * ioserv: exit with negative error status if ioserv could not start because of config error
  * config: updated blob flags doc
  * build: remove generated pyversions at clean
  * build: removed deprecated XB-Python*. Updated url at setup.py.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 May 2014 22:28:01 +0400

elliptics (2.25.4.13) unstable; urgency=low

  * state: new weight adjusting mechanism

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 May 2014 00:30:05 +0400

elliptics (2.25.4.12) unstable; urgency=low

  * rpm: fixed msgpack for python package name.
  * core: request route list from node after reconnect.
  * debian: fixed build on lucid: there is no dh_python here and we have to use python-central.
  * debian: dh-python instead of python-support
  * Core: fixed requesting route list always from the same node per group.
  * Recovery: Added msgpack-python to dependencies.
  * Recovery: disabled csum when reading pieces of object.
  * cocaine: Improved elliptics-storage configs
  *     You can set timeouts for read, write, remove and find
  *     You can set success-copies-num to any, quorum or all
  * trans: when filling local-io before read completion, we should check transaction allocation size
  * monitor: Data race during printing of react_aggregator fixed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 May 2014 18:45:21 +0400

elliptics (2.25.4.11) unstable; urgency=low

  * tests: Add random seed to dnet_run_servers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 01 May 2014 06:38:40 +0400

elliptics (2.25.4.10) unstable; urgency=low

  * build: depend on 0.21.37+ eblob
  * Recovery: updated recovery.qdoc: added merge/dc examples.
  * debian: react version 2.3.1 update
  * Python: turned on srw tests. Removed setting group_id in Session.transform
  * stat: react_stat_provider and react_aggregator refactored
  * state: change state weight according to io size. do not change weight if it was cache IO
  * log: increased format buffer size
  * config: example config bool values fixed
  * Tests: provide LD_LIBRARY_PATH into execve child
  * Cache: added setting n->need_exit before stopping cache: it is used by life_check thread. Tests: fixed moving group into backend section.
  * Recovery: added dc_recovery.py - build-in custom recovery function for dc. Added recovery.qdoc.
  * Recovery: replaced dc by sdc. Added ability to split big files while merge recovery (dc recovery will get it soon).
  * session: when creating new session setup wait-ts from the node
  * config: Fixed config example
  * config: Reimplemented configuration parser
  * route: lower final route reply message log level
  * tests: Pass envs directly to executable

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 30 Apr 2014 00:03:48 +0400

elliptics (2.25.4.9) unstable; urgency=low

  * tests: Configure run_servers by envvars
  * rpm: Add dependency on libblackhole

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 25 Apr 2014 20:24:14 +0400

elliptics (2.25.4.8) unstable; urgency=low

  * Don't set rpath for dnet_run_servers

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 25 Apr 2014 17:54:53 +0400

elliptics (2.25.4.7) unstable; urgency=low

  * Upped elliptics version

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 25 Apr 2014 16:15:47 +0400

elliptics (2.25.4.6-1) unstable; urgency=low

  * 
  * Fixed package details

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 25 Apr 2014 16:03:10 +0400

elliptics (2.25.4.6) unstable; urgency=low

  * Core: stops threads before joining them in case we got some error while creating node.
  * tests: Added fork and monitor options to dnet_run_servers
  * API: Removed most of const_cast's uses. Added move semantic to async_result
  * package: Places binaries to correct packages

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Apr 2014 15:28:39 +0400

elliptics (2.25.4.5) unstable; urgency=low

  * Python: fixed pickling elliptics.Id

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Apr 2014 02:30:37 +0400

elliptics (2.25.4.4) unstable; urgency=low

  * Core: added broadcasting send_wait on state removing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 16 Apr 2014 21:54:42 +0400

elliptics (2.25.4.3) unstable; urgency=low

  * trans: only log IO transactions if it was correctly allocated and initialized

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Apr 2014 22:55:41 +0400

elliptics (2.25.4.2) unstable; urgency=low

  * debian: elliptics-dev should depend on react-dev

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 09 Apr 2014 19:36:54 +0400

elliptics (2.25.4.1) unstable; urgency=low

  * route: added route update timing
  * doc: Added documentation for secondary indexes
  * client: Add headers to sources list
  * rpm: depend on react-devel instead of react-dev
  * log: Fixed removing of last char if it's not \n
  * cmake: get rid of the rest of react static build
  * cmake: elliptics_react is compiled into elliptics_monitor
  * tests: Fixed data sent to dnet_start_servers
  * log: trace_id_t typedef added for easy editing trace_id type
  * Iterator: added resetting skipped_keys if it founds proper key.
  * Python: added ability to use dict with bulk_write. Pytests: separated test_session into several test_session_* tests that covers subfeatures. Added bone for testing indexes, iterator and monitor&statistics.
  * Iterator: added sending keepalive iterator response with status=1 when 10K keys are skipped in a row.
  * Iterator: added total and iterated keys counters to iterator response.
  * Python: added push and reply.
  * cache: setting total_size
  * Python: Replaced inheritance elliptics_id from key by dnet_id aggregation that simplifies using elliptics.Id.
  * build: depend on 0.21.32+ eblob
  * Python: Added add_to_capped_collection to python binding. Added logging Handler that outputs logs into ellitpics.Logger.
  * client: added documentation for indexes
  * react: Error handling on react creation in dnet_process_cmd_raw changed.
  * Do not request route list in reconnect thread if node flags contains DNET_CFG_NO_ROUTE_LIST. Added ability to set node flags in dnet_ioclient by '-f'.
  * log: finally made dnet_id loggers thread-safe - allocate per-thread temporary buffers instead of plain static
  * spec: turn off cocaine support, there is no cocaine core RHEL RPM yet
  * python: CMake fixed to use the same version of python
  * tests: python Overflow test boundary for trace_id changed to 2**64
  * core: trace_id migrated to uint64_t
  * tests: Elliptics in python tests migrated to json.
  * foreign: React is now shared library.
  * tests: Check the value of srw in run_servers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 04 Apr 2014 23:59:15 +0400

elliptics (2.25.4.0) unstable; urgency=low

  * spec: get rid of <=5 rhel, added cocaine depend
  * tests: use only bindable ports for test servers
  * Pytests: restored copying required libraries from build to pytests.
  * cmake: elliptics client must be linked as c++ object because of monitoring support
  * core: fixed compilation errors on lucid/precise
  * Fixes: deletes scope after lock_guard is destroyed. Turned off srw tests in pytests.
  * Tests: decreased number of threads for each server node. Fixed checking number of init exec's results.
  * Monitor: fixed memory corruption in histogram.
  * react: Fixed memory corruption/leak
  * tests: Added monitor_port to json output
  * client: Fixed reading outside of vector on debug
  * config: Added pretty output on parsing error
  * pytest: do not try to destroy server object if it failed to start
  * run_servers: init application at all nodes
  * foreign/react: moved reacrt into foreign dir
  * foreign/blackhole: updated to master
  * config: updated example ioserv config
  * cocaine: Fixed parsing of remote nodes list
  * Tests: fixed generating srw config.
  * react: Checks in react for turned off monitoring added
  * dnet_ioserv: changed configuration format to json
  * cocaine: Added ability to set list of remotes
  * Pytest: used dnet_run_servers at pytests.
  * Core: Actions monitoring added
  * Monitor: react_stat_provider for exporting react call tree into monitoring added
  * trans: also print total size for IO commands when transaction has been processed on server and destroyed on client

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 27 Mar 2014 21:47:21 +0400

elliptics (2.25.3.0) unstable; urgency=low

  * trans: added IO debug into dnet_process_cmd_raw() and to transaction destruction
  * common: get rid of years unused history maps. Convert IO time in dnet_convert_io_attr()
  * client: Don't throw exceptions on log errors
  * tests: Added run_servers binary
  * Build: added libelliptics_monitor.so to client files in spec.
  * Session: added checking groups list for emptiness at iterator operation.
  * Log: removed duplicating log from monitor.cpp. Added dnet_log_raw_log_only and dnet_log_raw_internal. Made dnet_log_raw to use dnet_log_raw_internal.
  * Pytests: Turn off pytest recurse discover for tests.
  * Tests: added generating monitor ports.
  * Monitor: Added printing error message when monitor initialization is failed.
  * Build: fixed build on rhels - made elliptics_monitor shared library
  * node: get rid of unused is_valid() method
  * Pytest: specified python path at calling virtualenv.
  * blob: removed unneeded compression check
  * build: Compilation fixes. Missing define added. 'source' not found in sh
  * Code: added python binding references to code.
  * Pytests: renamed WITHOUT_COCAINE to PYTESTS_FLAGS.
  * Monitor: removed duplicated code of requesting statistics, monitor statistics and common dnet_request_cmd. Temporarily disabled srw test in pytest.
  * monitor: added category safety checks
  * build: depend on 0.21.31+ eblob - it adds proper backend statistics
  * monitor: fixed packing
  * Monitor: added to elliptics protocol ability to request monitor statistics. Added appropriate methods to C++ and Python bindings.
  * cache: Redundant monitoring actions removed
  * Monitor: Moved io statistics provider to c++ code. Added per state statistics to io statistics.
  * Monitor: added projet root dir to include directories. Hid monitor initialization into dnet_node_alloc.
  * Monitor:
  *     Added monitor to export for using it with elliptics-client
  *     Added status of io pool: blocked or not
  *     Added statistics about output queue: current size and total count
  *     Removed monitor dependency from node
  *     Added statistics provider for io pools and output queues
  *     Removed rwlock from monitor
  *     Used timestamp of statistics request instead of elapsed time from previous request
  *     Removed clearing commands history after each statistics request
  * Monitor: Changed name 'io_queue' to 'io'
  * CMake: fixed indent in some CMakeLists files.
  * Pytests: removed exception strings from checking because they depend on the boost python version.
  * Pytests: added dependency from python-virtualenv.
  * Pytests: used virtualenv for installing and runnig pytest.
  * Pytests: fixed runtime property in cocaine config.
  * Pytests: Used pip for pytest installation because python-pytest is not available on pure precise, lucid and rhel 5/6.
  * core: added possibility to set tcp keepalive parameters to client connections
  * Pytests: added comparing set of flags known and provided by module.
  * foreign: react submodule updated
  * Core: provided address to sph, Pytests: fixed fails on checking address from ExecContext.
  * cache: only log constructor/lock/unlock if times spent is more than 1 ms
  * Python: fixed calling final handler for AsyncResult.
  * Pytests: fixed executing cocaine-tool app upload.
  * Pytests: Merge current Python API tests with ijon test_exec. Added starting Elliptics node with srw and uploading and starting test app in it.
  * Python: Added ability to set data=None with exec_.
  * stall: changed default reset-stall-count from 5 to 3
  * stall: fixed stall counter reset. Decrease timed out state weigth by 10 instead of 2.
  * stall: reset stall counter in transaction destructor if transaction hasn't timed out
  * cache: added comment about zero-sized lookup reply
  * Cache: Lookup in cache is always going to disk.
  * IOClient: provided cflags in READ io command created by read_file.
  * Recovery: Added to merge statistics 'local_remove_old*' counters that contains information about keys which were removed without copying because they contain old data of krmation about keys which were removed without copying because they contain old data of keys.
  * tests: Cache lru eviction test doxygen description added
  * tests: check of correct test configuration added
  * tests: Test for lru eviction scheme added
  * cmake: Project root added to include directories.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Mar 2014 02:40:47 +0400

elliptics (2.25.2.0) unstable; urgency=low

  * build: depend on 0.21.30+ eblob where react monitoring support added
  * Monitor: Backend statistics provider added.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Feb 2014 18:23:39 +0400

elliptics (2.25.1.1) unstable; urgency=low

  * tests: Don't run srw tests if srw is disabled
  * client: Fixed log output for amd64 platform
  * client: Fixes for x86 platform
  * tests: Fixed compilation error
  * client: Fixed read_latest policy
  * cache: decrease log level if cache is not enabled
  * tests: added missing header
  * cache: define _GLIBCXX_USE_NANOSLEEP to enable sleep_for()
  * test: added server library to test-common itself, since it uses them
  * indexes: there is no nullptr on older compilers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 14 Feb 2014 21:31:11 +0400

elliptics (2.25.1.0) unstable; urgency=low

  * pool: added comment on how client handles replies in multiple IO threads
  * tests: Don't make artifacts if test is successfull
  * docs: Don't try to install documentation
  * cpp: get rid of get_node calls
  * Added forgotten doc/Doxy*.in files
  * cpp: Changed mix_states behaviour
  * file_logger: do not accept default log-level, force client to provide correct one
  * Tests: running run_tests.py with proper python.
  * logger: logger construction from the interface must *NOT* set default log-level, users should not be tricked here and potentially find out later, that their logging is being done only on INFO and ERROR level
  * Monitor&Doxygen: Added doxygen code documentation to monitor.
  * read-callback: only run read recovery when we have read the whole object. Added read recovery dbug.
  * dnet_io_attr: added total_size field (without ABI changes), which contains total size of the read record.
  * reconnect: fixed groups array allocation. limit group array for random selection by 4096 groups
  * core: added socket close debug
  * client: Added capped collections
  * Core: Missed error notification added
  * client: Make aggregated to handle empty sequence
  * cache: Stop lifecheck thread at node->need_exit
  * Monitor: Added extra check that monitor is still alive after acquiring rwlock.
  * Core: added checking epoll_events
  * Cache: Elements that were removed while being in sync queue don't sync now.
  * Cache: Resize page optimization.
  * Core: Limited size of io queues to the number of io threads * 1000. Added building iterate.cpp from example to main build without installation.
  * Cache: fixed size stats counting for deleting objects
  * Monitor: json allocator for dynamic string added
  * Cache: syncing to disk during requests to cache removed
  * Cache: Append optimization added
  * Cache: concurrent_time_tree, erase from page, time_tree difference
  * Cache: Life check sleep time adjusts to system load
  * Cache: Action names refactored. New actions added.
  * Cache: Actions set added.
  * Cache: time_stats doxygen documentation added
  * Cache: Copy of data before sync added
  * Cache: multiple bugfixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Feb 2014 00:25:45 +0400

elliptics (2.25.0.0) unstable; urgency=low

  * Python: Fixed typo in docstrings.
  * Python: added ability to clone session.
  * Python: Fixed pep8 warnings in setup.py. Added dnet_balancer to elliptics-client package.
  * Python: added keeping node inside python elliptics.Session to insure that session will be deleted after node.
  * Python: added (re)balancing ids script
  * trans: randomize route table update: select 5 random groups and read table from one random node from each selected group
  * Python: bugfixes
  * rpm: added make test
  * doc: Added documentation generation by doxygen
  * Utils: Introduce argument_data
  * tests: Add data_buffer test case
  * Utils: Optimized data_pointer behaviour
  * tests: Moved API checks to external test file
  * Monitor: Added ability to extend monitor statistics via custom statistics providers.
  * srw: Don't call cocaine::app_t::stop on stopped apps
  * Monitor: Made elliptics_monitor as shared library.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 24 Jan 2014 03:47:35 +0400

elliptics (2.24.15.0) unstable; urgency=low

  * cache: treap implementation, cache distribution changes
  * monitor: initial implementation
  * python: filters and checkers
  * index: remove implementation
  * tests: new srw test, moved to new testing framework

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 25 Dec 2013 23:53:20 +0400

elliptics (2.24.14.36) unstable; urgency=low

  * cache: Improved hash function in cache
  * * Use last 8 bytes in addition to first one. Otherwise all keys for specific shard comes to single cache object.
  * Python: Fixed accepting IoAttr instead of Id in read/write operations. Fixed overriding write_data by write_data_by_chunks.
  * Python: Provided Error, NotFoundError and TimeoutError directly from elliptics module. Removed hiding elliptics.core module.

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 19 Dec 2013 15:54:38 +0400

elliptics (2.24.14.35) unstable; urgency=low

  * socket: alot of debug and double-close checks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 11 Dec 2013 06:31:09 +0400

elliptics (2.24.14.34) unstable; urgency=low

  * python: Acquire GIL in python binding in async_result::get()
  * config: update reserved fields to maintain proper ABI structure size
  * Python: Updated docstrings for binding
  * Merge recovery: changed statistics name to clearly separate remote and local request counters
  * Recovery: fixed removed_bytes in statistics for keys which hasn't been copied because proper node already has newer keys datas
  * Recovery: fixed removed_bytes in statistics for key which hasn't been copied because proper node already has newer key data

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 11 Dec 2013 01:54:38 +0400

elliptics (2.24.14.33) unstable; urgency=low

  * Recovery: Added -o option to merge which limits it to one node.
  * Recovery: Replaced merge by deep_merge with removing of the last. Used FileHandler without rotation for dnet_recovery logs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Dec 2013 19:11:17 +0400

elliptics (2.24.14.32) unstable; urgency=low

  * Filters: Fixed filters::all filter
  * IDS: Added config flag which turns on saving and recovering ids from elliptics cluster.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Dec 2013 02:50:18 +0400

elliptics (2.24.14.31) unstable; urgency=low

  * Recovery: Added clearing AsyncResults in handlers to prevent cross-links to objects. Minimized sending statistics.
  * Python: fixed memory leak and GC problem with using connect to AsyncResult.
  * Recovery: fixed inverting node ranges in deep_merge.
  * Recovery: Updated logs for deep_merge. Added parameter '-z' for setting one log file size which would be rotated.
  * Recovery: Extended logs for deep_merge.

 -- Kirill Smorodinnikov <shaitan@yandex-team.ru>  Wed, 04 Dec 2013 15:13:01 +0400

elliptics (2.24.14.30) unstable; urgency=low

  * Recovery: added handling safe flag which turns off removing key from unproper node.
  * Recovery: added returning result from deep_merge.
  * Recovery: added attempts to lookup/read/write/remove.
  * Recovery: Rewrited deep_merge. Now deep_merge is synchronization keys within group all nodes at once. More details: http://doc.reverbrain.com/elliptics:replication.
  * Python: Removed debug code.
  * Python: Removed elliptics.Data and uses python string instead of. Fixed specifying object method as callback for elliptics.AsyncResult.connect.
  * Python: elliptics.Data added to_string and __repr__ methods which returns string representation of internal data
  * Python: changed counters output to dict.
  * Build: Fixed compilation errors on Lucid

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 02 Dec 2013 19:12:29 +0400

elliptics (2.24.14.29) unstable; urgency=low

  * Python: fixed counters in stat_log_counter. Core: Added const to input parameter in dnet_server_convert_dnet_addr
  * Python: Fixed crash on requesting address/group_id from result entries.
  * session: transform() should accept const session, since it doesn't modify it
  * cache: scream loudly if cache operations with lock taks more than 100 ms
  * Test: Use random ports for servers
  * Python: fixed typo.
  * cache_pages_number param added
  * slru_cache refactored
  * Caches_number configuration param added.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Nov 2013 18:59:00 +0400

elliptics (2.24.14.28) unstable; urgency=low

  * state: fill state with 0xff prior its freeing for debug
  * state: guard dnet_schedule_recv() with st->send_lock. dnet_schedule_send() is already guarded.
  * state: s/need_exit/__need_exit. Prevent socket shutdown if __need_exit is set.
  * state: when adding new state check reverse-lookup data, fail to add new state if wildcard address (like 0.0.0.0) has been received
  * state: added more debug into just-connected-to address and its route table
  * state: do not copy n->addrs -> st->addrs for joining but not listening states
  * Python: added method for getting name of command.
  * Build: Added egg-info files to rpm spec.
  * Build: Fixed build on RHEL5/6.
  * Python: provided group_id in address returned by some result entries. Restored counters in AddressStatistics.
  * CMake: Don't export Elliptics package

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Nov 2013 03:22:20 +0400

elliptics (2.24.14.27) unstable; urgency=low

  * debian: do not depend in runtime on source-version
  * CMake: Include Targets file from Config.cmake
  * Build: fixed copying python scriptcs on RHEL5/6

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Nov 2013 23:56:38 +0400

elliptics (2.24.14.26) unstable; urgency=low

  * spec: depend on 0.21.26+ eblob for statistics
  * Build: Moved redifining of __python at the top of spec file for rhel < 6.
  * Build: Fixed build on RHEL5 and restored recovery and python bindings scripts in rpms.
  * stat: added DNET_CNTR_NODE_FILES_REMOVED counter. It is only filled in eblob backend.
  * cmake: export ELLIPTICS_LIBRARY_DIRS
  * License: Change license from GPL to LGPL
  * Core: Added public dnet_digest_*transform methods

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Nov 2013 18:44:22 +0400

elliptics (2.24.14.25) unstable; urgency=low

  * core: forbid route table update with 0.0.0.0 addresses

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 16 Nov 2013 02:16:24 +0400

elliptics (2.24.14.24) unstable; urgency=low

  * core: added route/address debug
  * Python: Use ${PYTHON_EXECUTABLE} in cmake scripts

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Nov 2013 05:39:29 +0400

elliptics (2.24.14.23) unstable; urgency=low

  * io_client: Call wait() to async_remove_result
  * Stat: In eblob statistics used DNET_CNTR_NODE_FILES for number of available records in eblob.
  * Client: Some fixes connected with move semantic

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Nov 2013 22:35:35 +0400

elliptics (2.24.14.22) unstable; urgency=low

  * net: copy all addresses into joining state
  * Cocaine: Don't link with eblob
  * CMake: Added EllipticsConfig.cmake
  * Client: Add valid logging to bulk callbacks
  * Indexes: Use enum for versions instead of raw ints
  * Cocaine: Fixed duplication of files' in find result
  * Server: Fixed segfault at exit
  * crypto: fixed undefined dnet_offsetof macros usage
  * Recovery: Added deep_merge recovery type. Updated docs for recovery.
  * Build: Fixed missing python wrapper around elliptics.core.
  * Indexes: Added comments to flags
  * Indexes: Comments for remove_index_callback
  * Indexes: Added session::remove_index_internal
  * Indexes: Added ability to remove objects from indexes
  * Indexes: Send bulk request only if server knows it
  * Use data_pointer::allocate in callback_p.h
  * Core: Add \n to end of message at logger
  * indexes: Added bulk-behavior to find_indexes
  * Python: Fixed get_address_ranges
  * Python: Fixed __init__.py
  * Python: provided python level log based on logging.
  * Cpp: Extended comments and notes about write_prepare, write_plain and write_commit.
  * Cpp: fixed write_data by chunks.
  * Relicense Elliptics under LGPL 

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Nov 2013 00:39:05 +0400

elliptics (2.24.14.21) unstable; urgency=low

  * Added more debug info for cache requests.
  * Fixed bulk_read request.
  * Fixed bug on cache overflow.
  * Client: fixed write_data by chunks.
  * Python: got data_pointer inside python binding as elliptics.Data. Removed restrict of using bp::list - now you can use any iterable object for those purpose.
  * Added example script and c++ code for iterating specified nodes or all nodes in specified groups
  * Removed useless code.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Oct 2013 22:09:19 +0400

elliptics (2.24.14.20) unstable; urgency=low

  * Put man pages into packages
  * Do not schedule network IO if state is in need-exit state
  * Use correct session::remove() method
  * Build: Fixed prefix in executing setup.py
  * Do not write timestamp for read requests, it is meaningless in request.
  * Added dnet_send_read_data() timings
  * Python: Set default timeouts in elliptics.Config
  * Python: Unlock GIL inside synchronous calls

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Oct 2013 03:56:39 +0400

elliptics (2.24.14.19) unstable; urgency=low

  * Recovery: fixed skipping equals objects in diff
  * Recovery: Fixed sorting and diffing objects.
  * Python: fixed bulk_write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Oct 2013 16:57:37 +0400

elliptics (2.24.14.18) unstable; urgency=low

  * Minor python binding cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Oct 2013 00:17:12 +0400

elliptics (2.24.14.17) unstable; urgency=low

  * Added size to dnet_iterator_response
  * Python: if both key and timestamp is equal then size will be checked and larger object will be restored.
  * Python: fixed is_none() for boost v1.40 compatibility.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 07 Oct 2013 20:37:52 +0400

elliptics (2.24.14.16) unstable; urgency=low

  * Python binding rewrite

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 07 Oct 2013 16:50:17 +0400

elliptics (2.24.14.15) unstable; urgency=low

  * Return EXFULL from srw->process() if srw/cocaine enqueue/write throws an exception.
  * State reset should cleanup all transactions.
  * Added elliptics tool man pages. Removed obsoleted documentation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Sep 2013 22:28:11 +0400

elliptics (2.24.14.14) unstable; urgency=low

  * ioclient must return non zero on exec (and other commands) error
  * Stall check debug code

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 26 Sep 2013 19:35:06 +0400

elliptics (2.24.14.13) unstable; urgency=low

  * Added cocaine-elliptics service stub
  * Little optimization for raw_data_pointer comprasion
  * Removed debug check read in update_indexes_internal

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 26 Sep 2013 16:06:42 +0400

elliptics (2.24.14.12) unstable; urgency=low

  * Added commentary about sync_element usage in life thread
  * Added locks around sync block in life check thread
  * Improved update_indexes_internal perfomance
  * Comment out unused method parameters.
  * Made dnet_state_reset() log high enough not to spam in default cleanup path

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 24 Sep 2013 18:16:05 +0400

elliptics (2.24.14.11) unstable; urgency=low

  * Add reconnection address if connection has been reset
  * session::push must clear reply flags
  * Added bulk read support for module backend
  * Fixed test_iterator.py: fixed error with IteratorRange initialization
  * config: improved documentation
  * config: added new knobs and their description
  * eblob: added defrag_time and defrag_splay knobs
  * debian: bump eblob dependency

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 Sep 2013 18:30:33 +0400

elliptics (2.24.14.10) unstable; urgency=low

  * Added stall/timed out transctions check
  * Added callback machinery debug
  * Print trace id as part of thread-id/pid chunk
  * Moved trace_id into TLS
  * dnet_usage() text cleanup
  * Initialize err before dnet_add_state_socket() call

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 14 Sep 2013 02:57:49 +0400

elliptics (2.24.14.9) unstable; urgency=low

  * Moved stall transaction processing into dnet_io_process(), where it can be done without races.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 12 Sep 2013 04:32:25 +0400

elliptics (2.24.14.8) unstable; urgency=low

  * Fixed incorrect state used in timed out transactions cleanup
  * Returned back state reset in auth/reverse lookup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 12 Sep 2013 04:01:36 +0400

elliptics (2.24.14.7) unstable; urgency=low

  * Do not reset state in auth/reverse lookup commands

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 12 Sep 2013 03:36:37 +0400

elliptics (2.24.14.6) unstable; urgency=low

  * We have to use list_for_each_entry_safe() when moving object from list being iterated.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 11 Sep 2013 21:42:19 +0400

elliptics (2.24.14.5) unstable; urgency=low

  * Put/complete stalled/timedout transactions on error not under state_lock
  * Revert "Merge pull request #217 from shaitan/trace"
  * Get rid of libelliptics_module_backend_cpp.so in elliptics spec

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 11 Sep 2013 20:22:09 +0400

elliptics (2.24.14.4) unstable; urgency=low

  * Added trace_id to dnet_backend_log. Added DNET_TRACE_BIT for ignoring current log level for traced request.
  * Added printing begin and end of id in dnet_dump_id_len
  * Made elliptics compatible with current eblob version.
  * Added comments to eblob compatibility solution.
  * Renamed back dnet_trace* to dnet_log.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 10 Sep 2013 22:18:04 +0400

elliptics (2.24.14.3) unstable; urgency=low

  * Destroy timed out transactions in checking thread.
  * Correctly kill state with errors in it.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 Sep 2013 02:20:45 +0400

elliptics (2.24.14.2) unstable; urgency=low

  * Cleanup dnet_state_reset() calls - generally it is not allowed to 'put' state's refcnt from arbitrary place
  * Use char * in open() call

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 03 Sep 2013 19:36:44 +0400

elliptics (2.24.14.1) unstable; urgency=low

  * Forced rpath option for dnet_cpp_test
  * Do not set read/write sockets to -1 until they are closed
  * Added clearing syncset and lifeset in cache_t destructor

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 30 Aug 2013 18:29:38 +0400

elliptics (2.24.14.0) unstable; urgency=low

  * LTS release

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Aug 2013 21:58:50 +0400

elliptics (2.24.13.35) unstable; urgency=low

  * Added tests for lookup and prepare_latest
  * Fixed prepare_latest command
  * Added support for cache lookup command
  * Added local_session::lookup
  * Fixed session::clone in case of empty groups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Aug 2013 20:36:06 +0400

elliptics (2.24.13.34) unstable; urgency=low

  * Instead of resetting network state just close its sockets
  * Get rid of unneeded code in stall transaction check thread
  * Split check/reconnect logic into two separate threads
  * Added update_indexes and update_indexes_internal to python binding
  * Do not spam logs if cache is not turned on
  * group description update
  * Added basic dnet_print_time() helper (not thread-safe)
  * Long line/whitespace cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Aug 2013 17:05:57 +0400

elliptics (2.24.13.33) unstable; urgency=low

  * Added new map typedefs
  * Added iterate.py. Script for counting legal/hidden records on elliptics node by iterator
  * Added iterator support for module backend
  * auth_cookie documentation update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 18 Aug 2013 05:27:44 +0400

elliptics (2.24.13.32) unstable; urgency=low

  * Do not use already removed 'id_range' in debug messages

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 14 Aug 2013 20:21:10 +0400

elliptics (2.24.13.31) unstable; urgency=low

  * Fixed getting recovering node group id from routes when groups is specified. Added ability to specify groups for recovering.
  * Restored lost mk_container_name import

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 Aug 2013 14:55:23 +0400

elliptics (2.24.13.30) unstable; urgency=low

  * Fixed unexpected exit after iteration stage if local node is empty
  * Proper support for session::exec in python binding
  * src_key and quiet options for exec (-c) command
  * Use log-level DNET_LOG_DATA instead of special 'quiet' log output mode
  * Initialize convert_usecs to prevent unintialized usage

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 12 Aug 2013 18:30:31 +0400

elliptics (2.24.13.29) unstable; urgency=low

  * Updated dependencies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 07 Aug 2013 17:32:48 +0400

elliptics (2.24.13.28) unstable; urgency=low

  * Restored get_address_group_id
  * Removed eid and id_range from IteraterResult. Used sha256 from address instead of id_range@eid.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Aug 2013 18:14:57 +0400

elliptics (2.24.13.27) unstable; urgency=low

  * tests: added more append tests
  * Send srw reply on upstream::close() to client.
  * Reset connection on server's side if versions mismatch
  * Provide error into dnet_state_reset()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Aug 2013 12:12:05 +0400

elliptics (2.24.13.26) unstable; urgency=low

  * Fixed zero data for indexes_internal in case of no changes

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 01 Aug 2013 19:10:02 +0400

elliptics (2.24.13.25) unstable; urgency=low

  * Added dnet_indexes_reply for internal commands

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 01 Aug 2013 18:03:02 +0400

elliptics (2.24.13.24) unstable; urgency=low

  * Added session::update_indexes method
  * Fixed groups mix in case of key generated from id

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 01 Aug 2013 16:24:10 +0400

elliptics (2.24.13.23) unstable; urgency=low

  * Use pointer logic in indexes. Only drop lock (and do not unlock at the end of dnet_process_cmd_raw()) if we are not going to send ack right now.
  * Use 0xHEX string instead of just HEX
  * Use dnet_time structure in dnet_time_before/after functions

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 01 Aug 2013 03:49:53 +0400

elliptics (2.24.13.22) unstable; urgency=low

  * Moved dnet_time_before/after into public header

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 01 Aug 2013 02:58:41 +0400

elliptics (2.24.13.21) unstable; urgency=low

  * Fixed using of mix_states for DNET_CFG_MIX_STATES

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Wed, 31 Jul 2013 17:33:22 +0400

elliptics (2.24.13.20) unstable; urgency=low

  * Added reconnection logic debug
  * Fixed invalid error for read in case if there is no state
  * Do not mess with command flags, instead unlock/lock key
  * Added little optimization for cache

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 21:24:31 +0400

elliptics (2.24.13.19) unstable; urgency=low

  * recovery: fix container creation in merge
  * recovery: removed unused get_address_ranges()
  * recovery: merge: do not fail on single error
  * recovery: fixed computation of recovery ranges
  * recovery: actualize comments

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 12:46:51 +0400

elliptics (2.24.13.18) unstable; urgency=low

  * Optimization for append to cache

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 05:12:34 +0400

elliptics (2.24.13.17) unstable; urgency=low

  * Fixed endless syncing to disk the same file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 02:10:43 +0400

elliptics (2.24.13.16) unstable; urgency=low

  * Run low-level backend commands without cache lock

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Jul 2013 00:30:09 +0400

elliptics (2.24.13.15) unstable; urgency=low

  * Fixed removing from disk if cache is empty
  * Added more debug info to cache
  * Added delayed sync to disk in cache
  * Use nonblocking pool for the appropriate commands

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 29 Jul 2013 23:49:09 +0400

elliptics (2.24.13.14) unstable; urgency=low

  * Added checksum and timestamp to write result for cache
  * Fixed returning of lookups on IO_CACHE requests

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 29 Jul 2013 18:43:51 +0400

elliptics (2.24.13.13) unstable; urgency=low

  * Fixed error codes for bulk_read and read commands

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 27 Jul 2013 02:11:40 +0400

elliptics (2.24.13.12) unstable; urgency=low

  * Added metadata support to cache
  * Refactored cache support, added offset/append support
  * Return offset within fd in write reply structure
  * Do not try to redefine O_LARGEFILE
  * libcocaine-plugin-elliptics should depend on elliptics client's source version
  * Do not turn on cocaine support in RHEL builds
  * Use ~0ULL instead of ULLONG_MAX, otherwise it is broken on rhle5
  * Moved local_session to separate file
  * Do not use randomized states by default, use sequential groups order

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 26 Jul 2013 16:29:05 +0400

elliptics (2.24.13.11) unstable; urgency=low

  * Optimized merge algorithm in dc recovery

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 24 Jul 2013 18:39:27 +0400

elliptics (2.24.13.10) unstable; urgency=low

  * Inherited elliptics_id from key. Fixed places where elliptics_id is used.
  * Removed boost python class declaration for remove_result_entry.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 23 Jul 2013 18:21:52 +0400

elliptics (2.24.13.9) unstable; urgency=low

  * Set timestamp to -1/-1 on session creation;
  * Copy timestamp on session clone;
  * Get timestamp from mtime when writing via write_file;
  * Use half-open interval for key range intervals;
  * Added test for APPEND|PREPARE case;
  * Improved logging in eblob backend write path;
  * Comment improvements.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 22 Jul 2013 21:44:27 +0400

elliptics (2.24.13.8) unstable; urgency=low

  * recovery: monitor: add IPv6 support
  * recovery: remove entries after successful recovery
  * python: added async remove()
  * it: remove file based implementation
  * it: more robust dnet_iterator_create()
  * it: fix leak if destroyed via dnet_iterator_free()
  * it: cancel all running iterators on exit
  * it: added even more sanity checks
  * it: limit number of send replies in queue
  * recovery: added 'safe' mode for use in cron
  * Refactor version check into separate function. Check version on client too.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 21 Jul 2013 22:04:42 +0400

elliptics (2.24.13.7) unstable; urgency=low

  * Fixed compilation error

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Thu, 18 Jul 2013 21:06:53 +0400

elliptics (2.24.13.6) unstable; urgency=low

  * Fixed aborting in case of receiving garbage from server
  * Fixed typo at port assignment in dnet_socket_create()
  * New automatic tests
  * Fixed error code in multigroups requests
  * Fixed memory free for dnet_config_data
  * Added ability to run several servers in one process
  * Used IndexEntry in python bindings for find indexes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Jul 2013 19:18:19 +0400

elliptics (2.24.13.5) unstable; urgency=low

  * Depend on 0.21.2 eblob.
  * Use 141 boost.
  * Big tests update
  * misc: column cleanups
  * fs: use PATH_MAX for path size
  * fs: use EBLOB_AUTO_DATASORT for metadata blob
  * Input io queue stats collection and periodic logging
  * Restored localhost in test_index.py
  * eblob: reformatted range requests
  * recovery: added doc link
  * recovery: fixed recovery script description
  * dnet: simplified dnet_iterator_start()
  * recovery: Added waiting writes in after each batch

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Jul 2013 20:18:38 +0400

elliptics (2.24.13.4) unstable; urgency=low

  * Fixed permanent "connection refused" server coma condition
  * Use 153 boost in spec. Depend on 0.21.1 eblob.
  * Fixed handling of errors in multigroup callback

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Jul 2013 23:44:37 +0400

elliptics (2.24.13.3) unstable; urgency=low

  * Fixed sending server's shard count to client
  * Added "inline" attribute to debug ostream methods
  * Renamed async_update_* to async_set_*. Renamed python methods
  * Added more logs in find_indexes_functor
  * Added logger::print method for printf-like logging
  * Changed algorithm for generating indexes id

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Jul 2013 23:44:30 +0400

elliptics (2.24.13.2) unstable; urgency=low

  * Changed algorithm for generating indexes id
  * Added receiving of indexes shard count from server
  * Fixed timeout on error during indexes processing

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Jul 2013 18:55:06 +0400

elliptics (2.24.13.1) unstable; urgency=low

  * Added shard count into config file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Jul 2013 02:13:21 +0400

elliptics (2.24.13.0) unstable; urgency=low

  * New shared secondary indexes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Jul 2013 23:13:06 +0400

elliptics (2.24.12.0) unstable; urgency=low

  * elliptics: Use eblob's new BLOB_DISK_CTL_EXTHDR flag and writev()-like API.
  *   This moves most of metadata complexity from elliptics backend to libeblob
  *   NB! This is very complex change - needs excessive testing;
  * elliptics: Removed leveldb backend along with snappy dependency;
  * elliptics: Fixed read with offset/size specified;
  * elliptics: Cleaned up leftovers from compression removal;
  * elliptics: Added tests for reads/writes with offset and size specified;
  * recovery: Simplified output for most counters;
  * recovery: Fixed python 2.6 compatibility;
  * recovery: Usability improvements;
  * recovery: Added computation of hash ring % in merge mode;

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Jul 2013 22:50:39 +0400

elliptics (2.24.11.0) unstable; urgency=low

  * Added percentage dump, help and other params to route table stats script
  * Fixed bytes in recovery statistics. Removed old 'dc' script and renamed 'dc2' to 'dc'.
  * Fixed merge
  * Added time finished to stats after merge
  * Encode server's version in reverse lookup command. Print it if server returned error.
  * Introduced elliptics version in the initial handshake. If major versions mismatch (like 2.24 vs 2.23), then connection fails.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Jul 2013 00:55:40 +0400

elliptics (2.24.10.5) unstable; urgency=low

  * Temporarily disable module backend build on rhel6
  * Added `remove_on_fail` error handler
  * Removed debug print from IteratorResult.merge

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Jul 2013 20:22:41 +0400

elliptics (2.24.10.4) unstable; urgency=low

  * Explicitly stop engine upon dnet_app_t destruction
  * Expose fine-tuning knobs in Cocaine extensions
  * Use generic cocain::error_t instead of removed cocaine::configuration_error_t

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 30 Jun 2013 18:42:48 +0400

elliptics (2.24.10.3) unstable; urgency=low

  * Major recovery update: cleanups, performance, fixes
  * Minor API extensions
  * Python API extensions

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 27 Jun 2013 23:47:47 +0400

elliptics (2.24.10.2) unstable; urgency=low

  * Fixed data corruption due to indexes workflow

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 25 Jun 2013 03:07:01 +0400

elliptics (2.24.10.1) unstable; urgency=low

  * Uncomment module backend in rhel builds
  * Fixed error handling in case of invalid indexes internal data
  * Changed error codes to errno in elliptics service
  * Added elapsed time to async_result. Cleaned up code.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 24 Jun 2013 23:07:20 +0400

elliptics (2.24.10.0) unstable; urgency=low

  * backends: fixed compatibility with new blob APIs
  * Fixed compatibility with cocaine
  * Depend on 0.10.5-5+ cocaine

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 24 Jun 2013 21:08:25 +0400

elliptics (2.24.9.4) unstable; urgency=low

  * Added json format to monitor
  * Added generic AsyncResult to python binding
  * Fixed memory leak on write/lookup
  * Fixed dc2. Added skipped keys while reading into monitor statistics

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Fri, 21 Jun 2013 16:52:54 +0400

elliptics (2.24.9.3) unstable; urgency=low

  * When using named workers add unique name to them, so that they are cluster-wide unique
  * Fixed cache destructor

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 21 Jun 2013 03:17:31 +0400

elliptics (2.24.9.2) unstable; urgency=low

  * Fixed python_read_result_get

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Jun 2013 21:57:02 +0400

elliptics (2.24.9.1) unstable; urgency=low

  * Get rid of blob_cache_size unsupported config option
  * Get rid of last column/type appearance in elliptics python binding
  * Added missed monitor.py. Optimized monitor output: leave only important counters and timers.
  * New exec() variant which gets id and src_key from existing exec_context.
  * New method in exec_context to retrieve src_key from underlying sph.
  * Fixed friend and forward declarations of exec_context_data
  * Whitespace cleanup and indentation fixes
  * Added bulk_read_async and write_data_async and added iterating ability to returned results. Fixed bugs
  * Fixed errors handling in async_result_handler::complete
  * Added ready for async_result. Added extra write_data
  * Added recovery type to monitor statistics output. Changed apply_async to imap_unordered.
  * added backends.h to install(FILES ...) in CMakeLists.txt
  * Fixed output for stats: increased width. Added sending monitor info from dc script
  * Added comment and record to log when interrupting iterator.
  * Added generic monitoring and dc2 monitoring impl.
  * Added interrupting iterator execution on server-side if client connection has been closed.
  * Added empty C++ merge method. Fixed run_iterator in dc2
  * python: major update to remove type/column
  * Returned 2.20.*.* namespace behaviour
  * Added session::find_any_indexes
  * Fixed BULK_READ server implementation
  * python: s/boost::python::/bp::/g
  * python: removed unnedded 'using namespace'
  * recovery: cleanup after type removal
  * recovery: dc: dc2: fixed exception on container load
  * dnet: use proper error code on empty route table
  * recovery: use lock by default
  * recovery: dc: dc2: use proper direct API
  * Removed meta methods from module_backend
  * Removed sync read and write methods
  * Removed dnet_id.type. It was legacy
  * Removed DNET_ATTR_DELETE_HISTORY and DNET_ATTR_META_TIMES
  * Removed example/hparser
  * Removed legacy meta/check/recovery/iterate support
  * Fixed typo in cocaine storage service exception
  * Added handling Ctrl+C in dc2
  * ioserv: unblock SIGQUIT and SIGTSTP
  * recovery: remove lru_cache from node and session
  * dnet: fix DNET_FLAGS_DIRECT flag behavior
  * recovery: added posix_fadvise to sort
  * Added skipping equal keys while computing differeneces.
  * Added support for the writing chunk by chunk
  * recovery: properly catch SIGINT
  * recovery: renamed collisions with python builtins

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Jun 2013 21:23:33 +0400

elliptics (2.24.8.1) unstable; urgency=low

  * Correct service protocol must be derived from extension class

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 04 Jun 2013 00:25:59 +0400

elliptics (2.24.8.0) unstable; urgency=low

  * Added cache and bulk methods to elliptics service
  * Depend on cocaine >= 0.10.5, not counting prereleases
  * Added note about timeout option for write_cache
  * Fixed indentations
  * Optimized dc.py. Added 'no-exit' parameter.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 03 Jun 2013 23:35:27 +0400

elliptics (2.24.7.9) unstable; urgency=low

  * Fixed srw/ctx destruction issues

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 03 Jun 2013 04:14:57 +0400

elliptics (2.24.7.8) unstable; urgency=low

  * Speed up server stop, by setting need-exit flag for all cache threads bfore joining them one after another.
  * Fixed state destruction, which happened befor context_t destruction, which in turn calls logger.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 03 Jun 2013 03:51:08 +0400

elliptics (2.24.7.7) unstable; urgency=low

  * Fixed n->io thread control initialization race
  * Fixed IO thread selection logic
  * Get rid of unneeded code and variables

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 02 Jun 2013 01:04:06 +0400

elliptics (2.24.7.6) unstable; urgency=low

  * Fixed several leaks on close/destruction path

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 01 Jun 2013 23:11:58 +0400

elliptics (2.24.7.5) unstable; urgency=low

  * added elliptics_module_backend_cpp.so to elliptics-dev package
  * moved backends.h to include/elliptics, changed CMakeLists.txt to make module backend function properly
  * Added recovered_bytes to dc2 statistics. Added wait at the end of recovering.
  * Added append_rr method to IteratorResultContainer - added response to container. Swapped processName and levelname in recovery logs.
  * Added file name to iterator. Optimized get_local_ranges_by_address(). Fixed dc2 for multi-range single-result-file iteration.
  * Added forgotten adding NOLOCK flag
  * Simplified oplocks implementation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 01 Jun 2013 17:17:28 +0400

elliptics (2.24.7.4) unstable; urgency=low

  * Recovery update:
  *   recovery: removed statement that have no effect
  *   recovery: do not automatically cache node and session
  *   recovery: fixed log message
  *   recovery: more useful statistics
  *   recovery: do not use __wrapped__ method of lru_cached objects
  *   recovery: do not propagate elliptics exceptions from subprocess
  *   recovery: added dry-run support to merge
  *   recovery: merge: use many ranges in single iterator
  * eblob: do not call blocking function under mutex, get rid of whole page cache drop for given fd
  * Module backend updates

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 31 May 2013 02:36:19 +0400

elliptics (2.24.7.3) unstable; urgency=low

  * Revert "Temporarily disable srw build and downgrade cocaine dependency"
  * Trying to fix oplock deadlock
  * Implemented BULK_READ by several READ calls

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 30 May 2013 02:00:02 +0400

elliptics (2.24.7.2.nosrw) unstable; urgency=low

  * Changed namespace usage

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 29 May 2013 20:46:04 +0400

elliptics (2.24.7.1.nosrw) unstable; urgency=low

  * Temporarily disable srw build and downgrade cocaine dependency
  * Update honest_command_handler_adaptee.cpp
  * Update honest_command_handler_adaptee.hpp
  * Fixed timeouts in indexes updates
  * Update registration.cpp
  * Fix typo in printf format for session.cpp
  * Fixed remove method in cocaine storage
  * Removed acks replies after transaction is completed
  * Added --fake parameter to run without recovering.
  * Added method for loading iterator results from files. Completed basic logic of dc2 script.
  * Do not commit what was already committed by EBLOB_OVERWRITE_COMMITS bit and when size+offset match what should be committed
  * Use session's ioflags in bulk operations and when calling find_indexes()
  * Updated ioserv config doc. Patch by Sergey Shtykov <bayonet@yandex-team.ru>
  * Added dc2 - another variant of data center recovery.
  * Separated iterator results by ranges

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 29 May 2013 20:41:01 +0400

elliptics (2.24.7.0) unstable; urgency=low

  * Use round-robin sph->src_key assignment.
  * Added new exec() method which assigns sph->src_key from its parameter
  * Get rid of old/unused exec/push - locked/unlocked, use plain exec/push and lock flag from session.cflags
  * Save sph->src_key and use it when calculating named worker index, since it will be overwritten for blocked events
  * Use src_key as index within array or started (via start-multiple-task) named workers
  * Removed dependency on cocaine-framework-native
  * Write correctly nulled error string in c++ binding if cmd failed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 27 May 2013 02:10:19 +0400

elliptics (2.24.6.2) unstable; urgency=low

  * Do not track cocaine/plugins/elliptics-extensions.cocaine-plugin
  * Updated to the latest upstream cocaine version

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 24 May 2013 22:35:09 +0400

elliptics (2.24.6.1) unstable; urgency=low

  * Added support of multirange iteration. Updated C++ interface for iterator.
  * Get rid of number of oplocks config variables.
  * Made dnet_parse_numeric_id() accessible to others

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 24 May 2013 18:09:00 +0400

elliptics (2.24.6.0) unstable; urgency=low

  * Revert "v2.25.1.0", please note that this still breaks ABI compatibility with pre-2.24.6 clients
  * Fixed usage of session's wait timeout
  * Recovery improvements
  * ext: lookup now supports extended format
  * ext: optimized blob_read()
  * Moved ID locks implementation to RBTree

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 23 May 2013 00:43:11 +0400

elliptics (2.24.5.0) unstable; urgency=low

  * Dump to stderr if logger interface failed to write data
  * Added alpha version of dc recovery
  * Added bulk_read and bulk_write methods which provides timestamp and user_flags.
  * Update of recovery scripts
  * ext: fixed update of extension header

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 21 May 2013 00:32:08 +0400

elliptics (2.24.4.4) unstable; urgency=low

  * Fixed timestamp bug - do not assign io.num without need - it prevents timestamp to be set correctly.
  * Use eblob_read_data_nocsum() instead of eblob_read_data(), since if we wanted, we already checked csum in eblob_read_return()
  * Fixed typo

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 May 2013 05:15:30 +0400

elliptics (2.24.4.3) unstable; urgency=low

  * Simplify eblob read/write calls. Get rid of unused elist casts

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 May 2013 04:35:22 +0400

elliptics (2.24.4.2) unstable; urgency=low

  * Depend on cocaine-framework-native-dev (>= 0.10.3~pre1)
  * Sync index application to up-to-date framework

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 May 2013 22:48:36 +0400

elliptics (2.24.4.1) unstable; urgency=low

  * Idle 0 means 'never stop' timeout for cocaine workers
  * Use local json-trait helper instead of cocaine/detail/traits/json.hpp, which is private

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 May 2013 22:38:08 +0400

elliptics (2.24.4.0) unstable; urgency=low

  * Added named workers support
  * Get rid of zeromq
  * Do not perform json serialization under lock
  * Fixed timestamp in dnet_write_file_id_raw
  * Added printing lookup file info in ioclient by parameter -L.
  * Added timestamp into session (get/set methods). Copy user flags from session, if it was not set in ctl.io
  * Used common method for copying timestamp and user_flags from elist to io_attr.
  * Added indexes profile and manifest
  * Fixed response() assignment and warnings
  * Added set-timestamp() session method
  * Added looking for cocaine-framework-native and libev include dirs
  * Changed cocaine storage api to second version
  * Only set timestamp if it is zeroed
  * Depend on cocaine-framework-native-dev

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 May 2013 22:17:39 +0400

elliptics (2.24.3.0) unstable; urgency=low

  * Fill ctl.io.timeout during write
  * Added user flags property to session
  * Build fix for gcc 4.4
  * Returned tags to ellitics cocaine storage
  * Moved update indexes implementation to serverside
  * Added elliptics service
  * ext: eblob: threat old-format records same as non-existent.
  * recovery: new subsystem
  * Fixed prepare-size with new ext headers
  * Added eblob config flag comment
  * Added bulk_write to python binding
  * Fixed number of bugs found by coverity
  * Replace boost::mutex with std::mutex

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 15 May 2013 19:35:18 +0400

elliptics (2.24.2.1) unstable; urgency=low

  * Fixed IPv6 server addr creation
  * Added SRW counters statistics
  * Added ipv6 MCAST_JOIN_GROUP socket option.
  * Switch multicast autodiscovery from IP_ADD_MEMBERSHIP to MCAST_JOIN_GROUP

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 May 2013 21:45:05 +0400

elliptics (2.24.2.0) unstable; urgency=low

  * Link libelliptics like c++ library, since cache and srw are c++
  * Always read data (in lookup call path) without checking csum, instead check it in dnet_send_file_info() if special flag is set
  * Added cmake option to enable/disable external shared lib (module backend) build
  * it: really important note about GC
  * it: verify state transitions
  * cpp: do not lock key on iteration
  * cpp: use proper size on prepare
  * Fixed cocaine-to-elliptics loglevel mapping, info level now unified between two systems
  * it: python: simplified code
  * history: fixed return value handling
  * features: bump _XOPEN_SOURCE to 600
  * Fixed app@info handler.
  * rbtree: clang defines offsetof in stddef.h
  * it: prettify comments
  * it: added sanity and comments
  * it: move flow control to separate subroutine
  * it: improve logging
  * it: allow flow control of iterators
  * test: rework iterator test, added flow control
  * it: improved logging
  * test: set data flag on iteration
  * it: python: formatted IteratorRequest
  * it: python: exported id and action
  * it: python: added symbolic constants
  * it: manage iterator state in elliptics
  * it: init iterator_list at start
  * it: moved dnet_iterator_list_next_id_nolock
  * it: filled dnet_iterator_set_state stub
  * it: simplified list mgmt routines
  * it: added stubs for iterator actions
  * it: added subrotines for iterator state mgmt
  * Get rid of static builds

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 29 Apr 2013 01:07:42 +0400

elliptics (2.24.1.0) unstable; urgency=low

  * Written test for cas.
  * Fixed checksum calculation for extended format records used by CAS.
  * Fixed append test - now it vefifies result.
  * Fixed append of records in extended format.
  * Re-introduced missed lock in defrag.
  * Grammar nazzism.
  * Fixed rhel5 build.
  * Reworked RPM packages.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 25 Apr 2013 01:44:34 +0400

elliptics (2.24.0.0) unstable; urgency=low

  * Fixed write_cas by adding session::clone()
  * ext: check result of dnet_ext_hdr_write()
  * blob: use new flag name
  * ext: added ext version for future use
  * Changed indexes API, separated header to several files
  * dnet_ioclient -D should honor size
  * Secondary indexes implementation moved from functors to object methods
  * Moved to delete declaration of non-copyable objects
  * Module backend
  * New data iterators
  * No need to set size to 0 in dnet_read_file_raw()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 23 Apr 2013 23:54:34 +0400

elliptics (2.23.6.0) unstable; urgency=low

  * Changed write error report logic
  *  Only return wait error (usually -ETIMEOUT/-110) if wait internal
  *  status (assigned in write completion handler) was set to something
  *  except -ENXIO.
  *     
  *  -ENXIO is set by default and means no transactions were sent
  * dnet_schedule_io() should wakeup only one thread when new packet has been queued

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Apr 2013 21:56:08 +0400

elliptics (2.23.5.0) unstable; urgency=low

  * Added data_buffer class that provides possibility to write into data_pointer
  * Moved dnet_raw_id logical operations to public_header
  * Added raw transform interface. Use it in session class to hash dnet_raw_id.
  * Fixed segfault is empty data on cas is OK.
  * Changed behaviour of find_indexes. If no result found don't throw an exception, but provide empty list

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Apr 2013 17:34:11 +0400

elliptics (2.23.4.2) unstable; urgency=low

  * Revert module-backend

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Apr 2013 05:52:14 +0400

elliptics (2.23.4.1) unstable; urgency=low

  * Fixed write_cas.
  * Fixed reporting about the error if data is already actual

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Apr 2013 23:25:57 +0400

elliptics (2.23.4.0) unstable; urgency=low

  * Added write IO flag, which forces backends not to send file info on write completion
  * Added DNET_FLAGS_CHECKSUM cflag - when set, lookup command will send object checksum
  * Use functor name in indexes_unpack() to debug exceptions
  * session_indexes.hpp cleanup - hide private msgpack kitchen
  * Added cache parallelism
  * Made cache exception-free
  * Changed behaviour of write_cas request.
  * Use stack-allocated local cmd struct holder when calling transaction's complete() handler without creating transaction
  * Fixed potential NULL-pointer dereference in dnet_lookup_object()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Apr 2013 20:32:15 +0400

elliptics (2.23.3.0) unstable; urgency=low

  * Fixed memory leak at async_result aggregator connection
  * postpone upstream creation after we know application exists
  * write-cas should restart when receiving -EBADFD not -EINVAL
  * Added a bit more documentation
  * Use real error reply in async_result_handler::check(). Headers/lines cleanup.
  * Write text command name, not its number
  * Moved namespace/definitions/declarations from cpp file to separate index header.
  * Get rid of unused typedefs
  * use appropriate printf code for uint64_t variable (fixes warnings on 32bit systems)
  * removed unused zmq.hpp include
  * Fixed dnet_parse_addr() - no need to free addr
  * Fixed building with gcc-4.4

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Apr 2013 00:10:16 +0400

elliptics (2.23.2.0) unstable; urgency=low

  * Do not spam error log-level with unsuccessful partial reads
  * Put cocaine plugin into libcocaine-plugin-elliptics package
  * More cmake cleanups
  * Added msgpack-devel
  * Corrected used include paths
  * Use instantiated class in constructor
  * Added zeromq3-devel into spec

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Apr 2013 16:01:46 +0400

elliptics (2.23.1.0) unstable; urgency=low

  * Added cocaine-extension package
  * Some bulletproof default parameters for recovery tool
  * Changed API (Introduced async_result, iterators and more flexible callbacks)
  * Added verbosity to exec of ioclient
  * dnet_stat must use correct group ID when ids are specified in command line
  * Fixed dnet_parse_addr() back - it modifies provided address string for purpose
  * Get rid of cocaine-worker-generic
  * Implemented random read detection. Drop cache via posix_fadvice() and set appropriate dnet_io_req flag if random access is detected.
  * Allow to set various flags for dnet_io_req structure, which may affect its cleanup behaviour
  * Added ability to hold data in secondary indexes
  * Recover old signal mask in main thread, block all signals in spawned threads
  * Fixed cache write-cas
  * Added defragmentation status. Depend on eblob 0.18.3+
  * Do not include statically build cache into rpm
  * Use correct sources in ELLIPTICS_CLIENT_SRCS/ELLIPTICS_CLIENT_SRCS
  * New waiter implementation. Moved to public
  * '-' route table ID delimiter must be placed after reverse-first (last) ':' family/port/addr delimiter
  * Get rid of heavy unused part of dnet_file_info structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Apr 2013 00:29:40 +0400

elliptics (2.23.0.0-rc1) unstable; urgency=low

  * dnet_stat must use correct group ID when ids are specified in command line
  * Fixed dnet_parse_addr() back - it modifies provided address string for purpose
  * Get rid of cocaine-worker-generic
  * Implemented random read detection. Drop cache via posix_fadvice() and set appropriate dnet_io_req flag if random access is detected.
  * Allow to set various flags for dnet_io_req structure, which may affect its cleanup behaviour
  * Added ability to hold data in secondary indexes
  * Recover old signal mask in main thread, block all signals in spawned threads
  * Fixed cache write-cas
  * Added defragmentation status. Depend on eblob 0.18.3+
  * Do not include statically build cache into rpm
  * Use correct sources in ELLIPTICS_CLIENT_SRCS/ELLIPTICS_CLIENT_SRCS
  * New waiter implementation. Moved to public
  * '-' route table ID delimiter must be placed after reverse-first (last) ':' family/port/addr delimiter
  * Get rid of heavy unused part of dnet_file_info structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Apr 2013 19:22:37 +0400

elliptics (2.22.6.3) unstable; urgency=low

  * Fixed typo

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Mar 2013 06:48:42 +0400

elliptics (2.22.6.2) unstable; urgency=low

  * Fixed cache write CAS for nonexisting records

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Mar 2013 06:43:42 +0400

elliptics (2.22.6.1) unstable; urgency=low

  * Fixed write CAS for nonexisting records

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Mar 2013 00:58:53 +0400

elliptics (2.22.6.0) unstable; urgency=low

  * Added DNET_IO_FLAGS_CHECKSUM flag - return data checksum from server in io->parent. Refactor checksumming code.
  * Implemented per-session namespaces.
  * Added cmake/Elliptics into devel rpm package
  * ENOENT/ENXIO cleanup, run read recovery only if ENOENT or EBADFD is returned and only in groups which failed
  * ENOENT/ENXIO cleanup - use ENXIO when there is no address in route table.
  * Fix RPATH handling
  * Move headers to corresponding place. Now backends.h can be included as standalone header.
  * Update .gitignore
  * Get rid of leveldb append lock - key should be locked by elliptics here, otherwise we do not care if one write will overwrite another one

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Mar 2013 22:38:54 +0400

elliptics (2.22.5.1) unstable; urgency=low

  * Fixed read_latest in case of no metadata

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Mar 2013 03:42:05 +0400

elliptics (2.22.5.0) unstable; urgency=low

  * Added start_iterator to python binding
  * Added server-side iterator flags/type defines
  * Introduce server-side iteration control structure
  * Do not return error from dnet_db_list_iter() - this error will be propagated to all iterating threads and stop them
  * Added start_iterator API
  * Fixed bulk_read for empty request

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Mar 2013 04:40:35 +0400

elliptics (2.22.4.0) unstable; urgency=low

  * Depend on 0.10.0-rc5 cocaine

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Mar 2013 02:22:48 +0400

elliptics (2.22.3.1) unstable; urgency=low

  * Guard leveldb's append/offset writes, since they are actually read-modify-write cycles

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Mar 2013 03:01:25 +0400

elliptics (2.22.3.0) unstable; urgency=low

  * Added leveldb offset and append write support
  * Return error for CAS write if ->checksum() is not supported
  * Added leveldb checksum function
  * Connection refused error message cleanup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Mar 2013 02:51:42 +0400

elliptics (2.22.2.0) unstable; urgency=low

  * Return status of defragmentation request
  * Return node's address, not client's one.
  * Added leveldb->lookup()
  * finder::parse_lookup() should not drop dnet_file_info if no filename provided
  * Changed exec async API
  * Moved groups to dnet_session
  * Moved cflags/ioflags to dnet_session
  * Added wait timeout to session

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Mar 2013 00:10:25 +0400

elliptics (2.22.1.2) unstable; urgency=low

  * Skip route table entries without addr list

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 12 Mar 2013 01:29:45 +0400

elliptics (2.22.1.1) unstable; urgency=low

  * Simplify dnet_cmd_route_list() - allocate and send under state_lock route replies
  * If log levels match, log it
  * Do not use modern for (type &var : container) loop, use old-school iterators, since the former is not supported in gcc 4.4
  * Use std::exeption_ptr() check instead of NULL cast, which is not supported in gcc 4.4

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 12 Mar 2013 01:09:23 +0400

elliptics (2.22.1.0) unstable; urgency=low

  * Always request stats with DNET_ATTR_CNTR_GLOBAL flag set to grab global node's counters
  * dnet_log_raw() should use <= for log-level comparison
  * Added secondary indexes
  * Added msgpack dependency
  * Moved dnet_ioclient to new exec API
  * Added new client exec API
  * Fixed connection to 2.22 servers
  * Let's all exec commands block if they do not have sph
  * Updated cocaine config
  * Fixed segfault at connection to elder servers

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Mar 2013 22:18:49 +0400

elliptics (2.22.0.0) unstable; urgency=low

  * Added high-level write_cas method
  * Fixed memory leak
  * Started exception refactoring
  * Added convience methods for data_pointer
  * Fixed bulk_read
  * Added support for several io threads for client
  * Added logical route groups to support multiple addresses in config.
  * Do not try to initialize srw if no config specified. Otherwise fail whole node initialization if srw init failed.
  * Send discovery at startup
  * Use bp=boost::python namespace 

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Mar 2013 21:49:27 +0400

elliptics (2.21.4.3) unstable; urgency=low

  * Use poll() in autodiscovery. Socket must be bound to recv data.
  * Python test files update
  * Added leveldb metadata write() error description

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Feb 2013 23:24:57 +0400

elliptics (2.21.4.2) unstable; urgency=low

  * Depend on 0.10.0-rc3+ cocaine

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Feb 2013 01:38:40 +0400

elliptics (2.21.4.1) unstable; urgency=low

  * Depend on 0.10.0-rc2+ cocaine
  * elliptics-dev should depend on eblob - there is no eblob-dev package
  * IO flags comment update
  * Remove ack flag if write to cache-only is successful
  * Added file_info reply to cache-only write requests

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Feb 2013 00:40:54 +0400

elliptics (2.21.4.0) unstable; urgency=low

  * Temporarily depend elliptics-dev on eblob-dev
  * Fixed dnet_find
  * Fixed remove method
  * Fixed bulk_read

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Feb 2013 20:30:55 +0400

elliptics (2.21.3.3) unstable; urgency=low

  * Depend on 0.10.0-rc1 cocaine and 0.18.2 eblob
  * Get rid of eblob metadata from leveldb

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Feb 2013 02:08:59 +0400

elliptics (2.21.3.2) unstable; urgency=low

  * Fixed read_latest method
  * Added wireshark dissector
  * Fixed cmake package config directory name
  * Fixed packages depends
  * Install cmake package config with elliptics-dev package
  * Create cmake package config

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Feb 2013 21:05:29 +0400

elliptics (2.21.3.1) unstable; urgency=low

  * Fixed statistics behaviour in cpp module
  * array_result_holder should return vector of templated types, not ints
  * prepare_latest_callback() should break after it found entry in sorted array with dnet_id->group_id and swapped it with the first one

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 06 Feb 2013 21:00:28 +0400

elliptics (2.21.3.0) unstable; urgency=low

  * Sync error codes used in other backends.
  * elliptics-dev/dbg must depend on elliptics with the same version
  * Get rid of smack backend in favour of leveldb
  * Updated leveldb backend config

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 02 Feb 2013 20:38:38 +0400

elliptics (2.21.2.2) unstable; urgency=low

  * Added signal blockers per threads
  * Do not collect reply messages in srw, send reply to client as soon as it was received by server.
  * Depend on 0.18.1+ eblob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 30 Jan 2013 23:53:30 +0400

elliptics (2.21.2.1) unstable; urgency=low

  * New eblob dependency
  * Do not build older elliptics versions

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 26 Jan 2013 18:40:13 +0400

elliptics (2.20.2.1) unstable; urgency=low

  * New eblob dependency

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 26 Jan 2013 18:30:27 +0400

elliptics (2.21.2.0) unstable; urgency=low

  * Speed up read commands - use 1 data packet instead of data + ack
  * Fixed multigroup callback
  * Fixed groups iterating in cpp binding
  * Added overload for node::add_remote
  * Put reply/enqueue outside of the lock and use shared_ptr instead of iterator->shared_ptr
  * Fixed 0-byte position in dnet_dump_id_len_raw()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Jan 2013 21:51:39 +0400

elliptics (2.21.1.0) unstable; urgency=low

  * Send reply back to blocked client not from upstream destructor, but when final reply message is received.
  * Optimize string split and digit-to-string conversion
  * Fixed segfault at Logger delete
  * Bugfixes, removed random freeze on remove request
  * ioclient must setup ID if it wants blocked request
  * Removed unneeded debug

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 18 Jan 2013 00:45:43 +0400

elliptics (2.21.0.0) unstable; urgency=low

  * Added asynchronous client API to C++ binding
  * Introduced high-level result types in C++ binding
  * Removed synchronous client API from C core
  * Moved to C++ binding to C++11
  * Use std classes instead of boost one where possible

 -- Ruslan Nigmatullin <euroelessar@yandex.ru>  Tue, 15 Jan 2013 21:12:13 +0400

elliptics (2.20.2.0) unstable; urgency=low

  * Removed app_watcher class
  * Do not use app_watcher blocking helper - enqueue directly.
  * Fixed failure path in pool growing route. Do not grow non-blocking IO pool at all
  * proper srw command split in  dnet_ioclient
  * Better id logs in srw
  * Use correct ID in dnet_send_cmd_single()
  * Do not mess with rpath
  * Fixed bug in leveldb backend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Jan 2013 02:37:38 +0400

elliptics (2.20.1.9) unstable; urgency=low

  * Added snappy dep

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 28 Dec 2012 18:44:23 +0400

elliptics (2.20.1.8) unstable; urgency=low

  * Elliptics must install 0.17.8+ eblob in this version

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 28 Dec 2012 00:18:49 +0400

elliptics (2.20.1.7) unstable; urgency=low

  * Do not auto-recover keys when timeout happens

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 27 Dec 2012 21:23:36 +0400

elliptics (2.20.1.6) unstable; urgency=low

  * Depend on 0.17.8+ eblob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 27 Dec 2012 20:54:36 +0400

elliptics (2.20.1.5) unstable; urgency=low

  * Fixed lookup_addr in python
  * Added _XOPEN_SOURCE define to cleanup build on lucid

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 25 Dec 2012 22:52:52 +0400

elliptics (2.20.1.4) unstable; urgency=low

  * Use atomic_t for sph::src_key

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 20 Dec 2012 21:52:45 +0400

elliptics (2.20.1.3) unstable; urgency=low

  * Use client's provided ID when possible in dnet_send_cmd_single()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 20 Dec 2012 21:23:20 +0400

elliptics (2.20.1.2) unstable; urgency=low

  * Do not try to send data directly from dnet_io_req_queue() (calling thread context), queue request instead
  * Remove unused package_dir
  * Return error from dnet_send_request() and propagate it back to dnet_send*() calllers.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 20 Dec 2012 19:59:49 +0400

elliptics (2.20.1.1) unstable; urgency=low

  * Greatly reduce ACK latencies
  * Fixed smack's sync-to-disk interval commit
  * Added leveldb into default config

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Dec 2012 23:23:35 +0400

elliptics (2.20.1.0) unstable; urgency=low

  * Added index_block_bloom_length and index_block_size eblob config parameters
  * Added blob_size_limit eblob parameter
  * Depend on 0.17.7 eblob and higher
  * Detect correct elliptics version in setup.py
  * Added more informative IO errors to python binding
  * Python binding update to new API
  * Added exception transformation for python
  * Fixed exception code for Item not found

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Dec 2012 22:16:55 +0400

elliptics (2.20.0.1) unstable; urgency=low

  * Async 'blocking' exec command.
  * Export dnet_send_ack()
  * More debug logs when sending reply
  * Recover README

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 Dec 2012 01:31:05 +0400

elliptics (2.20.0.0) unstable; urgency=low

  * Moved cflags, ioflags and typo into session from API
  * Added compare-and-swap write
  * Moved elliptics::session to separate file
  * Callbacks redesign in cpp binding
  * Use boost::thread instead of plain pthreads
  * Added proper exceptions
  * Logger and node redesign in C++ binding
  * Fixed leveld initialization
  * leveldb backend: DNET_CMD_DEL_RANGE
  * leveldb backend: range read support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 07 Dec 2012 23:17:27 +0400

elliptics (2.19.2.8) unstable; urgency=low

  * dnet_remove_object_raw() must return positive number of transactions sent

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 26 Nov 2012 18:02:22 +0400

elliptics (2.19.2.7) unstable; urgency=low

  * Fixed dnet_mix_states() when ID is null

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 22 Nov 2012 21:06:17 +0400

elliptics (2.19.2.6) unstable; urgency=low

  * Tune nonblocking pool growing policy
  * All dnet_remove*() functions should return error, if ack returned negative status.
  * poll() uses msecs as timeout

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 21 Nov 2012 20:35:41 +0400

elliptics (2.19.2.5) unstable; urgency=low

  * Added atomic number of available IO threads, only grow up pool if we have blocked sph and there are no threads available.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 12 Nov 2012 02:00:40 +0400

elliptics (2.19.2.4) unstable; urgency=low

  * Added atomic number of available IO threads, only grow up pool if we have blocked sph and there are no threads available.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 12 Nov 2012 01:09:24 +0400

elliptics (2.19.2.4) unstable; urgency=low

  * Added temoporary debug

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 07 Nov 2012 15:30:38 +0400

elliptics (2.19.2.3) unstable; urgency=low

  * Only enlarge non-blocking pool when there is blocking sph in the pool.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Nov 2012 23:44:39 +0400

elliptics (2.19.2.2) unstable; urgency=low

  * Fixed python installation in Lucid
  * Remove signal setup in library. Do not block signals on ioserv exit
  * Only write error message when real error occurs in leveldb_backend_read()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 02 Nov 2012 19:41:04 +0400

elliptics (2.19.2.1) unstable; urgency=low

  * Fixed precise build

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 26 Oct 2012 22:56:02 +0400

elliptics (2.19.2.0) unstable; urgency=low

  * When creating new state we should not send auth/join commands to itself
  * Return back periodic route table check
  * Added LevelDB backend

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 26 Oct 2012 21:42:00 +0400

elliptics (2.19.1.0) unstable; urgency=low

  * Depend elliptics-dev on elliptics with (>= ${Source-Version}) version
  * Do not check for n->st when setting up new server node
  *     When it is called from dnet_server_node_create()->dnet_state_create()
  *     there is no n->st, and that's exactly the path where server

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 25 Oct 2012 03:28:05 +0400

elliptics (2.19.0.1) unstable; urgency=low

  * Use autogenerated major/minor elliptics versions. Whole version is being read from debian/changelog file
  * Fix CMake file with missing boost libraries
  * Bump ABI version (missed from 2.18->2.19 upgrade)
  * Drop site-packages from elliptics-client
  * Depend on >= 0.9.4 cocaine

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Oct 2012 21:12:48 +0400

elliptics (2.19.0.0) unstable; urgency=low

  * Added sessions - this allows to configure and set per-request parameters (like groups)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Oct 2012 19:26:46 +0400

elliptics (2.18.3.2) unstable; urgency=low

  * Fixed reply size calculation
  * Unify srw log rules
  * Fixed pool growing policy
  * Updated debian package rules

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Oct 2012 12:12:50 +0400

elliptics (2.18.3.1) unstable; urgency=low

  * When running recovery-on-read do not write io attribute header

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Oct 2012 23:21:48 +0400

elliptics (2.18.3.0) unstable; urgency=low

  * Grow IO pools on demand
  * Added automatic recovery on read command:
  *      if object didn't exist in previously read group,
  *      it will be written when read from the next group succeed
  * Documentation update
  * Added multicast autodiscovery
  * If state is already exist, do not fail with error
  * Fixed the ugliest debian python installation
  * Added new python bindings
  * Do not try to run command if srw was not initialized
  * Populate cache on READ command when DNET_IO_FLAGS_CACHE ioflag is set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Oct 2012 12:47:00 +0400

elliptics (2.18.2.1) unstable; urgency=low

  * Added c++/python bindings for cache write operations (including timeout)
  * Added remove-from-disk cache operation: when such flag is set (at write time)"
  *     if object is removed from cache, it is also removed from disk
  * Increase example number of non-blocking io threads
  * Added 'overwrite commits write' comment

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 20 Sep 2012 23:47:29 +0400

elliptics (2.18.1.2) unstable; urgency=low

  * dnet_backend_log_raw() should use dnet_backend_check_log_level() to check log level
  * Added startup stack size check
  * Cocaine job has to be created only when it can be queued

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Sep 2012 23:40:39 +0400

elliptics (2.18.1.1) unstable; urgency=low

  * Update version num

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 14 Sep 2012 15:02:59 +0400

elliptics (2.18.0.1) unstable; urgency=low

  * New interface for execution, reply and chaining
  * Do not strip rpath
  * Fixed server node cleanup bug when it destroyed locks first while IO threads could still use them
  * dnet_send_cmd_raw() must always wait for ack
  * Fixed thread creation bug in app_watcher when application does not exist
  * Added -g flag to elliptics build
  * Use weak symbols instead of stubs in client lib, since server also links to it and in Fedora it ends up using stubs from client lib
  * Search for 0mq only of cocaine is enabled
  * Update debian packaging
  * Fixed build-depends

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Sep 2012 03:58:37 +0400

elliptics (2.17.0.4) unstable; urgency=low

  * elliptics-client must replace old-school elliptics-2.10

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 31 Aug 2012 20:35:34 +0400

elliptics (2.17.0.3) unstable; urgency=low

  * Added python-support to dep list
  * Use correct package name in shlibs

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 30 Aug 2012 21:02:46 +0400

elliptics (2.17.0.2) unstable; urgency=low

  * Switch to cmake from autoconf

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 22 Aug 2012 20:16:11 +0400

elliptics (2.17.0.1) unstable; urgency=low

  * Depend on eblob 0.17.1 and higher
  * Use log level instead of log mask
  * Depend on smack 0.5.0 and higher
  * Added cdbs dep
  * Added in-memory (optionally disk-backed) LRU cache
  * Get rid of boost-filesystem
  * Split code (and debian package) to client/server libs
  * New unlink interfaces
  * Added ioflags to ioclient
  * If lookup returned error, proceed read-latest with default order
  * Let DNET_CMD_DEL use dnet_io_attr structure too

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 Aug 2012 19:08:58 +0400

elliptics (2.16.0.1) unstable; urgency=low

  * Added possibility to start defragmentation on demand
  * Added reserved 'hostname' word for local address
  * Added cleanup call into node destruction path, which fixes double free error in config error path
  * Implemented blocking exec commands
  * Refactor pools of workers
  * Set cocaine log level based on elliptics log mask
  * Completely created client library
  * Fixed json example path

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 08 Aug 2012 12:12:48 +0400

elliptics (2.15.0.1) unstable; urgency=low

  * Send correct answer in smack_write
  * New bulk_read()
  * New event string for application invocation
  * Corrected changelog
  * Depend on smack 0.4.0 and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 24 Jul 2012 16:45:02 +0400

elliptics-2.10 (2.14.1.4) unstable; urgency=low

  * Log all client job errorrs into app/.log file in elliptics
  * Set nocsum flags in io-attr when it is set in global node's config

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 02 Jul 2012 14:32:03 +0400

elliptics-2.10 (2.14.1.3) unstable; urgency=low

  * Depend on smack 0.3.0 and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jun 2012 20:36:13 +0400

elliptics-2.10 (2.14.1.2) unstable; urgency=low

  * Use smack_total_elements() to get number of records

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Jun 2012 17:12:13 +0400

elliptics-2.10 (2.14.1.1) unstable; urgency=low

  * Disable signals in library and enable in server and ioclient
  * Added cocaine library documentation
  * Added smack configuration
  * Sync with upstream smack repo

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Jun 2012 14:24:13 +0400

elliptics-2.10 (2.14.0.7) unstable; urgency=low

  * Fixed typo in smack config parser

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jun 2012 23:45:13 +0400

elliptics-2.10 (2.14.0.6) unstable; urgency=low

  * Sink srw log into app + ".log" object in elliptics

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jun 2012 21:45:13 +0400

elliptics-2.10 (2.14.0.5) unstable; urgency=low

  * Added SMACK backend depends

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jun 2012 19:54:13 +0400

elliptics-2.10 (2.14.0.4) unstable; urgency=low

  * Drop cocaine plugin dependencies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jun 2012 15:27:13 +0400

elliptics-2.10 (2.14.0.3) unstable; urgency=low

  * Added new cocaine package dependencies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jun 2012 13:57:13 +0400

elliptics-2.10 (2.14.0.2) unstable; urgency=low

  * Build srw fix (use weak symbol for dnet_log_raw())
  * Added new eblob bit to config documentation, drop unused parameters
  * Fixed write response generation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Jun 2012 18:18:13 +0400

elliptics-2.10 (2.14.0.1) unstable; urgency=low

  * Use cocaine workers for server-side
  * Drop dnet_attr structure
  * Optimize read (do not send ack if there is data)
  * Use ioremap::elliptics namespace
  * Added ::push() - nonblocking exec

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Jun 2012 03:15:13 +0400

elliptics-2.10 (2.13.0.9) unstable; urgency=low

  * Do not allow zero-sized reads
  * Do not double-close python init file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 29 Apr 2012 01:10:13 +0400

elliptics-2.10 (2.13.0.8) unstable; urgency=low

  * Added new lookup() methods to c++/python bindings. Patch by Anton Kortunov <toshik@yandex-team.ru>
  * If we fail to open log file, dup2() stdout/stderr to /dev/null in spawned worker process

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 28 Apr 2012 01:01:13 +0400

elliptics-2.10 (2.13.0.7) unstable; urgency=low

  * More mess with 012 file descriptors - dup them to /dev/null when going background, reopen to log file in srw worker
  * Use correct F_SETFD/FD_CLOEXEC
  * Use old-school fcntl() instead of accept4() and epoll_create1()
  * Allow script execution without cmd-line

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Apr 2012 21:18:13 +0400

elliptics-2.10 (2.13.0.6) unstable; urgency=low

  * Added srw config options
  * Added O_CLOEXEC flags
  * Added new configs (for nginx and fastcgi frontend) and python example
  * Return sub data from smack_write() call - this is needed for fastcgi frontend
  * Let dnet_ioclient write file by ID
  * Added smack backend wrapper

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 27 Apr 2012 00:39:13 +0400

elliptics-2.10 (2.13.0.5) unstable; urgency=low

  * Build dependencies update
  * Do not write metadata when appropirate bit is set in node->flags
  * Update documentation about blob flags

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 6 Apr 2012 00:41:13 +0400

elliptics-2.10 (2.13.0.4) unstable; urgency=low

  * Updated state mixing algorithm
  * Added defrag_timeout, defrag_percentage and blob_size options to file backend

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Mar 2012 17:20:13 +0400

elliptics-2.10 (2.13.0.3) unstable; urgency=low

  * Allow ioclient to read/write data in different columns
  * Hardlink script should overwrite data
  * Fixed file read/write with different column
  * Use correct pipe path, which includes pid
  * Use correct structure size for dentries and extended logging
  * Do not set name for main process

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 19 Mar 2012 01:03:13 +0400

elliptics-2.10 (2.13.0.2) unstable; urgency=low

  * Use exactly specified in config socket family
  * Obsolete srw by ellipitcs
  * Revert "Use X bits from operation key to find a lock instead of random hashing"
  * Added proper sigchild handling
  * spec update - added libsrw.so* files
  * Dropped srw dependency

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 Mar 2012 20:06:13 +0400

elliptics-2.10 (2.13.0.1) unstable; urgency=low

  * Added srw

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 11 Mar 2012 21:19:13 +0400

elliptics-2.10 (2.12.0.1) unstable; urgency=low

  * Depend on 0.15 eblob: added new defragmentation parameters into config
  * Propagate prepare_write() and friends return values back to callers - changed API

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 29 Feb 2012 22:19:13 +0400

elliptics-2.10 (2.11.1.7) unstable; urgency=low

  * Get rid of virtually unused and unneded eblob generation tools. It can be replaced by trivial python scripts
  * Updated python scripts to use new eblob class
  * exec is reserved name in python, use exec_script for execution method name

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 19 Feb 2012 00:13:13 +0400

elliptics-2.10 (2.11.1.6) unstable; urgency=low

  * Added possibility to read metadata from file and dump to log
  * Added remove_keys_from_storage_found_removed_in_eblob.py
  * Added local merge iterator written in python. Is not optimal, but quite fast.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 16 Feb 2012 22:52:13 +0400

elliptics-2.10 (2.11.1.5) unstable; urgency=low

  * Execute CHECK commands with NOLOCK flag

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 14 Feb 2012 21:34:13 +0400

elliptics-2.10 (2.11.1.4) unstable; urgency=low

  * Use correct eblob path for statvfs() request

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 11 Feb 2012 23:22:13 +0400

elliptics-2.10 (2.11.1.3) unstable; urgency=low

  * Set id.type to 0 where appropriate
  * Request statistics with DNET_ATTR_NOLOCK flag set
  * Fixed pohmelfs_rename.py

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 8 Feb 2012 22:55:13 +0400

elliptics-2.10 (2.11.1.2) unstable; urgency=low

  * Process checksum flags according to aflags and ioflags

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 6 Feb 2012 23:55:13 +0400

elliptics-2.10 (2.11.1.1) unstable; urgency=low

  * Added start/num parameters to iterate over selected number of blobs.
  * Depend on 0.14.1 blob and higher where it is implemented.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 1 Feb 2012 00:58:13 +0400

elliptics-2.10 (2.11.0.15) unstable; urgency=low

  * Added readdir script
  * Dropped content length manipulation from srw/pohmelfs_inode_info_insert.py
  * Use dnet_process_meta instead of dnet_process_cmd_raw to prevent deadlocks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 26 Jan 2012 23:11:13 +0400

elliptics-2.10 (2.11.0.14) unstable; urgency=low

  * Reserve some space for directory content
  * Added pohmelfs_read_latest_groups.py script
  * Implemented prepare-latest helper, which returns timestamp sorted groups which contain requested id
  * If we have more data to send, set only DNET_FLAGS_MORE flag, not erase others
  * Rename cpp bindings
  * Fixed range requests without limits

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 24 Jan 2012 00:28:13 +0400

elliptics-2.10 (2.11.0.13) unstable; urgency=low

  * Sort keys on server side in range requests
  * Disable eblob_gen for now
  * Address new binutils issues (gcc 4.6 compilation fixes)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 17 Jan 2012 21:08:13 +0400

elliptics-2.10 (2.11.0.12) unstable; urgency=low

  * Trying to address new binutils issues
  * Fill with zeroes all io threads structures
  * Set io.num to content size+offset in write_data_wait() - it allows to use prepare/commit flags

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 21 Dec 2011 04:31:13 +0400

elliptics-2.10 (2.11.0.11) unstable; urgency=low

  * Implemented check for start/stop update timestamp
  * Added cache tests in test.cpp

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 20 Dec 2011 01:15:13 +0400

elliptics-2.10 (2.11.0.10) unstable; urgency=low

  * Added configurable two-queue cache for read data by Anton Kortunov <toshic.toshic@gmail.com>

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Dec 2011 22:00:13 +0400

elliptics-2.10 (2.11.0.9) unstable; urgency=low

  * Reopen log file on sighup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 12 Dec 2011 20:36:59 +0400

elliptics-2.10 (2.11.0.8) unstable; urgency=low

  * Set DNET_FLAGS_NOLOCK for route/reverse lookup request/reply commands
  * Added memory_test_pohmelfs() autotest
  * Added gc calls into pohmelfs methods
  * Fixed exception string generation for null ids
  * Added small memory/leak test

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 9 Dec 2011 21:15:59 +0400

elliptics-2.10 (2.11.0.7) unstable; urgency=low

  * Use eblob_read_nocsum() if DNET_IO_FLAGS_NOCSUM is set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 2 Dec 2011 22:06:59 +0400

elliptics-2.10 (2.11.0.6) unstable; urgency=low

  * Cleanup unused variables
  * Fixed reply cmd->flags initialization
  * Use boost::filesystem v2
  * Fixes in bulk_read and bulk_write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 1 Dec 2011 02:27:59 +0400

elliptics-2.10 (2.11.0.5) unstable; urgency=low

  * Implemented pool of non-blocking threads for recursive commands.
  * Dropped metadata csum support in favour of eblob embedded checksums.
  * Added bulk_write operation.
  * Added sstable parser into python module

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 28 Nov 2011 15:56:59 +0400

elliptics-2.10 (2.11.0.4) unstable; urgency=low

  * Added nolocking IO thread

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Nov 2011 22:38:03 +0400

elliptics-2.10 (2.11.0.3) unstable; urgency=low

  * Added oplock_num config parameter
  * Added non-blocking thread checks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Nov 2011 21:18:13 +0400

elliptics-2.10 (2.11.0.2) unstable; urgency=low

  * Aflags/lock cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Nov 2011 05:39:46 +0400

elliptics-2.10 (2.11.0.1) unstable; urgency=low

  * Added operations locks. Now all commands are processed with
    single-machine-atomicity
  * Added server-side scripts

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Nov 2011 03:50:21 +0400

elliptics-2.10 (2.10.4.13) unstable; urgency=low

  * Only perform blob write if io->size is not zero

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Nov 2011 04:19:15 +0400

elliptics-2.10 (2.10.4.12) unstable; urgency=low

  * Initialize srw after node

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Nov 2011 05:51:22 +0400

elliptics-2.10 (2.10.4.11) unstable; urgency=low

  * Do not chroot into history environment, since it is most likely incomplete

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Nov 2011 05:42:32 +0400

elliptics-2.10 (2.10.4.10) unstable; urgency=low

  * Do not csum read when DNET_IO_FLAGS_NOCSUM ioflag is set
  * When doing partial read, checksum whole file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Nov 2011 04:55:37 +0400

elliptics-2.10 (2.10.4.9) unstable; urgency=low

  * cpp tests update
  * Return -ENOTSUP if srw is not initialized
  * Do not reset join state to RECONNECT after it has been created
  * Added stall_count as a configurable parameter
  * Added BULK_READ command

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 19 Nov 2011 01:36:52 +0400

elliptics-2.10 (2.10.4.8) unstable; urgency=low

  * Fixed range counters
  * Added ::remove() methods into python binding
  * Remove all types if -1 as id->type is specified
  * RHEL build must depend on eblob-devel >= 0.12.18 libsrw-devel >= 0.2.2

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Nov 2011 18:32:37 +0400

elliptics-2.10 (2.10.4.7) unstable; urgency=low

  * Moved some objects from interface.h to packet.h
  * Added range counters
  * DNET_IO_FLAGS_PLAIN_WRITE must differ from DNET_IO_FLAGS_NOCSUM
  * Use IP_TOS instead of SO_PRIORITY to set tos bits
  * srw is called libsrw in rhel builds
  * Depend on 0.12.18 eblob and 0.2.2 srw

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 14 Nov 2011 16:20:29 +0400

elliptics-2.10 (2.10.4.6) unstable; urgency=low

  * Depend on 0.2.1 srw and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 03 Nov 2011 03:13:18 +0400

elliptics-2.10 (2.10.4.5) unstable; urgency=low

  * Added binary data support in srw

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 03 Nov 2011 02:37:06 +0400

elliptics-2.10 (2.10.4.4) unstable; urgency=low

  * Do not fail node initialization if srw is not initialized

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 01 Nov 2011 03:13:04 +0400

elliptics-2.10 (2.10.4.3) unstable; urgency=low

  * blob_send modified to send all columns if id.type == -1
  * Do not depend elliptics build on libssl
  * eblob/srw autoconf updates
  * Do not return 1 from blob_write when data was compressed, return 0, since
    there was no error

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 31 Oct 2011 22:04:10 +0400

elliptics-2.10 (2.10.4.2) unstable; urgency=low

  * Do not call dnet_convert_io_attr for DNET_CMD_DEL command
  * Added srw dependency

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 25 Oct 2011 21:29:49 +0400

elliptics-2.10 (2.10.4.1) unstable; urgency=low

  * Decreased WRITE latency
  * Use CORK for write blocks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 21 Oct 2011 19:20:18 +0400

elliptics-2.10 (2.10.4.0) unstable; urgency=low

  * Added ioprio call inside check
  * More example ioserv.conf comments
  * Added client/server network priorities (man 7 socket -> IP_PRIORITY)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Oct 2011 23:22:19 +0400

elliptics-2.10 (2.10.3.9) unstable; urgency=low

  * Fixed memory allocation in range-delete

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Oct 2011 05:41:55 +0400

elliptics-2.10 (2.10.3.8) unstable; urgency=low

  * Added authentification support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 12 Oct 2011 00:52:54 +0400

elliptics-2.10 (2.10.3.7) unstable; urgency=low

  * Only set BLOB_DISK_CTL_NOCSUM if DNET_IO_FLAGS_NOCSUM is set
  * Added dnet_get_routes function
  * Added server-side scripting support
  * Example ioserv.conf update
  * Spec update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 Oct 2011 01:23:36 +0400

elliptics-2.10 (2.10.3.6) unstable; urgency=low

  * Fixed dnet_cmd_bulk_check

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Sep 2011 19:22:43 +0400

elliptics-2.10 (2.10.3.5) unstable; urgency=low

  * Added overwrite io flag. Depend on blob 0.12.5+ where it is implemented

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Sep 2011 01:07:33 +0400

elliptics-2.10 (2.10.3.4) unstable; urgency=low

  * Added DNET_DEL_RANGE command

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Sep 2011 22:07:55 +0400

elliptics-2.10 (2.10.3.3) unstable; urgency=low

  * Depend on 0.12.3 eblob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 21 Sep 2011 19:40:02 +0400

elliptics-2.10 (2.10.3.2) unstable; urgency=low

  * Only doing plain write when io->size is not zero

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Sep 2011 03:16:52 +0400

elliptics-2.10 (2.10.3.1) unstable; urgency=low

  * Iterate over all blobs inside check copies/merge

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 Sep 2011 15:10:55 +0400

elliptics-2.10 (2.10.3.0) unstable; urgency=low

  * Depend on 0.12.0 eblob and higher
  * Added append support for eblob and auto test

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 13 Sep 2011 00:44:39 +0400

elliptics-2.10 (2.10.2.3) unstable; urgency=low

  * dnet_write_metadata() requires mc.id to be set
  * decrease log level in dnet_send_read_data()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 02 Sep 2011 20:07:11 +0400

elliptics-2.10 (2.10.2.2) unstable; urgency=low

  * dnet_mix_states() should use selected groups for weights

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 31 Aug 2011 23:22:41 +0400

elliptics-2.10 (2.10.2.1) unstable; urgency=low

  * Added config flag to randomize groups
  * Use close_on_exit flag instead of duplicating file descriptor

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 31 Aug 2011 21:46:29 +0400

elliptics-2.10 (2.10.2.0) unstable; urgency=low

  * Get rid of unused config fields
  * File backend blob logger should be set to dnet_config one, since they are
    binary compatible
  * Added dnet_create_metadata(), use it in cpp binding and eblob generator
  * Added records_in_blob config parameter and depends on 0.11.0 eblob and
    higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 31 Aug 2011 00:24:56 +0400

elliptics-2.10 (2.10.1.21) unstable; urgency=low

  * dnet_addr.addr_len must be set prior its usage

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Aug 2011 00:30:15 +0400

elliptics-2.10 (2.10.1.20) unstable; urgency=low

  * Added error logs for status update in dnet_ioclient
  * Spelling fix
  * Use C-provided params for completion handling, this fixes parallel
    callback invocation case. From Anton Kortunov <toshik@yandex-team.ru>

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 28 Aug 2011 05:29:49 +0400

elliptics-2.10 (2.10.1.19) unstable; urgency=low

  * Client must have SINGLE io thread

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 26 Aug 2011 00:41:12 +0400

elliptics-2.10 (2.10.1.18) unstable; urgency=low

  * Add "override groups with replicas" option to check copies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 24 Aug 2011 01:52:55 +0400

elliptics-2.10 (2.10.1.17) unstable; urgency=low

  * Client nodes by default should have more io/net threads, in case some
    transaction reply takes too long (in particular this happens, when we
    download route table, try to connect to all nodes, but some of them are
    hidden behind firewall.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 20 Aug 2011 22:17:43 +0400

elliptics-2.10 (2.10.1.16) unstable; urgency=low

  * Use ctl.local_offset instead of io.offset to send data in eblob_send()
  * Remove data on DNET_CMD_DEL command no matter how metadata processing
    finished

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Aug 2011 18:58:45 +0400

elliptics-2.10 (2.10.1.15) unstable; urgency=low

  * Fixed size/offset order in cpp binding
  * Only cheksum data for verificatino if metadata csum is not filled with
    zeroes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 12 Aug 2011 00:09:53 +0400

elliptics-2.10 (2.10.1.14) unstable; urgency=low

  * Use realloc() to stack multiple write replies one after another

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Aug 2011 02:53:55 +0400

elliptics-2.10 (2.10.1.13) unstable; urgency=low

  * Send dnet_file_info structure in write reply. Fixed csum copy in
    dnet_send_file_info()
  * ->file_info() callback should dig into metadata only for checksum and
    meta_update calls. In case of meta_update do not fail, if there is no
    metadata.
  * Added aflags into ioclient. Use -I id to read data if available.
  * Added compressed write test.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Aug 2011 02:36:24 +0400

elliptics-2.10 (2.10.1.12) unstable; urgency=low

  * Depend on 0.10.0 eblob and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Aug 2011 06:13:33 +0400

elliptics-2.10 (2.10.1.11) unstable; urgency=low

  * Always request dnet_file_info structure in ->file_info() callback
  * Do not request checksums in reads, which do not have metadata in test
    utils

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 10 Aug 2011 05:50:41 +0400

elliptics-2.10 (2.10.1.10) unstable; urgency=low

  * Removed dnet_verify_checksum_io() and dnet_meta_read_checksum()
  * Pushed csum verification and dnet_file_info fill down to backends to
    reduce number of lookups
  * Do not print meaningless number of written groups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Aug 2011 00:27:15 +0400

elliptics-2.10 (2.10.1.9) unstable; urgency=low

  * Do not print ENOENT error for DNET_CMD_READ_RANGE command
  * Added attribute flags for sorted range output
  * Return little-endian size in read_data_range()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Aug 2011 02:06:49 +0400

elliptics-2.10 (2.10.1.8) unstable; urgency=low

  * Exit from range loop early when detected that next.id > end.id. Only copy
    data when it is in limit(start, num) window.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Aug 2011 00:39:38 +0400

elliptics-2.10 (2.10.1.7) unstable; urgency=low

  * Fixed infinite iteration loop in range lookup processing
  * Added lookup test

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Aug 2011 22:56:53 +0400

elliptics-2.10 (2.10.1.6) unstable; urgency=low

  * Added Replaces and Provides directives to debian/control
  * Process READ and WRITE commands for metadata

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 04 Aug 2011 17:10:00 +0300

elliptics-2.10 (2.10.1.5) unstable; urgency=low

  * Depend on eblob 0.9.6 and higher
  * Remove object if metadata processing did not return error
  * Call metadata removal when DNET_CMD_DEL requested
  * Expose range reply in C++ binding as std::vector<std::string>. Python
    binding uses list
  * Daemon mode for dnet_check

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Aug 2011 21:12:56 +0400

elliptics-2.10 (2.10.1.4) unstable; urgency=low

  * Do not fail if dnet_read_range() returned no data AND no error. Read
    returned data only if it is not NULL
  * Added test_range_request()
  * Removed '-Replaces:' directive from debian/control

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Aug 2011 17:27:26 +0400

elliptics-2.10 (2.10.1.3) unstable; urgency=low

  * Change package replace/provide list

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 30 Jul 2011 00:47:13 +0400

elliptics-2.10 (2.10.1.2) unstable; urgency=low

  * Change package replace/provide list
  * Do not allow EBLOB_TYPE_META column update without DNET_IO_FLAGS_META flag
    set

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 30 Jul 2011 00:28:35 +0400

elliptics-2.10 (2.10.1.1) unstable; urgency=low

  * Added prepare/commit C++ methods. Updated to 0.9.0 eblob
  * Added n->flags update through dnet_ioclient
  * Update ioserv.conf

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jul 2011 21:24:14 +0400

elliptics-2.10 (2.10.1.0) unstable; urgency=low

  * Switch to 2.10 package name

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jul 2011 17:32:48 +0400

elliptics (2.10.0.13) unstable; urgency=low

  * dnet_find should print metadata found information via dnet_print_meta()
    the same way dnet_meta does

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Jul 2011 01:48:25 +0400

elliptics (2.10.0.12) unstable; urgency=low

  * Added possibility to change log mask and server status(ro, exit) via
    dnet_ioclient
  * Update ioserv.conf config
  * File sync should be in sync with eblob sync: 0 means sync after each
    write, positive number - once per N seconds
  * Dropped stack size setup
  * Fixed check copy
  * Log cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Jul 2011 23:01:22 +0400

elliptics (2.10.0.11) unstable; urgency=low

  * Use dnet_cmd_string() for nice logs

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Jul 2011 02:01:07 +0400

elliptics (2.10.0.10) unstable; urgency=low

  * Added thread num control to check
  * Depend on eblob 0.8.4 and higher

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Jul 2011 19:08:58 +0400

elliptics (2.10.0.9) unstable; urgency=low

  * Merged recovery fixes from Anton Kortunov

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Jul 2011 21:27:51 +0400

elliptics (2.10.0.8) unstable; urgency=low

  * Get rid of state get/put in pool processing
  * Decrease number of stall transaction to mark state as dead

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Jul 2011 20:09:39 +0400

elliptics (2.10.0.7) unstable; urgency=low

  * Only put dnet_state_net_process() states

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Jul 2011 04:09:15 +0400

elliptics (2.10.0.6) unstable; urgency=low

  * Do not put accepting socket

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Jul 2011 03:45:23 +0400

elliptics (2.10.0.5) unstable; urgency=low

  * Grab and release state reference around dnet_schedule_network_io()
  * Sync with 0.8.0 eblob changes
  * Drop kyoto cabinet from build dependencies

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Jul 2011 03:24:09 +0400

elliptics (2.10.0.4) unstable; urgency=low

  * Merge eblob iterator callback changes
  * Switched from tsec/tnsec to dnet_time
  * Sync with 0.7.0 eblob changes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Jul 2011 22:06:26 +0400

elliptics (2.10.0.3) unstable; urgency=low

  * Do not csum zero-length files
  * Request metadata times in dnet_find()
  * Use readlink() to get eblob name through /proc/self/fd
  * Metadata reading should behave similar when reading by name and by ID
  * Move to be written object into /tmp and then remove (dnet_meta_update_all)
  * Export dnet_read_data_wait_raw() and use it for metadata reading
  * Implemented latest read, i.e. kind of R from R, W and N, but we always get
    the latest data from those R reads. Also C++/Python bindings
  * Removed kyoto cabinet support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 03 Jul 2011 03:50:09 +0400

elliptics (2.10.0.2) unstable; urgency=low

  * Implemented proper column API
  * Added compression support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 30 Jun 2011 04:30:12 +0400

elliptics (2.10.0.1) unstable; urgency=low

  * Added eblob 0.5.2 iterators for meta_iterate() callback.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 28 Jun 2011 01:35:47 +0400

elliptics (2.10.0.0) unstable; urgency=low

  * Switched to backend's metadata storage. File backend uses eblob, eblob
    backend embeds metadata in it as separate column
  * Want 0.5.1 eblob and higher
  * Extended UPDATE_STATUS command
  * Do not update metadata after write command, client should send us full
    meta update
  * Switched to eblob as metadata storage
  * Added namespace zbr
  * Added range requests API

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 27 Jun 2011 22:04:16 +0400

elliptics (2.9.7.9) unstable; urgency=low

  * Removed route synchronization calls
  * Made dnet_add_state() synchronous - it waits for dnet_recv_route_list()
    for complete now
  * Updated makefiles to fix linking with Natty libtool

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 13 Jun 2011 22:42:24 +0400

elliptics (2.9.7.8) unstable; urgency=low

  * Do not try to dereference st->idc without lock, it can go away

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 12 Jun 2011 01:54:23 +0400

elliptics (2.9.7.7) unstable; urgency=low

  * Meta update should use direct transactions
  * Log level cleanups - decreased info writes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 10 Jun 2011 15:22:45 +0400

elliptics (2.9.7.6) unstable; urgency=low

  * Write data/metadata if it is not present in selected group. If data is
    present, but metadata isn't, upload metadata

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 06 Jun 2011 20:57:24 +0400

elliptics (2.9.7.5) unstable; urgency=low

  * Use the same eblob mmap file

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Jun 2011 07:29:18 +0400

elliptics (2.9.7.4) unstable; urgency=low

  * Added flag to disable metadata writes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Jun 2011 15:08:39 +0400

elliptics (2.9.7.3) unstable; urgency=low

  * If checksum is disabled globally propagate it into per-command attribute
    flag
  * Added AC_CONFIG_MACRO_DIR
  * Added __DNET_META_MAX into meta enum
  * ->send() callback returns positive number of transactions it sent or
    negative error number

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Jun 2011 14:40:42 +0400

elliptics (2.9.7.2) unstable; urgency=low

  * Return -ENODATA instead of errno (-EAGAIN) when sendfile() fails to
    transfer file after it was truncated

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 14:36:13 +0400

elliptics (2.9.7.1) unstable; urgency=low

  * Added library version generation

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 13:43:31 +0400

elliptics (2.9.7.0) unstable; urgency=low

  * Added backend_cleanup() callback into dnet_config and dnet_node

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 31 May 2011 10:17:47 +0400

elliptics (2.9.6.174) unstable; urgency=low

  * Added dh_makeshlibs version dependency
  * Added flag to globally disable checksum generation and verification

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 30 May 2011 17:18:24 +0400

elliptics (2.9.6.173) unstable; urgency=low

  * Use recursive_directory_iterator(). Use proper flags in read_data_wait()
  * Added checksum enabled flag

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 26 May 2011 21:21:47 +0400

elliptics (2.9.6.172) unstable; urgency=low

  * Added meta updating tools, it scans directory or blobs and adds groups
    metadata if it is not present.
  * Added status update methods to cpp/python bindings.
  * Added offset, aflags and ioflags into dnet_read_data_wait() and children
    and read_data()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 25 May 2011 21:23:20 +0400

elliptics (2.9.6.171) unstable; urgency=low

  * Request statistics to sync route table update in dnet_meta
  * Periodically request route table in dnet_check_process()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 20 May 2011 01:20:06 +0400

elliptics (2.9.6.170) unstable; urgency=low

  * Force depending on eblob >= 0.2.0

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 19 May 2011 17:58:23 +0400

elliptics (2.9.6.169) unstable; urgency=low

  * We should grab state reference, since state can be killed between
    dnet_idc_create() and dnet_state_join_nolock()
  * Optimize checksum verification: do not calculate it twice in lookup. Read
    metadata checksum first, and only calculate on-disk csum if metadata csum
    exists

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 May 2011 18:25:16 +0400

elliptics (2.9.6.168) unstable; urgency=low

  * Verify checksum for all lookup and read requests. Added flag to disable
    checksum.
  * Put object checksum into dnet_file_info structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 17 May 2011 21:49:28 +0400

elliptics (2.9.6.167) unstable; urgency=low

  * Store checksum for written objects. Checksum is calculated each time
    metadata is written.
  * Added RW/RO and exit status as well as interface to set node status.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 16 May 2011 21:01:52 +0400

elliptics (2.9.6.166) unstable; urgency=low

  * Extended lookup response with file-info data.
  * Added possibility to lookup addr by ID

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 14 May 2011 02:23:18 +0400

elliptics (2.9.6.165) unstable; urgency=low

  * Unify IO logs
  * Prepend size and timestamp if needed when generating eblob from tar files
  * Return -E2BIG error when filesize 0 and we want to read more than that
  * Enable compiler flags for g++, fixed -W generated warnings in cpp binding

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 12 May 2011 22:33:27 +0400

elliptics (2.9.6.164) unstable; urgency=low

  * Increase default stack size to 4mb
  * Do not use dynamically allocated elliptics_callback

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 May 2011 20:39:49 +0400

elliptics (2.9.6.163) unstable; urgency=low

  * Added find utility.
  * Added dnet_request_cmd() and its binding
  * We may need to access node and groups in children classes, make them
    protected

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 May 2011 03:23:42 +0400

elliptics (2.9.6.162) unstable; urgency=low

  * Added transaction timestamp into destruction log
  * Do not restart check if we provided file list
  * Fixed generated file list check

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 May 2011 19:52:10 +0400

elliptics (2.9.6.161) unstable; urgency=low

  * Extended reconnection logs. Added tid/pid into elliptics_log_file::log()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 May 2011 11:02:05 +0400

elliptics (2.9.6.160) unstable; urgency=low

  * Copy mixed groups and use them in cpp bindings instead of plain groups
    dereference.
  * Save the last cmd in t->cmd and print its status when transaction is
    destroyed.
  * Extended metadata dump.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 May 2011 00:55:48 +0400

elliptics (2.9.6.159) unstable; urgency=low

  * Always add state addr and cmd if they are present in
    elliptics_callback::callback()
  * Do not break remove loop if we successfully removed object.
  * Mix states prior direct data reading reading in ::read_data_wait().
  * Throw exception if there is no group to read data from

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 03 May 2011 18:14:55 +0400

elliptics (2.9.6.158) unstable; urgency=low

  * Added DB/CHECK prefixes to appropriate operations. Exit process if we hit
    fatal database error and let starup recovery fix the things.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 29 Apr 2011 21:34:18 +0400

elliptics (2.9.6.157) unstable; urgency=low

  * Do not put state into epoll fd if it was already initialized

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Apr 2011 18:36:51 +0400

elliptics (2.9.6.156) unstable; urgency=low

  * Remove dnet_join(), states are added into route table automatically. Fixed
    race between route table update (dnet_idc_create()) and storage_state_list
    update.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 25 Apr 2011 00:47:18 +0400

elliptics (2.9.6.155) unstable; urgency=low

  * Fixed usec->msec transformation during estimator calculus

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Apr 2011 03:19:18 +0400

elliptics (2.9.6.154) unstable; urgency=low

  * Added weight estimator based on read transaction timings

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Apr 2011 02:46:19 +0400

elliptics (2.9.6.153) unstable; urgency=low

  * Add some salt if there are equal weights and rerun sort
  * Fixed all-state-check - since states can be removed we must use safe
    iterator
  * Extended transaction debug - added weights

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 23 Apr 2011 01:39:14 +0400

elliptics (2.9.6.152) unstable; urgency=low

  * Moved stall transaction processing into network IO thread
  * Added 'flags' parameter into ioserv config
  * Added state mix according to their weights

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Apr 2011 19:27:41 +0400

elliptics (2.9.6.151) unstable; urgency=low

  * Enable transaction forwarding. Use special saved state for this.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Apr 2011 03:10:42 +0400

elliptics (2.9.6.150) unstable; urgency=low

  * Temporarily disable forwarding
  * Remove transaction from tmp list when completing on timeout

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 22 Apr 2011 01:47:03 +0400

elliptics (2.9.6.149) unstable; urgency=low

  * Write metadata after data in high-level functions
  * Do not remove object if check did not find history

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Apr 2011 21:12:54 +0400

elliptics (2.9.6.148) unstable; urgency=low

  * Write metadata directly from dnet_write_object()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Apr 2011 20:44:50 +0400

elliptics (2.9.6.147) unstable; urgency=low

  * Remove state when we detect its stall counter reached limit

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Apr 2011 19:48:16 +0400

elliptics (2.9.6.146) unstable; urgency=low

  * Put whole ID into error log when we fail to read object or file
  * Updated metadata writer
  * Added dnet_meta - metdata fetcher
  * Removed fcgi in favour of fastcgi-daemon
  * Open cpp logger in append mode

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Apr 2011 00:56:29 +0400

elliptics (2.9.6.145) unstable; urgency=low

  * dnet_trans_check_stall() could errorneously mark states as stall.
  * Extend ::lookup()/::read() exception debug a bit

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Apr 2011 21:13:43 +0400

elliptics (2.9.6.144) unstable; urgency=low

  * Refactor state logic: join and plain n->st dereference changes
  * Fixed potential invalid pointer dereferences during metadata write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Apr 2011 23:40:34 +0400

elliptics (2.9.6.143) unstable; urgency=low

  * Added refcnt into dnet_read_data_wait() shared completion structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Apr 2011 22:05:12 +0400

elliptics (2.9.6.142) unstable; urgency=low

  * Use default wait timeout of 5 seconds
  * Dropped tests - they are outdated to hell
  * Fixed off-by-one in net_thread_pos selection
  * Added IO/net thread names and start/stop debug for net pool
  * Use DNET_DEFAULT_STALL_TRANSACTIONS instead of hardcoded 10
  * Schedule send and recv event when stall counter reaches
    DNET_DEFAULT_STALL_TRANSACTIONS
  * Reset state when its stall counter >= DNET_DEFAULT_STALL_TRANSACTIONS

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Apr 2011 21:16:17 +0400

elliptics (2.9.6.141) unstable; urgency=low

  * Added state stall counter

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Apr 2011 19:25:57 +0400

elliptics (2.9.6.140) unstable; urgency=low

  * Added pool of network processing threads
  * Added strict lookup checks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Apr 2011 19:11:52 +0400

elliptics (2.9.6.139) unstable; urgency=low

  * Fixed data forwarding
  * Fixed lookup try/catch and added node constructor with dnet_config lref
  * Added usec timestamp into common C++ logger

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Apr 2011 01:57:07 +0400

elliptics (2.9.6.138) unstable; urgency=low

  * Wait proper timeout when waiting for reverse lookup headers
  * Default wait timeout equals to 20 seconds now

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 15 Apr 2011 00:35:53 +0400

elliptics (2.9.6.137) unstable; urgency=low

  * Added per-transction timeouts (use n->wait_ts actually)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Apr 2011 21:35:58 +0400

elliptics (2.9.6.136) unstable; urgency=low

  * Use generated ID with proper group_id field when performing data lookup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 12 Apr 2011 20:13:43 +0400

elliptics (2.9.6.135) unstable; urgency=low

  * Data returned from C code must be freed in binding, std::string will copy
    it instead of reuse
  * Fixed typo when putting wait structure in dnet_read_data_wait()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 12 Apr 2011 19:53:33 +0400

elliptics (2.9.6.134) unstable; urgency=low

  * Do not double close accepted socket if state creation fails.
  * Propagate read completion back to caller
  * Use dnet_io_req instead of essentially the same dnet_trans_send_ctl
    structure.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 12 Apr 2011 02:44:32 +0400

elliptics (2.9.6.133) unstable; urgency=low

  * Request route table from all added nodes
  * dnet_monitor must request stats from all connected nodes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Apr 2011 16:44:52 +0400

elliptics (2.9.6.132) unstable; urgency=low

  * Return -ECONNRESET on EPOLLHUP/EPOLLERR

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 10 Apr 2011 03:51:54 +0400

elliptics (2.9.6.131) unstable; urgency=low

  * Do not exit from IO thread handler on non-critical errors.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 16:32:36 +0400

elliptics (2.9.6.130) unstable; urgency=low

  * Added start/stop IO thread debug

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 16:27:48 +0400

elliptics (2.9.6.129) unstable; urgency=low

  * Do not break epoll loop on interrupts and eagain
  * Dropped counter debug

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 16:14:59 +0400

elliptics (2.9.6.128) unstable; urgency=low

  * Fixed storage_state_list iterator
  * Use 1 IO thread for client and 20 for server by default

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 15:37:37 +0400

elliptics (2.9.6.127) unstable; urgency=low

  * Fixed req processing in multi-thread IO pool

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 15:26:12 +0400

elliptics (2.9.6.126) unstable; urgency=low

  * Merged statistics update
  * Added missed io_thread_num parser
  * Simplified state destruction during node cleanup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 15:13:02 +0400

elliptics (2.9.6.125) unstable; urgency=low

  * Do not deadlock when unscheduling sending state

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 03:50:05 +0400

elliptics (2.9.6.124) unstable; urgency=low

  * Do not schedule sending of the dying state.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 03:44:52 +0400

elliptics (2.9.6.123) unstable; urgency=low

  * Update restart counter when really restart checking threads.
  * Save check request structure locally.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 03:26:55 +0400

elliptics (2.9.6.122) unstable; urgency=low

  * Do not restart checking threads when limit reached.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 02:58:38 +0400

elliptics (2.9.6.121) unstable; urgency=low

  * Switched to IO thread pool model.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 09 Apr 2011 02:34:44 +0400

elliptics (2.9.6.120) unstable; urgency=low

  * Fixed fcgi output when upload fails.
  * Added state_num() into c++ binding

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Apr 2011 16:49:39 +0400

elliptics (2.9.6.119) unstable; urgency=low

  * Refactored c++ bindings

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 07 Apr 2011 20:00:31 +0400

elliptics (2.9.6.118) unstable; urgency=low

  * Added remove cpp methods
  * Added lookup cpp methods
  * Fixed bad print of uninitialized groups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 07 Apr 2011 18:09:37 +0400

elliptics (2.9.6.117) unstable; urgency=low

  * Do not close r->fd if it is >= 0, it must be setup correctly.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Apr 2011 03:18:30 +0400

elliptics (2.9.6.116) unstable; urgency=low

  * Dropped dnet_fcgi_log_write() macros, use proper function instead
  * Do not close file log if syslog was used

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Apr 2011 02:37:35 +0400

elliptics (2.9.6.115) unstable; urgency=low

  * Do not allow double close on fd
  * Do not proceed with failed fcgx structure

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Apr 2011 02:28:05 +0400

elliptics (2.9.6.114) unstable; urgency=low

  * Added options (linger and keepalive) to all created sockets
  * Use shutdown() before closing socket

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 05 Apr 2011 01:53:33 +0400

elliptics (2.9.6.113) unstable; urgency=low

  * Do not try to free sending thread if it was not started.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Apr 2011 23:57:10 +0400

elliptics (2.9.6.112) unstable; urgency=low

  * Added DNET_FCGI_SYSLOG_PROGRAM option used by fcgi syslog
  *  Do not restart check infinitely, only do it 20 times and then print error
     message.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Apr 2011 19:28:25 +0400

elliptics (2.9.6.111) unstable; urgency=low

  * Cleanup send queue on state destruction.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Apr 2011 18:33:35 +0400

elliptics (2.9.6.110) unstable; urgency=low

  * Use async sending model
  * Debug log cleanups
  * Do not connect to the addr which is present in route table
  * Added eblob-from-tar generator
  * Throw std exceptionms rather than int
  * Use 2 seconds for connect timeout

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Apr 2011 18:18:22 +0400

elliptics (2.9.6.109) unstable; urgency=low

  * Use small and repeated timeout in send/sendfile path. Drop st->timeout
  * Check n->need_exit flag in check iterators
  * Added boost::asio deps/configure and (empty) example application which
    will create eblobs locally from tar files.
  * Updated cpp/python bindings
  * Added dnet_lookup_addr() function which fills provided buffer with the
    state address which is supposed to host object with id generated from
    given data
  * Make dnet_node_set_groups() reallocate provided groups and free old ones.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 31 Mar 2011 18:47:42 +0400

elliptics (2.9.6.108) unstable; urgency=low

  * Tune state timeout detection

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 28 Mar 2011 02:15:21 +0400

elliptics (2.9.6.107) unstable; urgency=low

  * forwarding fix
  * initialize error to zero prior reading key from cursor

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Mar 2011 06:03:56 +0300

elliptics (2.9.6.106) unstable; urgency=low

  * Only remove local object if dnet_db_read_raw() returned negative or zero
    error value. Positive is data size.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Mar 2011 05:03:16 +0300

elliptics (2.9.6.105) unstable; urgency=low

  * Really fixed checker

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Mar 2011 04:41:31 +0300

elliptics (2.9.6.104) unstable; urgency=low

  * Since dnet_state_get_first() now returns NULL for own main state, check
    iterator should take that into account.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Mar 2011 04:30:40 +0300

elliptics (2.9.6.103) unstable; urgency=low

  * Graceful exit in sigint/sigterm.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Mar 2011 01:57:12 +0300

elliptics (2.9.6.102) unstable; urgency=low

  * Optimize merge of broken objects: if meta is present, but there is no
    history, just delete record.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Mar 2011 19:55:41 +0300

elliptics (2.9.6.101) unstable; urgency=low

  * Do not sync null databases.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Mar 2011 15:21:28 +0300

elliptics (2.9.6.100) unstable; urgency=low

  * Added explicit database synchronization called from check/reconnect
    thread.
  * Added db_flags to ioserv config. Autosync is turned off by default now!

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Mar 2011 01:55:50 +0300

elliptics (2.9.6.99) unstable; urgency=low

  * Drop invalid goto in need_exit check in dnet_wait()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Mar 2011 18:42:37 +0300

elliptics (2.9.6.98) unstable; urgency=low

  * Do not allow dnet_state_get_first() to return own state. Dropped unused
    dnet_state_search().
  * Check for need_exit during data send at the very end, so we would not miss
    this event.
  * printf warnings fixed

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 23 Mar 2011 16:51:44 +0300

elliptics (2.9.6.97) unstable; urgency=low

  * Restart check automatically if we checked less than half of the local
    storage.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Mar 2011 23:10:08 +0300

elliptics (2.9.6.96) unstable; urgency=low

  * Only forbid write command during check. Temporal hack.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Mar 2011 22:34:15 +0300

elliptics (2.9.6.95) unstable; urgency=low

  * do not break protocol processing for del/write commands during check.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Mar 2011 22:27:04 +0300

elliptics (2.9.6.94) unstable; urgency=low

  * Temporarily do not allow write and delete commands if check is in
    progress.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Mar 2011 21:08:41 +0300

elliptics (2.9.6.93) unstable; urgency=low

  * Added db cursor logs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Mar 2011 20:08:44 +0300

elliptics (2.9.6.92) unstable; urgency=low

  * Added log dump of elliptics version and number of changed files in git
    tree.
  * Added attr check in completion callbacks. It can be NULL if it is cmd-only
    reply.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Mar 2011 19:03:35 +0300

elliptics (2.9.6.91) unstable; urgency=low

  * Added final transaction completion invocation, used in
    dnet_trans_destroy() to specify the last moment this transaction lives.
  * Log debug cleanups

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 19 Mar 2011 01:10:55 +0300

elliptics (2.9.6.90) unstable; urgency=low

  * Hold transaction when sending and inserting it into the state.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Mar 2011 18:42:21 +0300

elliptics (2.9.6.89) unstable; urgency=low

  * Use trans_lock to protect transaction tree instead of send_lock.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 16 Mar 2011 06:10:42 +0300

elliptics (2.9.6.88) unstable; urgency=low

  * state timeout updates
  * tuned idc destruction

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 16 Mar 2011 01:22:56 +0300

elliptics (2.9.6.87) unstable; urgency=low

  * Create all client state threads in detached state.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 21:10:16 +0300

elliptics (2.9.6.86) unstable; urgency=low

  * Improved some debug output.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 19:53:52 +0300

elliptics (2.9.6.85) unstable; urgency=low

  * Minor dnet_check updates.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 03:51:50 +0300

elliptics (2.9.6.84) unstable; urgency=low

  * Do not write check completion metadata when doing merge check. Returned
    back multi-threaded check.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 03:23:38 +0300

elliptics (2.9.6.83) unstable; urgency=low

  * Force checker to run in single-threading mode.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 03:15:24 +0300

elliptics (2.9.6.82) unstable; urgency=low

  * Added KCOAUTOSYNC database mode.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 02:37:21 +0300

elliptics (2.9.6.81) unstable; urgency=low

  * Uncondtionally remove meta and history objects.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 01:56:48 +0300

elliptics (2.9.6.80) unstable; urgency=low

  * Try to remove meta even if history was not found in the databse.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 01:42:35 +0300

elliptics (2.9.6.79) unstable; urgency=low

  * Added error checks and debug into remove command.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 01:33:17 +0300

elliptics (2.9.6.78) unstable; urgency=low

  * Roll back some testing changes. Fixed state_lock@join deadlock.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Mar 2011 00:28:50 +0300

elliptics (2.9.6.77) unstable; urgency=low

  * Do not wait until state is ready, return error early from dnet_recv()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 08:50:54 +0300

elliptics (2.9.6.76) unstable; urgency=low

  * Improved reconnection logic.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 08:38:03 +0300

elliptics (2.9.6.75) unstable; urgency=low

  * Added time counters.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 08:15:33 +0300

elliptics (2.9.6.74) unstable; urgency=low

  * Do not even try to process route list request.
  * Let fcgi write when it starts request processing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 07:19:12 +0300

elliptics (2.9.6.73) unstable; urgency=low

  * Optimized dnet_idc_destroy()
  * Temporarily disable route list reply processing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 07:07:25 +0300

elliptics (2.9.6.72) unstable; urgency=low

  * Optimized route list request.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 06:52:53 +0300

elliptics (2.9.6.71) unstable; urgency=low

  * No need to initialize direct command id.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 05:54:15 +0300

elliptics (2.9.6.70) unstable; urgency=low

  * Fixed idc creation in the state processing thread.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 05:46:49 +0300

elliptics (2.9.6.69) unstable; urgency=low

  * Moved idc generation into state's processing function.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 05:02:40 +0300

elliptics (2.9.6.68) unstable; urgency=low

  * Do not check state address when accepted client does not have ids
    associated.
  * Increase listen backlog to 10k
  * Added nonblocking connect.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 04:33:54 +0300

elliptics (2.9.6.67) unstable; urgency=low

  * Enable back whole route table download at state add creation.
  * Fixed off-by-one in dnet_idc_destroy() during memmove()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 03:13:14 +0300

elliptics (2.9.6.66) unstable; urgency=low

  * Do not request route list at startup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 02:34:38 +0300

elliptics (2.9.6.65) unstable; urgency=low

  * Major transaction logic rework.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Mar 2011 02:16:32 +0300

elliptics (2.9.6.64) unstable; urgency=low

  * Abandon POSIX timers for stall transaction/state detection.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 07:48:50 +0300

elliptics (2.9.6.63) unstable; urgency=low

  * Do not setup timers for empty transactions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 06:28:24 +0300

elliptics (2.9.6.62) unstable; urgency=low

  * Fixed typo in dnet_trans_timer_setup() during timer creation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 05:48:41 +0300

elliptics (2.9.6.61) unstable; urgency=low

  * Use state pointer rather than transaction in timer completion callback.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 05:38:59 +0300

elliptics (2.9.6.60) unstable; urgency=low

  * Do not put transaction and state in tranaction' timeout handler.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 04:39:22 +0300

elliptics (2.9.6.59) unstable; urgency=low

  * More idc/group cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 04:14:53 +0300

elliptics (2.9.6.58) unstable; urgency=low

  * More idc/group fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 03:30:32 +0300

elliptics (2.9.6.57) unstable; urgency=low

  * Fixed off-by-one in dnet_idc_destroy()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 03:10:47 +0300

elliptics (2.9.6.56) unstable; urgency=low

  * KC memory freeing cleanup

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 02:53:47 +0300

elliptics (2.9.6.55) unstable; urgency=low

  * dnet_check does not require argument for -D option

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 02:25:55 +0300

elliptics (2.9.6.54) unstable; urgency=low

  * Send @size bytes of history, not 0 when doing direct merge upload.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Mar 2011 01:55:48 +0300

elliptics (2.9.6.53) unstable; urgency=low

  * Fixed various loggers initialization
  * Set proper process names via prctl() in dnet_set_name()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 20:54:31 +0300

elliptics (2.9.6.52) unstable; urgency=low

  * Protect dnet_trans_complete_forward() against NULL state and cmd.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 20:17:02 +0300

elliptics (2.9.6.51) unstable; urgency=low

  * Added dry-run mode for check util.
  * Remove local object if we failed to read its metadata and vice versa.
  * Remove transaction from the tree in dnet_state_clean() before its
    completion callback is invoked.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 18:46:28 +0300

elliptics (2.9.6.50) unstable; urgency=low

  * Stop requesting statistics from check thread. Use transaction completion
    error mechanism to mark states dead.
  * Reset state on timeout errors.
  * Replaced state transaction lock with mutex
  * Added dnet_set_name() to name threads

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 04:35:16 +0300

elliptics (2.9.6.49) unstable; urgency=low

  * Insert transaction into forwarding state and then set its state back to
    original.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 02:08:14 +0300

elliptics (2.9.6.48) unstable; urgency=low

  * Switched to new transaction tracking system based on POSIX timers
  * Command processing log cleanups
  * Added monitor mode

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Mar 2011 01:03:58 +0300

elliptics (2.9.6.47) unstable; urgency=low

  * Do not remove object from storage when we failed to read its local copy.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 09 Mar 2011 11:29:59 +0300

elliptics (2.9.6.46) unstable; urgency=low

  * Forget to add -i switch into getopt() loop.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 06 Mar 2011 04:05:24 +0300

elliptics (2.9.6.45) unstable; urgency=low

  * git commit -a -m "Added dnet_ids app to update ids file if underlying
    storage device size was changed. Generates one ID per 100 Gb, older
    elliptics versions used one ID per 1 Gb!"

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 06 Mar 2011 03:40:04 +0300

elliptics (2.9.6.44) unstable; urgency=low

  * Fill raw ID with zeroes before using it for logs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2011 18:52:28 +0300

elliptics (2.9.6.43) unstable; urgency=low

  * Added 0-byte at the end of namespace string to guard it against complex
    object names.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2011 14:46:09 +0300

elliptics (2.9.6.42) unstable; urgency=low

  * Use mutex instead of rwlock for state lock. RW lock may lead to starvation
    of new client connections.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2011 05:17:24 +0300

elliptics (2.9.6.41) unstable; urgency=low

  * Store namespace information in metadata

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2011 03:25:17 +0300

elliptics (2.9.6.40) unstable; urgency=low

  * Added namespace support

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Mar 2011 03:02:13 +0300

elliptics (2.9.6.39) unstable; urgency=low

  * Allocate buffer for route table and do not lock states during send.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 04 Mar 2011 19:23:27 +0300

elliptics (2.9.6.38) unstable; urgency=low

  * Do not hold trans_lock while checking the whole tree, grab it only to get
    first entry.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 27 Feb 2011 20:09:12 +0300

elliptics (2.9.6.37) unstable; urgency=low

  * Return correct number of successfully written objects.
  * Do not return error if failed to write data into some group.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Feb 2011 22:44:32 +0300

elliptics (2.9.6.36) unstable; urgency=low

  * "Dropped wait timeout, it is infinite in FCGI frontend, instead allow to
    tune check timeout, which will fire up stalled transactions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Feb 2011 21:11:25 +0300

elliptics (2.9.6.35) unstable; urgency=low

  * Added full check support - system will try to read data objects in this
    mode, while in plain check it will only read history logs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Feb 2011 20:53:54 +0300

elliptics (2.9.6.34) unstable; urgency=low

  * Added temporal copies check debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Feb 2011 19:58:29 +0300

elliptics (2.9.6.33) unstable; urgency=low

  * Force dnet_trans_create_send_all() to return total number of send attempts
    which end up with completion callback invocation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 25 Feb 2011 19:42:52 +0300

elliptics (2.9.6.32) unstable; urgency=low

  * Disable FCGI refcnt debug
  * Invoke completion callback even when error happened.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 21:16:12 +0300

elliptics (2.9.6.31) unstable; urgency=low

  * Added temporal FCGI refcnt debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 21:05:35 +0300

elliptics (2.9.6.30) unstable; urgency=low

  * Fixed FCGI reference counter leak.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 20:52:09 +0300

elliptics (2.9.6.29) unstable; urgency=low

  * Added temporal FCGI refcnt debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 20:27:21 +0300

elliptics (2.9.6.28) unstable; urgency=low

  * Additional error check in fcgi refcnt wait.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 20:09:06 +0300

elliptics (2.9.6.27) unstable; urgency=low

  * Use absolute timeout in fcgi refcnt waiter.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 20:02:12 +0300

elliptics (2.9.6.26) unstable; urgency=low

  * Implemented 'reference counter' for fcgi connection handler.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 19:18:32 +0300

elliptics (2.9.6.25) unstable; urgency=low

  * Fixed endless error loop in db iterator.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 17:32:44 +0300

elliptics (2.9.6.24) unstable; urgency=low

  * Fake dnet_check() for testing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 17:21:54 +0300

elliptics (2.9.6.23) unstable; urgency=low

  * Dnet wait misc fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 17:13:08 +0300

elliptics (2.9.6.22) unstable; urgency=low

  * Fixed dnet_wait leak.
  * Disable object removal if read failed during check.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 24 Feb 2011 16:30:29 +0300

elliptics (2.9.6.21) unstable; urgency=low

  * Improved check debug.
  * Use newly allocated check request structure when file option is provided.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Feb 2011 22:33:08 +0300

elliptics (2.9.6.20) unstable; urgency=low

  * Wrap write and delete db operations into transactions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Feb 2011 17:41:15 +0300

elliptics (2.9.6.19) unstable; urgency=low

  * Fill check reply structure with zeroes first.
  * Return and show error from stat requests. Read command start time right
    after we got query.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 21 Feb 2011 15:45:53 +0300

elliptics (2.9.6.18) unstable; urgency=low

  * Use correct multiplier for sec->usec conversation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Feb 2011 02:25:56 +0300

elliptics (2.9.6.17) unstable; urgency=low

  * Finish fcgi object at the very end after logs.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Feb 2011 02:13:22 +0300

elliptics (2.9.6.16) unstable; urgency=low

  * Return error when unlink failed.
  * Execute completion callback even when no state was found.
  * Do not use locked version when sending pad buffer, since state is already
    locked.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Feb 2011 18:10:47 +0300

elliptics (2.9.6.15) unstable; urgency=low

  * Drop randomization debug in fcgi.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Feb 2011 02:00:16 +0300

elliptics (2.9.6.14) unstable; urgency=low

  * Added remote groups randomization trick.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 12 Feb 2011 01:56:01 +0300

elliptics (2.9.6.13) unstable; urgency=low

  * Small log cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Feb 2011 18:38:29 +0300

elliptics (2.9.6.12) unstable; urgency=low

  * Fixed forbidden query string write. Added iodiff time log.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Feb 2011 18:24:44 +0300

elliptics (2.9.6.11) unstable; urgency=low

  * Implemented check of selected objects from file, not the whole node.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 11 Feb 2011 00:12:05 +0300

elliptics (2.9.6.10) unstable; urgency=low

  * Added FCGI command execution times.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Feb 2011 19:19:10 +0300

elliptics (2.9.6.9) unstable; urgency=low

  * Do not check direct pattern index if we have download-all wildcard
    permission.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Feb 2011 18:25:01 +0300

elliptics (2.9.6.8) unstable; urgency=low

  * Fixed stupid leak in dnet_send_read_data()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Feb 2011 03:41:23 +0300

elliptics (2.9.6.7) unstable; urgency=low

  * Added syslog support.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 10 Feb 2011 03:34:11 +0300

elliptics (2.9.6.6) unstable; urgency=low

  * Return error when check failed to start

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 21:00:02 +0300

elliptics (2.9.6.5) unstable; urgency=low

  * Do not exit check iteration loop when dnet_check() returns positive value.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 20:34:01 +0300

elliptics (2.9.6.4) unstable; urgency=low

  * Added some randomness into dnet_ids_generate().

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 19:50:16 +0300

elliptics (2.9.6.3) unstable; urgency=low

  * Use dynamically allocated config parser's buffer.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 08 Feb 2011 19:23:19 +0300

elliptics (2.9.6.2) unstable; urgency=low

  * Added db_map/db_buckets config parameters. By default they are set to 10
    millions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 07 Feb 2011 18:38:34 +0300

elliptics (2.9.6.1) unstable; urgency=low

  * New release: 2.9.6.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 06 Feb 2011 04:38:58 +0300

elliptics (2.9.5.41) unstable; urgency=low

  * Added iterative recovery with timestamps.
  * Added configurable number of threads to spawn by checker.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 06 Feb 2011 04:36:50 +0300

elliptics (2.9.5.40) unstable; urgency=low

  * Fixed only_merge and check_copies binary manipulations.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Feb 2011 23:45:19 +0300

elliptics (2.9.5.39) unstable; urgency=low

  * Check debug hunk.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Feb 2011 23:23:44 +0300

elliptics (2.9.5.38) unstable; urgency=low

  * Multi-threaded cursor reading during check.
  * Merge-only check.
  * Return statistics (total, completed and error numbers) data to client during check.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Feb 2011 22:33:02 +0300

elliptics (2.9.5.37) unstable; urgency=low

  * Do not sleep when requesting stat.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Feb 2011 01:09:35 +0300

elliptics (2.9.5.36) unstable; urgency=low

  * Log cleanups.
  * Check copies detection changed a bit.
  * Do not request route table when doing stat request in ioclient

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 04 Feb 2011 23:06:39 +0300

elliptics (2.9.5.35) unstable; urgency=low

  * Do not allow multiple checks to run in parallel.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 31 Jan 2011 22:57:08 +0300

elliptics (2.9.5.34) unstable; urgency=low

  * Do not try to delete remove record if its reading returns -7 (no record
    Kyoto Cabinet error)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 31 Jan 2011 21:42:30 +0300

elliptics (2.9.5.33) unstable; urgency=low

  * Use negative codes for db errors.
  * Debug log cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 28 Jan 2011 17:54:00 +0300

elliptics (2.9.5.32) unstable; urgency=low

  * Debug cleanup
  * Exit check if it encountered errors.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 27 Jan 2011 20:48:38 +0300

elliptics (2.9.5.31) unstable; urgency=low

  * Replaced BDB with KyotoCabinet.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 19 Jan 2011 19:26:39 +0300

elliptics (2.9.5.30) unstable; urgency=low

  * Enable bdb updates back. Added completion log.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Jan 2011 20:19:43 +0300

elliptics (2.9.5.29) unstable; urgency=low

  * Do not try to work with node if reading return network is down.
  * Temporarily disable bdb updates to find out possible bottleneck.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Jan 2011 20:09:41 +0300

elliptics (2.9.5.28) unstable; urgency=low

  * Added temporal lookup addr debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Jan 2011 18:42:52 +0300

elliptics (2.9.5.27) unstable; urgency=low

  * Log cleanups.
  * Return error and break out of the cursor reading loop on errors.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 Jan 2011 16:48:59 +0300

elliptics (2.9.5.26) unstable; urgency=low

  * Wrap cursor traversal into transaction.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Jan 2011 22:47:26 +0300

elliptics (2.9.5.25) unstable; urgency=low

  * Remove local file if there is no history. Exit cursor writing loop if
    need_exit was set.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Jan 2011 21:15:50 +0300

elliptics (2.9.5.24) unstable; urgency=low

  * Fixed erroneous free().

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Jan 2011 20:49:41 +0300

elliptics (2.9.5.23) unstable; urgency=low

  * Return correct state address in lookup response.
  * Do not stop listing processing in non-error cases.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 17 Jan 2011 20:41:38 +0300

elliptics (2.9.5.22) unstable; urgency=low

  * Switched to pipe and thread pool. Pipe is filled by single thread iterating over cursor.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 17 Jan 2011 18:45:11 +0300

elliptics (2.9.5.21) unstable; urgency=low

  * Revert back multi-threaded cursor traversal
  * Protect plain db read in dnet_db_read_raw() with transaction.
  * uint64_t -> unsigned long long printf format warning fix

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 16 Jan 2011 17:30:11 +0300

elliptics (2.9.5.20) unstable; urgency=low

  * Added cursor transaction back.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 02:28:11 +0300

elliptics (2.9.5.19) unstable; urgency=low

  * Revert back check design, where we first copy database into check file and
    then process it in parallel.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 02:05:39 +0300

elliptics (2.9.5.18) unstable; urgency=low

  * Do not read uncommitted data via listing cursor.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 01:50:03 +0300

elliptics (2.9.5.17) unstable; urgency=low

  * Do not aciquire transaction for cursor listing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 01:31:39 +0300

elliptics (2.9.5.16) unstable; urgency=low

  * Do not stop merge processing if remote node returned DB_NOTFOUND.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 01:20:06 +0300

elliptics (2.9.5.15) unstable; urgency=low

  * Explicitly del broken entries using cursor transaction.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 01:11:02 +0300

elliptics (2.9.5.14) unstable; urgency=low

  * Do not bail out of metadata is broken and remove local object instead.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 00:54:32 +0300

elliptics (2.9.5.13) unstable; urgency=low

  * Create cursor transaction.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 00:44:01 +0300

elliptics (2.9.5.12) unstable; urgency=low

  * Switched off from separate check file, use locked bdb cursor isntead.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 15 Jan 2011 00:19:03 +0300

elliptics (2.9.5.11) unstable; urgency=low

  * Cleanup unused history files. Debug cleanup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 14 Jan 2011 22:17:36 +0300

elliptics (2.9.5.10) unstable; urgency=low

  * Do not use /tmp for check tmp dir, instead use env_dir.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 14 Jan 2011 00:51:48 +0300

elliptics (2.9.5.9) unstable; urgency=low

  * Do not use /tmp for check tmp dir, instead use env->db_data_dir dir.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 14 Jan 2011 00:02:30 +0300

elliptics (2.9.5.8) unstable; urgency=low

  * Do not use /tmp for check tmp dir, instead use database dir.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Jan 2011 23:58:15 +0300

elliptics (2.9.5.7) unstable; urgency=low

  * Do not allow checkpoint if environment is not initialized.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Jan 2011 22:20:08 +0300

elliptics (2.9.5.6) unstable; urgency=low

  * Added automatic checkpointing from checking thread.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Jan 2011 22:01:09 +0300

elliptics (2.9.5.5) unstable; urgency=low

  * Turn off in-memory BDB logging.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 13 Jan 2011 20:38:37 +0300

elliptics (2.9.5.4) unstable; urgency=low

  * Really depend on eblob >= 0.1.0

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 22 Dec 2010 20:18:09 +0300

elliptics (2.9.5.3) unstable; urgency=low

  * Depend on eblob >= 0.1.0

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 22 Dec 2010 20:15:24 +0300

elliptics (2.9.5.2) unstable; urgency=low

  * Implemented multiple read in elliptics core and FCGI frontend.
  * Implemented very user-friendly C++/Python interface.
  * Extended FCGI xml output for POST request: added data crc, size,
    per-group addresses and path to the destination object on file backend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 09 Dec 2010 20:18:23 +0300

elliptics (2.9.5.1) unstable; urgency=low

  * Documentation update.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Dec 2010 22:17:31 +0300

elliptics (2.9.4.8) unstable; urgency=low

  * Fixed fcgi reading with new groups URI.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Dec 2010 04:02:19 +0300

elliptics (2.9.4.7) unstable; urgency=low

  * Implemented automatic groups selection by free space.
  * Bug fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 03 Dec 2010 03:29:57 +0300

elliptics (2.9.4.6) unstable; urgency=low

  * Fixed eblob_send().
  * Use 50 check threads.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Dec 2010 03:09:47 +0300

elliptics (2.9.4.5) unstable; urgency=low

  * Multi-threaded fsck.
  * Fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Dec 2010 03:01:11 +0300

elliptics (2.9.4.4) unstable; urgency=low

  * Fair number of fixes in fcgi and lib

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 01 Dec 2010 23:54:32 +0300

elliptics (2.9.4.3) unstable; urgency=low

  * Implemented bdb fsck (both merge and copy check).

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 30 Nov 2010 03:04:35 +0300

elliptics (2.9.4.2) unstable; urgency=low

  * Switched to random ids (1024 ids are generated at first start)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 25 Nov 2010 19:56:41 +0300

elliptics (2.9.4.1) unstable; urgency=low

  * Switched to new addressing model.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Nov 2010 20:50:25 +0300

elliptics (2.9.3.15) unstable; urgency=low

  * Temporarily disable update notifications.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Nov 2010 21:25:23 +0300

elliptics (2.9.3.14) unstable; urgency=low

  * Remove direct object if it can not be uploaded to the storage.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Nov 2010 15:41:30 +0300

elliptics (2.9.3.13) unstable; urgency=low

  * Remove empty/broken history objects during merge.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Nov 2010 15:20:40 +0300

elliptics (2.9.3.12) unstable; urgency=low

  * Added more debug about processed objects in fsck tools.
  * Delete directly read object if its history can not be mapped.
  * Return error from dnet_merge_direct() when merge falls back to direct
    merge during common merge.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Nov 2010 14:46:48 +0300

elliptics (2.9.3.11) unstable; urgency=low

  * Attempt to do direct merge when we can not parse non-direct history stored
    in main storage.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Nov 2010 18:59:11 +0300

elliptics (2.9.3.10) unstable; urgency=low

  * Fixed bit directory generation in file_backend_get_dir_bits()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Nov 2010 18:03:00 +0300

elliptics (2.9.3.9) unstable; urgency=low

  * Fixed state leak in lookup processing.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Oct 2010 20:47:59 +0400

elliptics (2.9.3.8) unstable; urgency=low

  * Always use local address for succeeded local lookup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Oct 2010 20:06:00 +0400

elliptics (2.9.3.7) unstable; urgency=low

  * Kill state when check thread got error.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Oct 2010 18:24:45 +0400

elliptics (2.9.3.6) unstable; urgency=low

  * Extended fire time debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Oct 2010 18:09:08 +0400

elliptics (2.9.3.5) unstable; urgency=low

  * Update transaction fire time to include check timeout.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 21 Oct 2010 17:06:13 +0400

elliptics (2.9.3.4) unstable; urgency=low

  * Extend dnet_send_read_data() to get offset from parameters and do not
    abuse dnet_io_attr structure.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Oct 2010 18:34:25 +0400

elliptics (2.9.3.3) unstable; urgency=low

  * Unmap history after selecting transaction with the last update time in
    dnet_merge_get_latest_transactions()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Oct 2010 18:06:08 +0400

elliptics (2.9.3.2) unstable; urgency=low

  * Added full object ID dump and request error.
  * Exit merge early if no id file was provided.
  * Do not dereference state in dnet_read_complete() if it is NULL.
  * Added -N (do not request ids and use prevously downloaded) option comment
    into fsck help.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Oct 2010 19:27:55 +0400

elliptics (2.9.3.1) unstable; urgency=low

  * Extended alloc/free debug.
  * Allow zero-sized writes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 18 Oct 2010 13:29:32 +0400

elliptics (2.9.3) unstable; urgency=low

  * New minor release.
    No changes from 2.9.2.32.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 13 Oct 2010 16:01:23 +0400

elliptics (2.9.2.32) unstable; urgency=low

  * Added configurable value to check header for remote node IP address.
  * Added joining client check: returned address must be reachable to be
    inserted into route table.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 11 Oct 2010 16:43:56 +0400

elliptics (2.9.2.31) unstable; urgency=low

  * Fixed LA sorting.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Oct 2010 19:18:27 +0400

elliptics (2.9.2.30) unstable; urgency=low

  * Added LA check debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 08 Oct 2010 19:14:05 +0400

elliptics (2.9.2.29) unstable; urgency=low

  * Added id-by-LA generation and sorting.
  * Debug cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 06 Oct 2010 22:38:39 +0400

elliptics (2.9.2.28) unstable; urgency=low

  * Added timed statistics request which also works as timed connection
    checker.
  * Added seconds-only check time wait.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 06 Oct 2010 20:51:45 +0400

elliptics (2.9.2.27) unstable; urgency=low

  * Added keep-alive options.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 06 Oct 2010 16:24:33 +0400

elliptics (2.9.2.26) unstable; urgency=low

  * Do not log error when state is NULL in stat completion callback.
  * Unlink transaction and history after direct merge.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 04 Oct 2010 18:16:49 +0400

elliptics (2.9.2.25) unstable; urgency=low

  * Added norequest flag to fsck util (will use existing file).
  * Fixed remotes processing typo.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 02 Oct 2010 20:39:48 +0400

elliptics (2.9.2.24) unstable; urgency=low

  * Do not traverse the whole transaction tree after we found the first one
    which fire time has not yet elapsed.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 30 Sep 2010 18:57:22 +0400

elliptics (2.9.2.23) unstable; urgency=low

  * Remove io_thread_num and max_pending config parameters.
  * Added stack size parameter to check tools.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 30 Sep 2010 17:29:54 +0400

elliptics (2.9.2.22) unstable; urgency=low

  * Moved transaction debug output into the place where it can not dereference
    stale data.
  * Debug cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 Sep 2010 20:20:31 +0400

elliptics (2.9.2.21) unstable; urgency=low

  * Do not dereference null state in dnet_fcgi_read_complete.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 20 Sep 2010 18:19:05 +0400

elliptics (2.9.2.20) unstable; urgency=low

  * Added thread stack size parameter.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 22:27:05 +0400

elliptics (2.9.2.19) unstable; urgency=low

  * Added malloc mmap threshold config parameter.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 19:49:35 +0400

elliptics (2.9.2.18) unstable; urgency=low

  * Really really fixed recv state transaction processing leak.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 04:40:10 +0400

elliptics (2.9.2.17) unstable; urgency=low

  * Really fixed recv state transaction processing leak.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 04:28:32 +0400

elliptics (2.9.2.16) unstable; urgency=low

  * Do not try to dereferece null state. Happens when transaction is completed
    on timeout.
  * Use lineary (+60 seconds each turn) growing reconnection timeout. Added
    reconnection limit of 1 day.
  * Fixed recv state transaction processing leak.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 04:04:30 +0400

elliptics (2.9.2.15) unstable; urgency=low

  * Compilation typo fixed.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 00:15:18 +0400

elliptics (2.9.2.14) unstable; urgency=low

  * Fill all allocated memory with zeroes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 17 Sep 2010 00:08:18 +0400

elliptics (2.9.2.13) unstable; urgency=low

  * Put transaction after it was executed. Its refcnt was increased during
    search call.
  * Do not try to dereference state when it can be null.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 16 Sep 2010 20:55:09 +0400

elliptics (2.9.2.12) unstable; urgency=low

  * Do not create unneded listening state when node does not join network.
  * Reset accept state on error.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 23:24:12 +0400

elliptics (2.9.2.11) unstable; urgency=low

  * Do not join to states in state lists, since they can be freed in own
    threads.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 22:48:26 +0400

elliptics (2.9.2.10) unstable; urgency=low

  * Drop transaction resending support.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 22:21:21 +0400

elliptics (2.9.2.9) unstable; urgency=low

  * Extended local command processing log.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 18:04:09 +0400

elliptics (2.9.2.8) unstable; urgency=low

  * Also print pid in common logger.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 17:37:59 +0400

elliptics (2.9.2.7) unstable; urgency=low

  * Use pthread_self() instead of getpid() to get uniq thread id.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 17:33:59 +0400

elliptics (2.9.2.6) unstable; urgency=low

  * If DNET_IO_FLAGS_NO_HISTORY_UPDATE flag was set for read command, do not
    send data reply. Used in local stat command.
  * Debug cleanup.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 04:17:45 +0400

elliptics (2.9.2.5) unstable; urgency=low

  * Do not deal with NULL transactions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 03:51:20 +0400

elliptics (2.9.2.4) unstable; urgency=low

  * Extended debug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 03:24:04 +0400

elliptics (2.9.2.3) unstable; urgency=low

  * Start state IO thread after state initialization.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 02:44:45 +0400

elliptics (2.9.2.2) unstable; urgency=low

  * Join to io state thread instead of freeing it directly.
  * Do not exit from accept loop on error.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 02:31:23 +0400

elliptics (2.9.2.1) unstable; urgency=low

  * Initialize state list entry prior other usage.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 01:59:48 +0400

elliptics (2.9.2) unstable; urgency=low

  * Switched from libevent state machine to thread-per-client model.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 07 Sep 2010 01:38:31 +0400

elliptics (2.9.1.3) unstable; urgency=low

  * Added timeout to wait for transction completion.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 02 Sep 2010 18:37:43 +0400

elliptics (2.9.1.2) unstable; urgency=low

  * Added special URI parameter for atomic appends (where supported by
    backend). Added ioflags to common write operations.
  * Dropped TokyoCabinet IO backend support.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 17 Aug 2010 20:36:09 +0400

elliptics (2.9.1.1) unstable; urgency=low

  * Added DNET_FCGI_PUT_REGION config option to optionally enable region tag
  * Added wildcard direct download pattern (*)
  * Force direct download patterns to be checked against ID ending and
    just by having this substring somewhere in the query.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 13 Aug 2010 16:05:12 +0400

elliptics (2.9.1) unstable; urgency=low

  * New elliptics network release: 2.9.1

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 10 Aug 2010 23:06:25 +0400

elliptics (2.9.0.31) unstable; urgency=low

  * Logger cleanups.
  * Fixed resend locking bug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 10 Aug 2010 15:43:37 +0400

elliptics (2.9.0.30) unstable; urgency=low

  * Fixed lock/unlock typo in dnet_data_ready().

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 09 Aug 2010 19:00:56 +0400

elliptics (2.9.0.29) unstable; urgency=low

  * Refactor fcgi logging.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 07 Aug 2010 00:52:37 +0400

elliptics (2.9.0.28) unstable; urgency=low

  * Return read error when key was not found. Use right config file options.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 07 Aug 2010 00:16:25 +0400

elliptics (2.9.0.27) unstable; urgency=low

  * Added sanity checks for embedded reading.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 Aug 2010 22:01:20 +0400

elliptics (2.9.0.26) unstable; urgency=low

  * Disabled per-client statistics request in fcgi daemon.
  * Added subtle timeout and data rewrite when FCGX_PutStr() returns error.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 06 Aug 2010 19:51:48 +0400

elliptics (2.9.0.25) unstable; urgency=low

  * Copy resolved address into buffer (later used for reconnection) before
    trying to connect.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Aug 2010 21:12:57 +0400

elliptics (2.9.0.24) unstable; urgency=low

  * Refactor fcgi/check loggers to write pid/thread id into single log file.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Aug 2010 20:13:50 +0400

elliptics (2.9.0.23) unstable; urgency=low

  * Added <region> tag into download-info XML output
  * Shanged sending locking.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 05 Aug 2010 18:50:56 +0400

elliptics (2.9.0.22) unstable; urgency=low

  * Guard multiple 'logical' xml writes against parallel write

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 04 Aug 2010 22:05:46 +0400

elliptics (2.9.0.21) unstable; urgency=low

  * Implemented direct transaction merge.
  * If reading size was set to 0 map ~0ULL size, i.e. the whole file.
  * Remove object from the storage if its history log says so.
  * Drop unused DNET_FCGI_EMBED_TIMESTAMP_PATTERN and change to use
    DNET_FCGI_EMBED_PATTERN option.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 04 Aug 2010 21:23:10 +0400

elliptics (2.9.0.20) unstable; urgency=low

  * Fixed several fd leaks.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 21:51:29 +0400

elliptics (2.9.0.19) unstable; urgency=low

  * Unmap history file when failed to read transaction.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 20:37:21 +0400

elliptics (2.9.0.18) unstable; urgency=low

  * Guard OpenSSL_add_all_digests() and initialize it only once per thread
    group.
  * Force dnet_check_process_request() to wait for all sent transactions, do
    not wakeup after receiving reply from the first one.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 18:42:44 +0400

elliptics (2.9.0.17) unstable; urgency=low

  * Fixed compilation warnings on 64bit platform (uint64_t to unsigned long
    long and void * to unsigned long)
  * Try only requested transformation function, do not continue with the next
    one.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 17:40:46 +0400

elliptics (2.9.0.16) unstable; urgency=low

  * Use errno to differentiate reconnection state.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 16:36:58 +0400

elliptics (2.9.0.15) unstable; urgency=low

  * Made elliptics depend on eblob

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Jul 2010 14:40:34 +0400

elliptics (2.9.0.14) unstable; urgency=low

  * Updated checker's logger.
  * Increase example/check/common.c waiting timeout.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Jul 2010 21:25:04 +0400

elliptics (2.9.0.13) unstable; urgency=low

  * Added logs into file io backend listing processor.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 27 Jul 2010 21:00:45 +0400

elliptics (2.9.0.12) unstable; urgency=low

  * Let check applications to sleep longer waiting for replies.
  * Reduce number of ids sent via DNET_CMD_LIST command to 1024 per reply.
  * Mark states added via dnet_add_state() as reconnect-friendly.
  * Do not add reconnection addresses which do not have joining flags.
  * Updated to the latest eblob lib (moved blob code outside to libeblob).
  * Reschedule transaction's fire time when (non-last) reply is received.
  * Do not mess with dnet_fcgi_random_hashes outside of fcgi.c

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 26 Jul 2010 23:26:14 +0400

elliptics (2.9.0.11) unstable; urgency=low

  * Added embedded URI parameter, which will force timestamp to be embedded
    with data. It is possible to embed other parameters too.

    post: wget -O /tmp/1111 -S --post-file=elliptics.spec
    "http://devfs1/test.mp3?name=qwerty.xml&embed&timestamp=123"

    get: wget -O /tmp/1111 -S --header="If-Modified-Since: Thu, 01 Jan 1970
    00:02:00 GMT"  "http://devfs1/test.mp3?name=qwerty.xml&embed&direct=1"
  * fixed random hash selection in fcgi frontend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 25 Jul 2010 20:09:20 +0400

elliptics (2.9.0.10) unstable; urgency=low

  * return back addressing magic^W logic in dnet_write_object_raw()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Jul 2010 12:04:11 +0400

elliptics (2.9.0.9) unstable; urgency=low

  * Return back virtual datacenters.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 22 Jul 2010 22:17:08 +0400

elliptics (2.9.0.8) unstable; urgency=low

  * BLOB IO backend updates (multiple threads, index, bug fixes).
  * file IO backend fixes
  * python bindings
  * c++ binding fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 22 Jul 2010 18:11:17 +0400

elliptics (2.9.0.7) unstable; urgency=low

  * Log cleanups.
  * Extended ioclient's stat parameters.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 16 Jul 2010 20:08:05 +0400

elliptics (2.9.0.6) unstable; urgency=low

  * Added c++ interface.
  * Added fsck flag which allows to reupload existing copies.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 16 Jul 2010 18:17:06 +0400

elliptics (2.9.0.5) unstable; urgency=low

  * Added data/history indexes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 15 Jul 2010 00:20:50 +0400

elliptics (2.9.0.4) unstable; urgency=low

  * Allow dnet_ioclient to request stats.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Jul 2010 21:57:54 +0400

elliptics (2.9.0.3) unstable; urgency=low

  * Do not iterate over empty file.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Jul 2010 21:37:50 +0400

elliptics (2.9.0.2) unstable; urgency=low

  * Initial POSIX fadvice hints.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Jul 2010 18:22:11 +0400

elliptics (2.9.0.1) unstable; urgency=low

  * Added BLOB IO backend. Without abilities to remove objects though.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 06 Jul 2010 04:58:44 +0400

elliptics (2.9.0) unstable; urgency=low

  * switched ioserv from command line to config
  * created ioclient which does command line IO operations

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 01 Jul 2010 22:22:26 +0400

elliptics (2.8.1) unstable; urgency=low

  * Autoconf update to rollout new release, which contains previous fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 22 Jun 2010 02:06:16 +0400

elliptics (2.8.0.2) unstable; urgency=low

  * Debug cleanups.
  * Fsck utils fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 03 Jun 2010 18:59:45 +0400

elliptics (2.8.0.1) unstable; urgency=low

  * Debug extensions in fsck and meta processing.
  * Fixed fsck log file closing bug.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 03 Jun 2010 00:59:05 +0400

elliptics (2.8.0) unstable; urgency=low

  * Switched to new optimized history format, which contains metadata.
    History becomes just another metadata object with parent name
    and list of transformation functions.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 29 May 2010 20:46:43 +0400

elliptics (2.7.5.3) unstable; urgency=low

  * Added extended per-client per-cmd statistics.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 18 May 2010 16:41:56 +0400

elliptics (2.7.5.2) unstable; urgency=low

  * Extend fcgi debug logging.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 12 May 2010 03:40:39 +0400

elliptics (2.7.5.1) unstable; urgency=low

  * Added timestamp URI parameter support in fcgi frontend (timestamp=).

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 May 2010 21:02:03 +0400

elliptics (2.7.5) unstable; urgency=low

  * Make simple stat request to check only number of connected nodes without
    check them.
  * Added check applications README.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 May 2010 20:15:50 +0400

elliptics (2.7.4.2) unstable; urgency=low

  * Drop DNET_HISTORY_FLAGS and use DNET_IO_FLAGS instead.
  * Extend hparser to show 'removed' flag.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 11 May 2010 17:49:44 +0400

elliptics (2.7.4.1) unstable; urgency=low

  * history parser extension.
  * ID conversion fixes.
  * move version information to ID end

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 10 May 2010 18:40:16 +0400

elliptics (2.7.4) unstable; urgency=low

  * Added automatic recovery support.
  * Fair number of changes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 10 May 2010 05:03:39 +0400

elliptics (2.7.3.4) unstable; urgency=low

  * Added if-modified-since header processing.
  * Relax libevent build dependency

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 28 Apr 2010 18:14:16 +0400

elliptics (2.7.3.3) unstable; urgency=low

  * History merge support.
  * Do not unlink files, instead put a special transaction into related
    history log.
  * Added version support in HTTP frontend.
  * Added Last-Modified header support in HTTP frontend.
  * Added upload connections limit, which does not allow to post data when
    number of nodes proxy is connected to is less than configured param.
  * API extensions.
  * Bug fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 23 Apr 2010 03:23:49 +0400

elliptics (2.7.3.2) unstable; urgency=low

  * Debian version update after multiple fixes: 2.7.3.2

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 25 Mar 2010 23:35:09 +0300

elliptics (2.7.3.1) unstable; urgency=low

  * Added random hash selection itno fastcgi daemon.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Mar 2010 19:47:45 +0300

elliptics (2.7.3) unstable; urgency=low

  * Turn on dh_makeshlibs debian rule.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 17 Mar 2010 20:59:14 +0300

elliptics (2.7.2) unstable; urgency=low

  * Depend on libevent 1.4 and higher.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 17 Mar 2010 19:12:55 +0300

elliptics (2.7.1) unstable; urgency=low

  * Minor compilation issues fixed.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 17 Mar 2010 17:28:08 +0300

elliptics (2.7.0) unstable; urgency=low

  * Major version update: 2.7.0

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 17 Mar 2010 16:41:29 +0300

elliptics (2.6.4.8) unstable; urgency=low

  * Return 404 POST status when number of upload errors is more than
    configured number (0 by default).

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Mar 2010 20:05:14 +0300

elliptics (2.6.4.7) unstable; urgency=low

  * Initialize transaction number to zero prior starting write.
  * Remove unneded hash checks

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Feb 2010 22:03:56 +0300

elliptics (2.6.4.6) unstable; urgency=low

  * Do not compare checker's hash strings, initialize hashes again,
    since we already dropped them all.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Feb 2010 21:31:48 +0300

elliptics (2.6.4.5) unstable; urgency=low

  * Request remote route table when node adds remote address.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Feb 2010 19:50:03 +0300

elliptics (2.6.4.4) unstable; urgency=low

  * Fixed multiple log lines processing in checker.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 19 Feb 2010 17:38:50 +0300

elliptics (2.6.4.3) unstable; urgency=low

  * Minor cleanups.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Feb 2010 00:58:54 +0300

elliptics (2.6.4.2) unstable; urgency=low

  * Implemented full fsck checker.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 18 Feb 2010 00:20:08 +0300

elliptics (2.6.4.1) unstable; urgency=low

  * Update dnet_fcgi_timeout_sec from DNET_FCGI_NODE_WAIT_TIMEOUT config
    option.
  * Added fcgi request completion flag. When it is not set, fcgi request
    can not be used, usually because it was already closed. This is a
    weak protection since data from one request can be sent to another
    client, but it will only happen when we exit early on timeout, which
    should be noticed in logs, and timeouts changed appropriately.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 17 Feb 2010 17:40:17 +0300

elliptics (2.6.4) unstable; urgency=low

  * Version 2.6.4

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 14 Feb 2010 19:54:47 +0300

elliptics (2.6.3-42) unstable; urgency=low

  * Made wakeup a macros which accepts code executed atomically under
    wait lock. This fixes race in statistics request when multiple
    thread update completion counter.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 13 Feb 2010 18:58:35 +0300

elliptics (2.6.3-41) unstable; urgency=low

  * Added dbg package option.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Feb 2010 18:41:14 +0300

elliptics (2.6.3-40) unstable; urgency=low

  * Added timeouts into FCGI waits

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Feb 2010 14:54:54 +0300

elliptics (2.6.3-39) unstable; urgency=low

  * Check if state was already added when reconnection establishes
    connection, but can not create state.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 11 Feb 2010 14:28:04 +0300

elliptics (2.6.3-38) unstable; urgency=low

  * Implemented ability to dump address or ID into provided buffer, use
    it in race-critical places in fcgi. Core code will suffer from
    simultaneous address/id conversions though, but it is not used in
    critical parts.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Feb 2010 20:48:13 +0300

elliptics (2.6.3-37) unstable; urgency=low

  * Perform vsnprintf() parsing unside locked section to protect
    dnet_fcgi_tmp_buf content.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Feb 2010 18:39:32 +0300

elliptics (2.6.3-36) unstable; urgency=low

  * Fixed off-by-one cookie truncation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Feb 2010 16:45:43 +0300

elliptics (2.6.3-35) unstable; urgency=low

  * Added permanent headers, which are added on every request.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 09 Feb 2010 00:29:54 +0300

elliptics (2.6.3-34) unstable; urgency=low

  * Added client reconnection logic.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 08 Feb 2010 21:45:49 +0300

elliptics (2.6.3-33) unstable; urgency=low

  * Fixed fcgi module to properly use dnet_fcgi_output() printing helper

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 06 Feb 2010 02:47:00 +0300

elliptics (2.6.3-32) unstable; urgency=low

  * Debian changelog update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Feb 2010 05:41:16 +0300

elliptics (2.6.3-31) unstable; urgency=low

  * Fixed printf warning

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Feb 2010 05:40:29 +0300

elliptics (2.6.3-30) unstable; urgency=low

  * Greatly simplified network/reconnection logic.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Feb 2010 04:33:09 +0300

elliptics (2.6.3-27) unstable; urgency=low

  * Force dnet_fcgi_output() to return 0 when nothing was printed out.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 05 Feb 2010 01:46:05 +0300

elliptics (2.6.3-26) unstable; urgency=low

  * Debian changelog update.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Feb 2010 21:16:09 +0300

elliptics (2.6.3-25) unstable; urgency=low

  * Use text/plain instead of text/html for error messages.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Feb 2010 20:13:57 +0300

elliptics (2.6.3-24) unstable; urgency=low

  * Added support for configurable content types.  Config should enable
    following option (lighttpd example): "DNET_FCGI_CONTENT_TYPES" =>
    "xml,text/xml jpg,image/jpeg txt,text/plain"  When ID contains first
    part of comma-separated string, it will set content type to be equal
    to the second part. Only works for direct download, i.e. through
    proxy. Changed default error codes: when lookup/read returns -ENOENT
    (no object) status will be set to 404 and otherwise to 403. Added
    Cache-control: no-cache where needed. # Please enter the commit
    message for your changes. Lines starting # with '#' will be ignored,
    and an empty message aborts the commit. # Explicit paths specified
    without -i nor -o; assuming --only paths... # On branch master #
    Changes to be committed: #   (use "git reset HEAD <file>..." to
    unstage) # # modified:   example/fcgi/fcgi.c # modified:
    example/fcgi/lighttpd-fastcgi-dnet.conf # # Changed but not updated:
    #   (use "git add <file>..." to update what will be committed) #
    (use "git checkout -- <file>..." to discard changes in working
    directory) # # modified:   debian/changelog # # Untracked files: #
    (use "git add <file>..." to include in what will be committed) # #
    build-stamp # debian/dirs # debian/files #
    example/check/dnet_check_log # example/dnet_check_log #
    example/fcgi/dnet_fcgi # example/fcgi/fcgi.c.orig # generated.log

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 04 Feb 2010 20:13:23 +0300

elliptics (2.6.3-23) unstable; urgency=low

  * Added object meta iformation dump into hparser util.  It prints
    total size and parent object id in the last line. # Please enter the
    commit message for your changes. Lines starting # with '#' will be
    ignored, and an empty message aborts the commit. # Explicit paths
    specified without -i nor -o; assuming --only paths... # On branch
    master # Changes to be committed: #   (use "git reset HEAD
    <file>..." to unstage) # # modified:   example/hparser.c # # Changed
    but not updated: #   (use "git add <file>..." to update what will be
    committed) #   (use "git checkout -- <file>..." to discard changes
    in working directory) # # modified:   debian/changelog # # Untracked
    files: #   (use "git add <file>..." to include in what will be
    committed) # # build-stamp # debian/dirs # debian/files #
    example/check/dnet_check_log # example/dnet_check_log #
    example/fcgi/dnet_fcgi # example/fcgi/fcgi.c.orig # generated.log

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Feb 2010 00:52:09 +0300

elliptics (2.6.3-22) unstable; urgency=low

  * Imporoved log checker.  Added ability to properly upload new files
    when old ones did not exist as file itself, but only as transaction
    log. # Please enter the commit message for your changes. Lines
    starting # with '#' will be ignored, and an empty message aborts the
    commit. # Explicit paths specified without -i nor -o; assuming --
    only paths... # On branch master # Changes to be committed: #   (use
    "git reset HEAD <file>..." to unstage) # # modified:
    example/check/log.c # # Changed but not updated: #   (use "git add
    <file>..." to update what will be committed) #   (use "git checkout
    -- <file>..." to discard changes in working directory) # # modified:
    debian/changelog # # Untracked files: #   (use "git add <file>..."
    to include in what will be committed) # # build-stamp # debian/dirs
    # debian/files # example/check/dnet_check_log #
    example/dnet_check_log # example/fcgi/dnet_fcgi #
    example/fcgi/fcgi.c.orig # generated.log

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 03 Feb 2010 00:40:15 +0300

elliptics (2.6.3-21) unstable; urgency=low

  * Allow all kinds of files to be checked (both transaction logs and
    plain data files like written by fcgi proxy)

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Feb 2010 22:22:47 +0300

elliptics (2.6.3-20) unstable; urgency=low

  * Use private mutex-protected helper function to workaround libfcgi
    64bit and concurency issues.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 02 Feb 2010 20:33:01 +0300

elliptics (2.6.3-19) unstable; urgency=low

  * Always perform 'physical' lookup and do not read history files (read
    data one).

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Feb 2010 19:42:21 +0300

elliptics (2.6.3-18) unstable; urgency=low

  * Implemented reply to POST method - fcgi daemon returns XML with IDs
    generated for given object.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 01 Feb 2010 17:46:59 +0300

elliptics (2.6.3-17) unstable; urgency=low

  * Initial fsck implementation. Supports number of copies check
    currently.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 31 Jan 2010 22:33:25 +0300

elliptics (2.6.3-16) unstable; urgency=low

  * Return NULL from watchdog thread to shut up compiler

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 30 Jan 2010 01:46:27 +0300

elliptics (2.6.3-15) unstable; urgency=low

  * Added second line break on error path and worked around libfcgi bug,
    when it does not understand %ll. printf format and resets the
    stream.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 28 Jan 2010 16:56:21 +0300

elliptics (2.6.3-14) unstable; urgency=low

  * Debian changelog update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jan 2010 18:59:40 +0300

elliptics (2.6.3-13) unstable; urgency=low

  * Return before entering error path on success.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jan 2010 18:59:26 +0300

elliptics (2.6.3-12) unstable; urgency=low

  * Debian changelog update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jan 2010 02:27:11 +0300

elliptics (2.6.3-11) unstable; urgency=low

  * Use 64bit mask in fcgi proxy.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 27 Jan 2010 02:26:56 +0300

elliptics (2.6.3-10) unstable; urgency=low

  * Debian changelog update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Jan 2010 22:56:20 +0300

elliptics (2.6.3-9) unstable; urgency=low

  * Print 6 bytes of ID by default.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Jan 2010 22:33:34 +0300

elliptics (2.6.3-8) unstable; urgency=low

  * Use 64 bit mask in filesystem backend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 26 Jan 2010 22:32:25 +0300

elliptics (2.6.3-7) unstable; urgency=low

  * Changed error returt status, added strerror() output and content
    type.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Jan 2010 01:06:51 +0300

elliptics (2.6.3-6) unstable; urgency=low

  * Do not try non-direct download if unsupported type was requested.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 20 Jan 2010 00:05:57 +0300

elliptics (2.6.3-5) unstable; urgency=low

  * Debian changelog update

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Jan 2010 20:25:00 +0300

elliptics (2.6.3-4) unstable; urgency=low

  * Fixed cookie/sign generation algo according to documentation.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 19 Jan 2010 20:22:27 +0300

elliptics (2.6.3-3) unstable; urgency=low

  * Shut down some noisy information prints

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sun, 20 Dec 2009 00:47:00 +0300

elliptics (2.6.3-2) unstable; urgency=low

  * Added cleanup debug message into dnet_cleanup_transform()

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 19 Dec 2009 22:19:53 +0300

elliptics (2.6.3-1) unstable; urgency=low

  * Added transformation cleanup into node destruction path.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 19 Dec 2009 22:07:30 +0300

elliptics (2.6.3) unstable; urgency=low

  * 2.6.3 release

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Dec 2009 21:56:35 +0300

elliptics (2.6.2-7) unstable; urgency=low

  * New elliptics network release: 2.6.3

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Dec 2009 21:55:52 +0300

elliptics (2.6.2-6) unstable; urgency=low

  * "Added fastcgi README into distribution"

 -- Evgeniy Polyakov <zbr@ioremap.net>  Thu, 17 Dec 2009 21:55:11 +0300

elliptics (2.6.2-5) unstable; urgency=low

  * Changed cookie generation algorithm, fixed direct URI generatation
    for IO storage backend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Tue, 15 Dec 2009 17:12:01 +0300

elliptics (2.6.2-4-1) unstable; urgency=low

  * Extended file IO backend - put :f into getopt.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 14 Dec 2009 20:41:00 +0300

elliptics (2.6.2-4) unstable; urgency=low

  * Extended file IO backend.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Mon, 14 Dec 2009 19:10:40 +0300

elliptics (2.6.2-3) unstable; urgency=low

  * Dynamic per-address transformation function selection.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 09 Dec 2009 19:28:04 +0300

elliptics (2.6.2-2) unstable; urgency=low

  * Virtual datacenters.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Sat, 05 Dec 2009 05:58:24 +0300

elliptics (2.6.2-1) unstable; urgency=low

  * Version increment: features and bug fixes.

 -- Evgeniy Polyakov <zbr@ioremap.net>  Fri, 04 Dec 2009 16:08:41 +0300

elliptics (2.6.2) unstable; urgency=low

  * Added FastCGI daemon
  * Extended lookup to check whether requested object is stored locally
  * Added lighttpd fastcgi config
  * Bug fixes

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 Nov 2009 19:47:25 +0300

elliptics (2.6.1-1) unstable; urgency=low

  * Initial release (Closes: #nnnn)  <nnnn is the bug number of your ITP>

 -- Evgeniy Polyakov <zbr@ioremap.net>  Wed, 18 Nov 2009 16:14:14 +0300
